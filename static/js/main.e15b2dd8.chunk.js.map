{"version":3,"sources":["components/ProgressBar/index.js","components/SimpleDialog/index.js","utils/use-electron.js","components/ImportFromYoutubeUrls/index.js","components/Theme/index.js","utils/use-posthog.js","components/CollaborateButton/index.js","components/HeaderPopupBox/index.js","components/DownloadButton/index.js","components/Header/GithubIcon.js","utils/get-brush-color-palette.js","components/BrushButton/index.js","components/HeaderToolbar/index.js","components/StartingPage/templates.js","components/HeaderDrawer/index.js","components/Header/index.js","components/CreateFromTemplateDialog/index.js","utils/use-is-desktop.js","components/StartingPage/index.js","components/OHAEditor/default-oha-object.js","utils/get-task-description.js","components/SampleContainer/LinkButton.js","components/SampleContainer/index.js","components/TextClassification/index.js","components/TextEntityRecognition/index.js","utils/ria-format.js","components/ImageSegmentation/index.js","components/ImageClassification/index.js","components/VideoSegmentation/index.js","components/AudioTranscription/index.js","components/DataEntry/index.js","components/BadOHA/index.js","components/EmptySampleContainer/index.js","components/InterfaceIcon/index.js","components/Composite/index.js","components/UniversalDataViewer/index.js","components/OHAEditor/EditableTitleText.js","components/SampleGrid/index.js","components/PasteUrlsDialog/index.js","components/TextAreaWithUpload/index.js","components/ImportTextSnippetsDialog/index.js","components/ImportFromGoogleDriveDialog/index.js","utils/from-udt-csv.js","components/ImportUDTFileDialog/index.js","components/ImportToyDatasetDialog/index.js","components/ImportPage/index.js","components/TransformVideoKeyframesDialog/index.js","components/DownloadURLsDialog/index.js","components/TransformVideoFramesToImagesDialog/index.js","components/TransformPage/index.js","components/SamplesView/index.js","components/ConfigureImageSegmentation/index.js","components/ConfigureImageClassification/index.js","components/ConfigureTextClassification/index.js","components/PaperContainer/index.js","components/ConfigureAudioTranscription/index.jsx","components/ConfigureNLP/index.js","components/ConfigureDataEntry/index.js","components/ConfigureComposite/index.js","components/Configure3D/index.js","components/ConfigureVideoSegmentation/index.js","components/ConfigureInterface/index.js","components/InterfacePage/index.js","components/EditSampleDialog/index.js","components/Stats/index.js","components/Toasts/index.js","components/OHAEditor/index.js","utils/use-time-to-complete-sample.js","components/ErrorToasts/index.js","utils/use-errors.js","utils/file-handlers/use-server/apply-seamless-patch.js","utils/file-handlers/use-server/index.js","utils/file-handlers/use-filesystem.js","utils/file-handlers/use-file-telemetry.js","utils/file-handlers/index.js","utils/file-handlers/use-local-storage.js","utils/to-udt-csv.js","components/ErrorBoundary/index.js","components/LocalStorageApp/index.js","components/DesktopApp/index.js","App.js","index.js"],"names":["Container","styled","height","width","boxSizing","position","marginTop","marginBottom","backgroundColor","colors","Text","left","right","top","bottom","paddingTop","fontSize","textAlign","fontWeight","Bar","progress","style","Math","floor","StyledDialogTitle","DialogTitle","grey","borderBottom","paddingBottom","boxShadow","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","borderTop","open","title","children","markdownContent","onClose","redOn","red","noActionBar","actions","useState","fullScreen","changeFullScreen","display","alignItems","color","undefined","flexGrow","onClick","maxWidth","minWidth","lineHeight","source","map","action","i","disabled","key","blue","text","window","require","TextArea","minHeight","TotalPercentageWrapper","flexDirection","justifyContent","ImportFromYoutubeUrls","remote","onAddSamples","useElectron","youtubeURLsArray","setYoutubeURLsArray","youtubeURLs","setYoutubeURLs","downloadPath","setDownloadPath","startDownload","setStartDownload","currentVideo","setCurrentVideo","totalProgress","setTotalProgress","downloadYoutubeURLs","youtubeURL","startsWith","ytdl","err","info","videoTitle","starttime","currentPath","path","join","writable","createWriteStream","videoWithOptions","format","on","finished","progressText","progressPercentage","pipe","once","Date","now","chunkLength","downloaded","total","percent","downloadedMinutes","cursorTo","process","stdout","write","toFixed","moveCursor","Number","downloadYoutubeURL","selectDownloadPath","a","dialog","showOpenDialog","buttonLabel","properties","canceled","filePaths","useEffect","splittedURLs","urlsHasHTTPS","splittedNewLines","split","splittedNewLine","includes","push","splitURLs","length","progressVariable","currentObject","currentTotalProgress","currentVideoIndex","indexOf","videos","Object","values","videoProgress","zeroFilledArray","Array","fill","onChange","e","v","target","value","placeholder","percentage","totalLength","totalFinished","useStyles","makeStyles","container","fontFamily","theme","createMuiTheme","palette","primary","secondary","typography","button","textTransform","classes","ThemeProvider","className","posthogInitialized","isDesktop","Boolean","posthog","init","api_host","autocapture","domain","location","origin","capture","people","set","is_desktop","marginLeft","borderColor","popupBoxBeforeAndAfter","border","content","pointerEvents","PopupBox","zIndex","padding","borderRadius","borderBottomColor","borderWidth","opacity","transition","transform","CreateNewButton","Button","marginRight","ExitButton","fileOpen","inSession","onJoinSession","onCreateSession","onLeaveSession","sessionBoxOpen","changeSessionBoxOpen","loadingSession","changeLoadingSession","sessionUrl","changeSessionUrl","useLocalStorage","userName","changeUserName","usePosthog","setTimeout","onMouseEnter","onMouseLeave","IconButton","TextField","variant","label","fullWidth","InputProps","endAdornment","InputAdornment","CircularProgress","size","StyledButton","onDownload","changeOpen","HeaderPopupBox","GitHub","props","SvgIcon","d","fadedGrey","isFaded","availableColors","colorMap","complete","incomplete","faded","review","brush","seed","BrushCircle","OtherColorContainers","flexWrap","StyledIconButton","iconColor","selected","margin","selectedBrush","onChangeSelectedBrush","handleClick","useEventCallback","memoize","getBrushColorPalette","headerButton","grow","list","tab","fullHeightTab","mixins","toolbar","breakpoints","down","tabWrapper","getIcon","t","memo","tabs","currentTab","onChangeTab","additionalButtons","onOpenDrawer","isSmall","c","AppBar","Toolbar","packageJSON","version","CollaborateButton","BrushButton","DownloadButton","Tabs","newTab","toLowerCase","Tab","root","wrapper","icon","href","GithubIcon","name","Icon","CropFree","oha","interface","taskData","ImageSearch","type","availableLabels","regionTypesAllowed","imageUrl","Image","OndemandVideoIcon","videoUrl","Edit","description","surveyjs","questions","pdfUrl","TextFormat","overlapAllowed","labels","id","displayName","document","ContactSupport","Audiotrack","audioUrl","Category","fields","fieldName","ThreeDRotation","recentItems","changeRecentItems","onClickHome","onCloseDrawer","drawerOpen","onOpenFile","onOpenRecentItem","onClickTemplate","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","Drawer","List","ListItem","ListItemIcon","ListItemText","ListSubheader","ri","index","fileName","filter","oneRecentFile","templates","template","HeaderContext","createContext","emptyArray","changeDrawerOpen","headerContext","useContext","useMediaQuery","HeaderDrawer","bigButton","bigIcon","onSelect","SimpleDialog","ContentContainer","overflowY","Content","Title","Subtitle","ActionList","Action","cursor","textDecoration","ActionTitle","ActionText","Actionless","BottomSpacer","onFileDrop","onOpenTemplate","showDownloadLink","onClickOpenSession","useIsDesktop","newVersionAvailable","changeNewVersionAvailable","fetch","then","r","json","newPackage","packageInfo","checkNewVersion","createFromTemplateDialogOpen","changeCreateFromTemplateDialogOpen","isDragActive","CreateFromTemplateDialog","clicked_template","Header","Grid","xs","item","find","trim","getTaskDescription","taskDataItem","url","replace","linkButtonContainer","linkButton","footer","footerContent","footerBorder","footerCount","allSamplesButton","paddingLeft","sampleIcon","menuButton","buttons","maxHeight","sectionHeader","SampleContainer","hideDescription","defaultHideDescription","onExit","lastSampleExitText","requireCompleteToPressNext","minContentHeight","currentSampleIndex","totalSamples","onChangeSample","taskOutput","changeHideDescription","sampleDrawerOpen","changeSampleDrawerOpen","sm","md","LinkButton","escapeHtml","anchor","range","TextClassification","changeCurrentSampleIndex","initialLabels","l","containerProps","sampleIndex","NLPAnnotator","multipleLabels","multiple","onFinish","result","onSaveTaskOutputItem","simpleSequenceToEntitySequence","simpleSeq","entSeq","charsPassed","seq","start","end","TextEntityRecognition","initialSequence","doc","sort","b","nextEntity","entitySequenceToSimpleSeq","entities","getRandomColor","min","max","h","random","concat","toString","rid","convertToRIARegionFmt","region","regionType","cls","classification","tags","x","centerX","y","centerY","w","points","p","Error","JSON","stringify","convertFromRIARegionFmt","riaRegion","convertToRIAKeyframes","keyframes","newKeyframes","regions","regionTypeToTool","polygon","point","emptyObj","emptyArr","iface","selectedIndex","isClassification","multipleRegionLabels","labelProps","useMemo","regionClsList","regionTagList","multipleRegions","output","regionMat","images","img","riaRegions","taskDatum","td","isArray","src","videoFrameAt","frameTime","convertToRIAImageFmt","datasetName","enabledTools","rt","console","log","selectedImage","taskDescription","brightColors","letters","hashInt","reduce","acc","ImageContainer","objectFit","Nav","NavItem","NavButton","paddingRight","ButtonsContainer","CheckButton","globalSampleIndex","changeSampleIndex","enlargedLabel","changeEnlargedLabel","currentOutput","changeCurrentOutput","onDone","newOutput","onNext","onPrev","timeout","clearTimeout","onClickLabel","without","allowMultiple","hotkeyMap","backspace","enter","rightarrow","leftarrow","labelKeyMap","nextAvailableLetter","onKeyDown","addEventListener","removeEventListener","Checkbox","checked","videoName","customId","videoTime","videoSrc","audio","phraseBank","initialTranscriptionText","DataEntry","form","defaultAnswers","completeText","answers","explain","Typography","component","BadOHA","Composite","selectedField","changeSelectedField","indexZero","field","InterfaceIcon","Box","UniversalDataViewer","hideHeader","EmptySampleContainer","ImageSegmentation","ImageClassification","VideoSegmentation","AudioTranscription","textField","editing","newValue","changeEditing","listener","SAVE_WAIT","inputProps","preventDefault","stopPropagation","blur","onKeyPress","SampleDiv","userSelect","Sample","completed","onMouseDown","onMouseUp","classNames","n","count","samplesPerPage","changeSamplesPerPage","sampleOffset","changeSampleOffset","useReducer","state","selectRange","changeSelectRange","startSelectRange","moveSelectRange","endSelectRange","checkAndNullifySelectRange","onClickMemo","TablePagination","rowsPerPageOptions","rowsPerPage","page","labelRowsPerPage","onChangePage","newPage","onChangeRowsPerPage","changeContent","s","slice","error","UploadHover","emptyFunc","onChangeContent","reader","FileReader","onload","fileContent","endsWith","readAsText","lastClickTime","changeLastClickTime","ImportTextSnippetsDialog","TextAreaWithUpload","ExplainText","GoogleDriveScreenshot","credentials","web","client_id","app_id","developer_key","googleScriptLoaded","setGoogleScriptLoaded","pickerApiLoaded","setPickerApiLoaded","oauthToken","setOAuthToken","userSelectedItemsFromDrive","setUserSelectedItemsFromDrive","isPickerOpen","setIsPickerOpen","scriptElement","createElement","async","body","appendChild","remove","googlePickerActionCallback","data","google","picker","PICKED","docs","googleDriveDocument","mimeType","createPicker","view","View","ViewId","Docs","setMimeTypes","PickerBuilder","enableFeature","Feature","NAV_HIDDEN","MULTISELECT_ENABLED","setAppId","addView","DOCS","setDeveloperKey","setCallback","build","setVisible","handleAuthenticationResponse","authenticationResponse","access_token","onAuthApiLoad","gapi","auth","authorize","scope","immediate","onPickerApiLoad","onLoadPicker","load","callback","samples","csv","JAC","fromCSV","sample","InfoText","whiteSpace","ImportUDTFileDialog","changeError","setContent","parse","e1","udt","fromUDTCSV","e2","datasets","getSamples","dataset","datasetUrl","ImportToyDatasetDialog","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","ButtonBase","MuiButton","DesktopOnlyText","SelectDialogContext","desktopOnly","Consumer","onChangeDialog","classnames","convertToTaskDataObject","fp","ext","onChangeOHA","selectedDialog","changeDialog","electron","dirPaths","dirPath","fs","promises","readdir","importedFilePaths","fn","setIn","closeDialog","appendedTaskData","appendedTaskOutput","newOHA","ar","len","extendWithNull","Provider","AssignmentReturnedIcon","CreateNewFolderIcon","TextFieldsIcon","PetsIcon","FaGoogleDrive","FaYoutube","DescriptionIcon","PasteUrlsDialog","ImportFromGoogleDriveDialog","Code","StyledExpansionPanel","ExpansionPanel","StyledExpansionPanelSummary","ExpansionPanelSummary","flatMap","keys","kf","parseInt","immutable","ExpansionPanelDetails","ErrorBox","downloadFile","urlToDownload","directoryPath","md5","existsSync","Promise","resolve","reject","directory","filename","changeProgress","errors","changeErrors","cancelled","newTaskData","urlKey","pathToFile","ProgressBar","getFfmpegTimeCode","ms","cs","ss","mn","padStart","pathToFfmpeg","shell","exec","transformsPerformed","videoPath","imageOutputPath","ffmpegCommand","Icon1","Icon2","CollectionsIcon","GetAppIcon","ImageIcon","TransformVideoKeyframesDialog","DownloadURLsDialog","TransformVideoFramesToImagesDialog","ExpandedRowContainer","borderTopLeftRadius","borderTopRightRadius","ExpandedRowTitle","ExpandedRowCode","ExpandedRow","_output","input","spacing","openSampleInputEditor","openSampleLabelEditor","deleteSample","localStorage","lastSampleTab","changeTabState","changeTab","columns","selector","sortable","knownKeys","Set","has","add","cell","row","raised","ImportPage","shouldViewChange","TransformPage","SampleGrid","expandableRowsComponent","expandableRows","dense","pagination","paginationPerPage","paginationRowsPerPageOptions","choices","cellType","noActions","onQuestionChange","questionId","PaperContainer","hasOther","column","NoQuestions","Question","borderLeft","PreviewHeader","anchorEl","useRef","menuOpen","changeMenuOpen","q","defaultValue","multiline","rows","ref","current","MenuItem","Fields","Fragment","f","fieldIndex","expandIcon","newFieldInterface","fieldOrder","ExplanationTextHeader","ExplanationText","GithubLink","Configure3D","rel","NoOptions","TypeButton","Heading","SelectType","currentlySelected","ConfigureInterface","onClickEditJSON","ConfigureImageSegmentation","ConfigureImageClassification","ConfigureComposite","ConfigureDataEntry","ConfigureAudioTranscription","ConfigureNLP","ConfigureTextClassification","ConfigureVideoSegmentation","onClearLabelData","forceUpdate","useUpdate","confirm","has_opted_out_captureing","opt_in_captureing","opt_out_captureing","sampleInput","changeText","newText","mode","editorProps","$blockScrolling","Infinity","Stat","Label","Value","stats","msgBox","ToastContext","useToasts","addToast","ToastProvider","fullLife","messageType","message","life","msg","toasts","changeToasts","interval","setInterval","clearInterval","Collapse","in","Fade","saveIcon","editIcon","headerTabs","onChangeFileName","initialMode","changeMode","singleSampleOHA","changeSingleSampleOHA","sampleInputEditor","changeSampleInputEditor","jsonText","changeJSONText","ipcRenderer","newTimeToComplete","newSamplesInWindow","samplesInWindow","timeToCompleteSample","useTimeToCompleteSample","changeSampleTimeToComplete","onOpenSettingsPage","onOpenSamplesPage","onOpenLabelPage","removeListener","percentComplete","EditableTitleText","InterfacePage","some","SamplesView","annotationStartTime","newTaskOutput","splice","relativeIndex","tdi","nextAction","startTime","Stats","duration","EditSampleDialog","newInput","errorBox","addToArray","withoutIn","obj","parentPath","parentObj","getIn","object","patches","patch","op","from","isNaN","updateIn","serverUrl","useLocalCollaborationServer","getJSON","bent","postJSON","patchJSON","hash","o","objectHash","getLatestState","sessionId","encodeURIComponent","res","udt_json","convertToCollaborativeFile","file","response","short_id","lastSyncedVersion","lastSyncedState","cloneDeep","webReturn","saveFile","changeFile","saveAs","saveFileAsync","filePath","showSaveDialog","filters","extensions","newFilePath","writeFile","useFilesystem","checkForLatestPatch","hashOfLatestState","latestVersion","changeLog","sampleMatch","match","newFileContent","applySeamlessPatch","latest","makeImmutable","rfc6902","sendPatchIfChanges","useServer","interface_type","last_used_interface_type","dataset_size","numCompleted","samples_completed","percent_completed","openFile","fsFile","handleLoadedFile","openUrl","decodeURIComponent","history","replaceState","search","makeSession","newFile","samplesObj","sampleKeys","flatten","forEach","k","options","toCSV","Sentry","dsn","Buttons","ErrorBoundary","hasError","errorInfo","setExtras","eventId","setState","this","errorDetails","reload","detect","stack","React","Component","empty","randomId","useFileHandler","useErrors","setSelectedBrush","onCreateTemplate","openRecentItem","outputName","download","toUDTCSV","sessionName","OHAEditor","newName","StartingPage","ErrorToasts","onOpenWelcomePage","onNewFile","arg0","templateName","saveFileAs","exportToCSV","onOpenFileFromToolbar","App","Theme","DesktopApp","LocalStorageApp","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e15b2dd8.chunk.js","sourcesContent":["// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  height: 36,\n  width: \"100%\",\n  boxSizing: \"border-box\",\n  position: \"relative\",\n  marginTop: 8,\n  marginBottom: 8,\n  backgroundColor: colors.blue[50],\n})\nconst Text = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0,\n  paddingTop: 4,\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n})\nconst Bar = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  bottom: 0,\n  top: 0,\n  backgroundColor: colors.blue[300],\n})\n\nexport default ({ progress }) => {\n  return (\n    <Container>\n      <Bar style={{ right: 100 - progress + \"%\" }} />\n      <Text>{Math.floor(progress)}%</Text>\n    </Container>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport CloseIcon from \"@material-ui/icons/Close\"\nimport FullScreenIcon from \"@material-ui/icons/Fullscreen\"\nimport FullScreenExitIcon from \"@material-ui/icons/FullscreenExit\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport { grey, blue, red } from \"@material-ui/core/colors\"\nimport ReactMarkdown from \"react-markdown\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst StyledDialogTitle = styled(DialogTitle)({\n  backgroundColor: grey[100],\n  borderBottom: `1px solid ${grey[300]}`,\n  paddingBottom: 12,\n  boxShadow: \"0px 2px 3px rgba(0,0,0,0.05)\",\n})\nconst StyledDialogContent = styled(DialogContent)({\n  paddingTop: 16,\n})\nconst StyledDialogActions = styled(DialogActions)({\n  backgroundColor: grey[100],\n  borderTop: `1px solid ${grey[300]}`,\n})\n\nexport default ({\n  open = false,\n  title,\n  children,\n  markdownContent,\n  onClose,\n  red: redOn,\n  noActionBar = false,\n  actions = [],\n}) => {\n  const [fullScreen, changeFullScreen] = useState(false)\n  return (\n    <Dialog open={open} onClose={onClose} fullScreen={fullScreen}>\n      <StyledDialogTitle>\n        <Box display=\"flex\" alignItems=\"center\">\n          <span style={{ color: redOn ? red[700] : undefined }}>{title}</span>\n          <div style={{ flexGrow: 1 }} />\n          <IconButton onClick={() => changeFullScreen(!fullScreen)}>\n            {fullScreen ? <FullScreenExitIcon /> : <FullScreenIcon />}\n          </IconButton>\n          <IconButton onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </StyledDialogTitle>\n      <StyledDialogContent>\n        <Box maxWidth=\"90vw\" minWidth={400} lineHeight={1.5}>\n          {markdownContent ? (\n            <ReactMarkdown source={markdownContent} />\n          ) : (\n            children\n          )}\n        </Box>\n      </StyledDialogContent>\n      {!noActionBar && (\n        <StyledDialogActions>\n          <Button onClick={() => onClose()}>\n            <span style={{ color: grey[700], fontWeight: 500 }}>Close</span>\n          </Button>\n          {actions.map((action, i) => (\n            <Button disabled={action.disabled} key={i} onClick={action.onClick}>\n              <span\n                style={{ color: redOn ? red[700] : blue[700], fontWeight: 500 }}\n              >\n                {action.text}\n              </span>\n            </Button>\n          ))}\n        </StyledDialogActions>\n      )}\n    </Dialog>\n  )\n}\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return window.require(\"electron\")\n  }\n  return null\n}\n","import React, { useState, useEffect } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport * as ytdl from \"ytdl-core\"\nimport useElectron from \"../../utils/use-electron\"\nimport path from \"path\"\nimport ProgressBar from \"../ProgressBar\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\n\nconst TotalPercentageWrapper = styled(\"div\")({\n  flexDirection: \"row\",\n  justifyContent: \"space-between\",\n})\n\n// TODO: ADD Select Video Quality\nconst videoQualities = [\n  \"highest\",\n  \"lowest\",\n  \"highestaudio\",\n  \"lowestaudio\",\n  \"highestvideo\",\n  \"lowestvideo\",\n]\n\n/*\n *\n *   User opened modal with clicking \"Import Youtube URLs\"\n *   User paste youtube URLs\n *   When youtubeUrls changed split that URLs by the \"\\n\"\n *   Take those splitted URLs in a new array\n *   User click \"Download Youtube URLs\"\n *   startDownload will true by the click\n *   User select download path\n *   Take that download path\n *   When download path is not null download starts\n *\n */\n\nconst ImportFromYoutubeUrls = ({ open, onClose, onAddSamples }) => {\n  const { remote } = useElectron() || {}\n  const [youtubeURLsArray, setYoutubeURLsArray] = useState([])\n  const [youtubeURLs, setYoutubeURLs] = useState(\"\")\n  const [downloadPath, setDownloadPath] = useState()\n  const [startDownload, setStartDownload] = useState(false)\n  const [currentVideo, setCurrentVideo] = useState(null)\n  const [totalProgress, setTotalProgress] = useState(null)\n\n  const splitURLs = () => {\n    const urlsHasHTTPS = []\n    const splittedNewLines = youtubeURLs.split(\"\\n\")\n    for (const splittedNewLine of splittedNewLines) {\n      if (splittedNewLine.includes(\"https://\")) {\n        urlsHasHTTPS.push(splittedNewLine)\n      }\n    }\n    const splittedURLs = urlsHasHTTPS\n    return splittedURLs\n  }\n\n  const downloadYoutubeURL = (youtubeURL, videoTitle) => {\n    const currentPath = path.join(downloadPath, `${videoTitle + \".mp4\"}`)\n    const writable = remote.require(\"fs\").createWriteStream(currentPath)\n\n    //TODO: ADD selected video quality in that parameters object\n    const videoWithOptions = ytdl(youtubeURL, {\n      format: \"video/mp4\",\n    })\n\n    videoWithOptions.on(\"end\", () => {\n      setCurrentVideo({\n        title: null,\n        finished: true,\n        progressText: null,\n        progressPercentage: null,\n      })\n    })\n\n    videoWithOptions.pipe(writable)\n\n    let starttime\n\n    videoWithOptions.once(\"response\", () => {\n      starttime = Date.now()\n    })\n\n    videoWithOptions.on(\"progress\", (chunkLength, downloaded, total) => {\n      const percent = downloaded / total\n      const downloadedMinutes = (Date.now() - starttime) / 1000 / 60\n\n      remote.require(\"readline\").cursorTo(process.stdout, 0)\n      remote.process.stdout.write(`${(percent * 100).toFixed(2)}% downloaded `)\n      remote.process.stdout.write(\n        `(${(downloaded / 1024 / 1024).toFixed(2)}MB of ${(\n          total /\n          1024 /\n          1024\n        ).toFixed(2)}MB)\\n`\n      )\n      remote.process.stdout.write(\n        `running for: ${downloadedMinutes.toFixed(2)}minutes`\n      )\n      remote.process.stdout.write(\n        `, estimated time left: ${(\n          downloadedMinutes / percent -\n          downloadedMinutes\n        ).toFixed(2)}minutes `\n      )\n      remote.require(\"readline\").moveCursor(process.stdout, 0, -1)\n\n      setCurrentVideo({\n        youtubeURL,\n        title: videoTitle,\n        finished: false,\n        progressText: `${(percent * 100).toFixed(2)}% downloaded (${(\n          downloaded /\n          1024 /\n          1024\n        ).toFixed(2)}MB of ${(total / 1024 / 1024).toFixed(\n          2\n        )}MB), estimated time left: ${(\n          downloadedMinutes / percent -\n          downloadedMinutes\n        ).toFixed(2)}minutes`,\n        progressPercentage: Number((percent * 100).toFixed(2)),\n      })\n    })\n  }\n\n  const downloadYoutubeURLs = () => {\n    for (const youtubeURL of youtubeURLsArray) {\n      if (youtubeURL.startsWith(\"https://\")) {\n        ytdl.getBasicInfo(youtubeURL, (err, info) => {\n          const { title } = info\n          if (title) {\n            downloadYoutubeURL(youtubeURL, title)\n          }\n        })\n      }\n    }\n  }\n\n  const selectDownloadPath = async () => {\n    const { canceled, filePaths } = await remote.dialog.showOpenDialog({\n      title: \"Directory to download files to\",\n      buttonLabel: \"Download Files Here\",\n      properties: [\"createDirectory\", \"openDirectory\", \"promptToCreate\"],\n    })\n\n    if (canceled === false && filePaths) {\n      setDownloadPath(filePaths[0])\n    }\n  }\n\n  useEffect(() => {\n    const splittedURLs = splitURLs()\n    setYoutubeURLsArray(splittedURLs)\n  }, [youtubeURLs])\n\n  useEffect(() => {\n    if (startDownload === true) {\n      selectDownloadPath()\n    }\n  }, [startDownload])\n\n  useEffect(() => {\n    if (downloadPath) {\n      downloadYoutubeURLs()\n    }\n  }, [downloadPath])\n\n  useEffect(() => {\n    if (\n      youtubeURLsArray.length > 0 &&\n      currentVideo !== null &&\n      currentVideo.youtubeURL !== null\n    ) {\n      let progressVariable = 0\n      const currentObject = { ...totalProgress }\n      let currentTotalProgress = null\n      const currentVideoIndex = youtubeURLsArray.indexOf(\n        currentVideo.youtubeURL\n      )\n      if (\n        totalProgress !== null &&\n        totalProgress.videos &&\n        totalProgress.videos.length > 0\n      ) {\n        currentTotalProgress = Object.values(totalProgress.videos).map(\n          (videoProgress) =>\n            (progressVariable = progressVariable + Number(videoProgress))\n        )\n        progressVariable = progressVariable / (100 * youtubeURLsArray.length)\n        currentTotalProgress = progressVariable\n        if (currentVideo.progressPercentage === 100) {\n          currentObject[\"totalFinished\"] = currentObject[\"totalFinished\"] + 1\n        }\n      } else {\n        const zeroFilledArray = new Array(youtubeURLsArray.length - 1).fill(0)\n        currentObject[\"videos\"] = zeroFilledArray\n        currentTotalProgress =\n          Number(currentVideo.progressPercentage) /\n          (100 * (youtubeURLsArray.length - 1))\n        currentObject[\"totalFinished\"] = 0\n      }\n      currentObject[\"videos\"][currentVideoIndex] = Number(\n        currentVideo.progressPercentage\n      )\n      currentObject[\"percentage\"] = currentTotalProgress * 100\n      currentObject[\"totalLength\"] = youtubeURLsArray.length\n\n      setTotalProgress(currentObject)\n    }\n  }, [currentVideo])\n\n  const refreshState = () => {\n    setYoutubeURLs(\"\")\n    setDownloadPath(null)\n    setStartDownload(false)\n    setCurrentVideo(null)\n    setTotalProgress(null)\n  }\n\n  const closed = () => {\n    onClose()\n    refreshState()\n  }\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={closed}\n      title=\"Import from Youtube URLs\"\n      actions={[\n        {\n          text: \"Download Youtube URLs\",\n          onClick: () => setStartDownload(true),\n          disabled: currentVideo !== null ? true : false,\n        },\n      ]}\n    >\n      <TextArea\n        onChange={(e, v) => setYoutubeURLs(e.target.value)}\n        placeholder={\"Paste Youtube URLs here\\nOne URL per line\"}\n        style={{\n          display: downloadPath ? \"none\" : \"block\",\n        }}\n      />\n\n      {/* =======================================* Current Percentage Start *======================================= */}\n      {downloadPath && currentVideo !== null && currentVideo.title ? (\n        <h2>Downloading: {currentVideo.title}</h2>\n      ) : null}\n      {downloadPath && currentVideo !== null && currentVideo.progressText ? (\n        <h2>Progress: {currentVideo.progressText}</h2>\n      ) : null}\n      <div\n        style={{\n          display:\n            currentVideo === null ||\n            currentVideo.progressPercentage === null ||\n            currentVideo.finished === true\n              ? \"none\"\n              : \"block\",\n        }}\n      >\n        <ProgressBar\n          progress={\n            downloadPath &&\n            currentVideo !== null &&\n            currentVideo.progressPercentage\n              ? currentVideo.progressPercentage\n              : 0\n          }\n        />\n      </div>\n      {/* =======================================* Current Percentage End *======================================= */}\n\n      {/* =======================================* ********************** *======================================= */}\n\n      {/* =======================================* Total Percentage Start *======================================= */}\n      {downloadPath && youtubeURLsArray.length > 0 ? (\n        <ProgressBar\n          progress={\n            totalProgress !== null && totalProgress.percentage\n              ? totalProgress.percentage\n              : 0\n          }\n        />\n      ) : null}\n      <TotalPercentageWrapper\n        style={{\n          display:\n            downloadPath &&\n            youtubeURLsArray.length > 0 &&\n            totalProgress !== null\n              ? \"flex\"\n              : \"none\",\n        }}\n      >\n        <h2>\n          Total Videos:\n          {downloadPath &&\n          youtubeURLsArray.length > 0 &&\n          totalProgress !== null &&\n          totalProgress.totalLength\n            ? totalProgress.totalLength\n            : null}\n        </h2>\n        <h2>\n          Finished:\n          {downloadPath && youtubeURLsArray.length > 0 && totalProgress !== null\n            ? totalProgress.totalFinished\n            : null}\n        </h2>\n      </TotalPercentageWrapper>\n      {/* =======================================* Total Percentage End *======================================= */}\n    </SimpleDialog>\n  )\n}\n\nexport default ImportFromYoutubeUrls\n","import React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\nimport { ThemeProvider } from \"@material-ui/core/styles\"\nimport \"./theme.css\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  container: {\n    fontFamily: '\"Inter\", sans-serif',\n  },\n})\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: colors.blue,\n    secondary: colors.blue,\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", sans-serif',\n    button: {\n      textTransform: \"none\",\n    },\n  },\n})\n\nexport default ({ children }: any) => {\n  const classes = useStyles()\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.container}>{children}</div>\n    </ThemeProvider>\n  )\n}\n","import posthog from \"posthog-js\"\nimport useElectron from \"./use-electron\"\n\nwindow.posthogInitialized = false\nexport default () => {\n  const isDesktop = Boolean(useElectron())\n  if (!window.posthogInitialized) {\n    posthog.init(\"dSrx1PbFd02XsxlLd7qNbeTxKZwwao2sclVmapyYlT4\", {\n      api_host: \"https://posthog.universaldatatool.com\",\n      autocapture: false,\n    })\n    const domain = isDesktop ? \"desktop\" : window.location.origin\n    posthog.capture(\"domain\", { domain })\n    posthog.capture(\"is_desktop\", { isDesktop: isDesktop })\n    posthog.people.set({ is_desktop: isDesktop, domain })\n    window.posthogInitialized = true\n  }\n  return posthog\n}\n","// @flow\n\nimport React, { useState, useMemo, useRef, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { createPortal } from \"react-dom\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport PeopleIcon from \"@material-ui/icons/People\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport usePosthog from \"../../utils/use-posthog\"\n\nconst Container = styled(\"div\")({ position: \"relative\", marginLeft: 8 })\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\",\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 10,\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12,\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10,\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800],\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800],\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\",\n  },\n})\n\nconst CreateNewButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  color: colors.blue[500],\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n  },\n})\nconst ExitButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n    color: colors.red[500],\n  },\n})\n\nexport default ({\n  fileOpen = false,\n  inSession = false,\n  onJoinSession,\n  onCreateSession,\n  onLeaveSession,\n  sessionBoxOpen,\n  changeSessionBoxOpen,\n}) => {\n  const [loadingSession, changeLoadingSession] = useState(false)\n  const [sessionUrl, changeSessionUrl] = useState(\"\")\n  const [userName, changeUserName] = useLocalStorage(\"userName\", \"anonymous\")\n  const posthog = usePosthog()\n\n  useEffect(() => {\n    if (loadingSession) {\n      setTimeout(() => {\n        changeLoadingSession(false)\n      }, 10000)\n    }\n  }, [loadingSession])\n\n  return (\n    <Container\n      onMouseEnter={() => changeSessionBoxOpen(true)}\n      onMouseLeave={() => changeSessionBoxOpen(false)}\n    >\n      <IconButton style={{ color: inSession ? colors.blue[500] : undefined }}>\n        <PeopleIcon />\n      </IconButton>\n      <PopupBox className={sessionBoxOpen ? \"\" : \"hidden\"}>\n        <h1>Collaborate</h1>\n        {!inSession ? (\n          <>\n            <h2>Join a Session</h2>\n            <TextField\n              variant=\"outlined\"\n              label=\"URL to Session\"\n              value={sessionUrl}\n              onChange={(e) => changeSessionUrl(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      color=\"primary\"\n                      onClick={() => {\n                        posthog.capture(\"join_collaborative_session\")\n                        onJoinSession(sessionUrl)\n                      }}\n                      disabled={!sessionUrl}\n                    >\n                      <ArrowForwardIcon />\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <CreateNewButton\n              fullWidth\n              onClick={() => {\n                posthog.capture(\"create_collaborative_session\")\n                onCreateSession()\n                changeLoadingSession(true)\n              }}\n              disabled={!fileOpen || loadingSession}\n            >\n              {loadingSession ? (\n                <CircularProgress className=\"icon\" size={24} />\n              ) : (\n                <AddBoxTwoTone className=\"icon\" />\n              )}\n              Create New Session\n            </CreateNewButton>\n          </>\n        ) : (\n          <>\n            <TextField\n              style={{ marginTop: 12 }}\n              variant=\"outlined\"\n              label=\"User Name\"\n              value={userName}\n              onChange={(e) => changeUserName(e.target.value)}\n            />\n            <ExitButton fullWidth onClick={onLeaveSession}>\n              <ExitToAppIcon className=\"icon\" />\n              Leave Session\n            </ExitButton>\n          </>\n        )}\n      </PopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\",\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 10,\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12,\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10,\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800],\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800],\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\",\n  },\n})\n\nexport default ({ open, children }) => {\n  return <PopupBox className={open ? \"\" : \"hidden\"}>{children}</PopupBox>\n}\n","// @flow\n\nimport React, { useState, useMemo, useRef, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { createPortal } from \"react-dom\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport HeaderPopupBox from \"../HeaderPopupBox\"\n\nconst Container = styled(\"div\")({ position: \"relative\" })\n\nconst StyledButton = styled(Button)({\n  justifyContent: \"flex-start\",\n  \"& .fakeicon\": {\n    display: \"inline\",\n    marginRight: 8,\n    padding: 4,\n    paddingTop: 5,\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: \"#fff\",\n    backgroundColor: colors.grey[700],\n    borderRadius: 4,\n    width: 36,\n    \"&.blue\": {\n      backgroundColor: colors.blue[700],\n    },\n    \"&.green\": {\n      backgroundColor: colors.green[700],\n    },\n  },\n})\n\nexport default ({ onDownload }) => {\n  const [open, changeOpen] = useState(false)\n\n  return (\n    <Container\n      onMouseEnter={() => changeOpen(true)}\n      onMouseLeave={() => changeOpen(false)}\n    >\n      <IconButton>\n        <DownloadIcon />\n      </IconButton>\n      <HeaderPopupBox open={open}>\n        <h1>Download</h1>\n        <StyledButton fullWidth onClick={() => onDownload(\"csv\")}>\n          <div className=\"fakeicon green\">CSV</div>\n          Download CSV\n        </StyledButton>\n        <StyledButton fullWidth onClick={() => onDownload(\"json\")}>\n          <div className=\"fakeicon blue\">JSON</div>\n          Download JSON\n        </StyledButton>\n      </HeaderPopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nfunction GitHub(props: Object) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\n    </SvgIcon>\n  )\n}\n\nexport default GitHub\n","// @flow weak\n\nimport seed from \"seed-random\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst fadedGrey = {\n  \"600\": colors.grey[400],\n  \"500\": colors.grey[300],\n  \"400\": colors.grey[200],\n  \"300\": colors.grey[100],\n  isFaded: true,\n}\n\nconst availableColors = [\n  colors.blue,\n  colors.deepOrange,\n  colors.green,\n  colors.purple,\n  colors.pink,\n  colors.cyan,\n  colors.orange,\n  colors.indigo,\n]\n\nconst colorMap = {\n  ...colors,\n  complete: colors.blue,\n  incomplete: fadedGrey,\n  faded: fadedGrey,\n  review: colors.deepOrange,\n}\n\nexport default (brush) => {\n  return (\n    colorMap[brush] || availableColors[seed(brush) * availableColors.length]\n  )\n}\n","// @flow\n\nimport React, { useState, useMemo, useRef, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { createPortal } from \"react-dom\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport BrushIcon from \"@material-ui/icons/Brush\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport HeaderPopupBox from \"../HeaderPopupBox\"\nimport useEventCallback from \"use-event-callback\"\nimport memoize from \"lodash/memoize\"\nimport getBrushColorPalette from \"../../utils/get-brush-color-palette.js\"\n\nconst Container = styled(\"div\")({ position: \"relative\" })\nconst BrushCircle = styled(\"div\")(({ color }) => ({\n  display: \"inline\",\n  marginRight: 8,\n  backgroundColor: color[700],\n  width: 24,\n  height: 24,\n  borderRadius: 20,\n}))\n\nconst OtherColorContainers = styled(\"div\")({\n  paddingTop: 10,\n  padding: 4,\n  display: \"flex\",\n  flexWrap: \"wrap\",\n})\n\nconst StyledIconButton = styled(IconButton)(({ iconColor, selected }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  backgroundColor: iconColor[700],\n  border: selected ? `4px solid ${iconColor[\"A200\"]}` : \"4px solid #fff\",\n  boxSizing: \"content-box\",\n  margin: 4,\n  transition: \"transform 200ms linear\",\n  \"&:hover\": {\n    backgroundColor: iconColor[800],\n    transform: \"scale(1.2,1.2)\",\n  },\n  \"&:active\": {\n    transition: \"transform 100ms linear\",\n    transform: \"scale(1.4,1.4)\",\n  },\n}))\n\nconst StyledButton = styled(Button)(({ selected, iconColor }) => ({\n  justifyContent: \"flex-start\",\n  marginTop: 4,\n  marginBottom: 4,\n  paddingTop: 8,\n  paddingBottom: 8,\n  backgroundColor: selected ? iconColor[50] : \"#fff\",\n  border: selected ? `2px solid ${iconColor[200]}` : \"2px solid #fff\",\n  \"&:hover\": {\n    backgroundColor: selected ? iconColor[100] : \"none\",\n  },\n}))\n\nexport default ({ selectedBrush, onChangeSelectedBrush }) => {\n  const [open, changeOpen] = useState(false)\n  const handleClick = useEventCallback((color) =>\n    memoize(() => onChangeSelectedBrush(color))\n  )\n\n  return (\n    <Container\n      onMouseEnter={() => changeOpen(true)}\n      onMouseLeave={() => changeOpen(false)}\n    >\n      <IconButton>\n        <BrushIcon\n          style={{ color: getBrushColorPalette(selectedBrush)[800] }}\n        />\n      </IconButton>\n      <HeaderPopupBox open={open}>\n        <h1>Sample Brushes</h1>\n        <StyledButton\n          selected={selectedBrush === \"complete\" || selectedBrush === \"blue\"}\n          iconColor={colors.blue}\n          fullWidth\n          onClick={handleClick(\"complete\")}\n        >\n          <BrushCircle color={colors.blue} />\n          Complete\n        </StyledButton>\n        <StyledButton\n          selected={\n            selectedBrush === \"review\" || selectedBrush === \"deepOrange\"\n          }\n          iconColor={colors.deepOrange}\n          fullWidth\n          onClick={handleClick(\"review\")}\n        >\n          <BrushCircle color={colors.deepOrange} />\n          Review\n        </StyledButton>\n        <OtherColorContainers>\n          <StyledIconButton\n            onClick={handleClick(\"green\")}\n            selected={selectedBrush === \"green\"}\n            iconColor={colors.green}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"purple\")}\n            selected={selectedBrush === \"purple\"}\n            iconColor={colors.purple}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"pink\")}\n            selected={selectedBrush === \"pink\"}\n            iconColor={colors.pink}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"cyan\")}\n            selected={selectedBrush === \"cyan\"}\n            iconColor={colors.cyan}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"orange\")}\n            selected={selectedBrush === \"orange\"}\n            iconColor={colors.orange}\n          />\n          <StyledIconButton\n            onClick={handleClick(\"indigo\")}\n            selected={selectedBrush === \"indigo\"}\n            iconColor={colors.indigo}\n          />\n        </OtherColorContainers>\n      </HeaderPopupBox>\n    </Container>\n  )\n}\n","// @flow weak\n\nimport React, { memo } from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport CodeIcon from \"@material-ui/icons/Code\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport StorageIcon from \"@material-ui/icons/Storage\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport CollaborateButton from \"../CollaborateButton\"\nimport DownloadButton from \"../DownloadButton\"\nimport Button from \"@material-ui/core/Button\"\nimport GithubIcon from \"../Header/GithubIcon\"\nimport * as colors from \"@material-ui/core/colors\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport packageJSON from \"../../../package.json\"\nimport BrushButton from \"../BrushButton\"\n\nconst useStyles = makeStyles((theme) => ({\n  headerButton: {\n    marginLeft: 16,\n    color: \"#888\",\n  },\n  grow: { flexGrow: 1 },\n  list: {\n    width: 300,\n  },\n  tab: {\n    color: \"#000\",\n    \"& .icon\": {},\n  },\n  fullHeightTab: {\n    ...theme.mixins.toolbar,\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: 20,\n    },\n  },\n  tabWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    textTransform: \"none\",\n    color: \"#000\",\n    \"&&& svg\": {\n      marginBottom: 0,\n      marginRight: 8,\n      width: 18,\n      height: 18,\n    },\n  },\n}))\n\nconst getIcon = (t: string) => {\n  switch (t) {\n    case \"Settings\":\n      return <SettingsIcon className=\"icon\" />\n    case \"Label\":\n      return <BorderColorIcon className=\"icon\" />\n    case \"Samples\":\n      return <StorageIcon className=\"icon\" />\n  }\n}\n\nconst HeaderToolbar = ({\n  tabs,\n  currentTab,\n  onChangeTab,\n  additionalButtons,\n  onOpenDrawer,\n  title = \"Universal Data Tool\",\n  isDesktop,\n  fileOpen,\n  sessionBoxOpen,\n  changeSessionBoxOpen,\n  inSession,\n  onCreateSession,\n  onLeaveSession,\n  onJoinSession,\n  onDownload,\n  selectedBrush,\n  onChangeSelectedBrush,\n  isSmall,\n}) => {\n  const c = useStyles()\n  return (\n    <AppBar color=\"white\" position=\"static\">\n      <Toolbar variant=\"dense\">\n        {!isDesktop && (\n          <IconButton onClick={onOpenDrawer} className={c.headerButton}>\n            <MenuIcon />\n          </IconButton>\n        )}\n        {fileOpen ? title : \"Universal Data Tool v\" + packageJSON.version}\n        {!isDesktop && (\n          <CollaborateButton\n            sessionBoxOpen={sessionBoxOpen}\n            changeSessionBoxOpen={changeSessionBoxOpen}\n            fileOpen={fileOpen}\n            inSession={inSession}\n            onCreateSession={onCreateSession}\n            onLeaveSession={onLeaveSession}\n            onJoinSession={onJoinSession}\n          />\n        )}\n        {fileOpen && (\n          <BrushButton\n            selectedBrush={selectedBrush}\n            onChangeSelectedBrush={onChangeSelectedBrush}\n          />\n        )}\n        {!isDesktop && fileOpen && <DownloadButton onDownload={onDownload} />}\n        <div className={c.grow} />\n        {additionalButtons}\n        {tabs.length > 0 && (\n          <Tabs\n            onChange={(e, newTab) => onChangeTab(newTab.toLowerCase())}\n            value={currentTab}\n          >\n            {tabs.map((t) => (\n              <Tab\n                key={t}\n                classes={{ root: c.fullHeightTab, wrapper: c.tabWrapper }}\n                className={c.tab}\n                icon={getIcon(t)}\n                label={isSmall ? \"\" : t}\n                value={t.toLowerCase()}\n              />\n            ))}\n          </Tabs>\n        )}\n        {!isSmall && (\n          <IconButton\n            href=\"https://github.com/openhumanannotation/universal-data-tool\"\n            className={c.headerButton}\n          >\n            <GithubIcon />\n          </IconButton>\n        )}\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default memo(HeaderToolbar)\n","// @flow\n\nimport ImageSearch from \"@material-ui/icons/ImageSearch\"\nimport Image from \"@material-ui/icons/Image\"\nimport CropFree from \"@material-ui/icons/CropFree\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Category from \"@material-ui/icons/Category\"\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport ContactSupport from \"@material-ui/icons/ContactSupport\"\n\nexport default [\n  {\n    name: \"Empty\",\n    Icon: CropFree,\n    oha: {\n      interface: {},\n      taskData: [],\n    },\n  },\n  {\n    name: \"Image Segmentation\",\n    Icon: ImageSearch,\n    oha: {\n      interface: {\n        type: \"image_segmentation\",\n        availableLabels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\n          \"bounding-box\",\n          \"polygon\",\n          // \"full-segmentation\",\n          \"point\",\n          // \"pixel-mask\"\n        ],\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Image Classification\",\n    Icon: Image,\n    oha: {\n      interface: {\n        type: \"image_classification\",\n        availableLabels: [\"valid\", \"invalid\"],\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Video Segmentation\",\n    Icon: OndemandVideoIcon,\n    oha: {\n      interface: {\n        type: \"video_segmentation\",\n        availableLabels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\"bounding-box\", \"polygon\", \"point\"],\n      },\n      taskData: [\n        {\n          videoUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/SampleVideo_1280x720_1mb.mp4\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Data Entry\",\n    Icon: Edit,\n    oha: {\n      interface: {\n        type: \"data_entry\",\n        description: \"# Markdown description here\",\n        surveyjs: {\n          questions: [\n            {\n              type: \"text\",\n              name: \"document_title\",\n              title: \"Title of Document\",\n            },\n          ],\n        },\n      },\n      taskData: [\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1906.01969.pdf\",\n        },\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1908.07069.pdf\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Named Entity Recognition\",\n    Icon: TextFormat,\n    oha: {\n      interface: {\n        type: \"text_entity_recognition\",\n        overlapAllowed: false,\n        labels: [\n          {\n            id: \"food\",\n            displayName: \"Food\",\n            description: \"Edible item.\",\n          },\n          {\n            id: \"hat\",\n            displayName: \"Hat\",\n            description: \"Something worn on the head.\",\n          },\n        ],\n      },\n      taskData: [\n        {\n          document:\n            \"This strainer makes a great hat, I'll wear it while I serve spaghetti!\",\n        },\n        {\n          document: \"Why are all these dumpings covered in butter?!\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Text Classification\",\n    Icon: ContactSupport,\n    oha: {\n      interface: {\n        type: \"text_classification\",\n        labels: [\"positive_sentiment\", \"negative_sentiment\"],\n      },\n      taskData: [\n        {\n          document: \"Wow this is terrible. I hated it.\",\n        },\n        {\n          document: \"This has made me so happy. I love this.\",\n        },\n        {\n          document:\n            \"At first I wasn't sure. Then I thought, oh it's not very good.\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Audio Transcription\",\n    Icon: Audiotrack,\n    oha: {\n      interface: {\n        type: \"audio_transcription\",\n        description: \"# Markdown description here\",\n      },\n      taskData: [\n        {\n          audioUrl: \"https://html5tutorial.info/media/vincent.mp3\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"Composite\",\n    Icon: Category,\n    oha: {\n      description: \"# Markdown description here\",\n      interface: {\n        type: \"composite\",\n        fields: [\n          {\n            fieldName: \"textInfo\",\n            interface: {\n              type: \"data_entry\",\n              surveyjs: {\n                questions: [\n                  {\n                    type: \"text\",\n                    name: \"group_letter\",\n                    title: \"Letter of Group\",\n                  },\n                ],\n              },\n            },\n          },\n          {\n            fieldName: \"segmentation\",\n            interface: {\n              type: \"image_segmentation\",\n              availableLabels: [\"group text\"],\n              regionTypesAllowed: [\"bounding-box\"],\n            },\n          },\n        ],\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\n        },\n      ],\n    },\n  },\n  {\n    name: \"3D Bounding Box\",\n    Icon: ThreeDRotation,\n    oha: {\n      interface: {\n        type: \"3d_bounding_box\",\n        description: \"3D Bounding Box\",\n      },\n    },\n  },\n]\n","//@flow weak\n\nimport React, { useCallback, useState } from \"react\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport { useDropzone } from \"react-dropzone\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport { GoMarkGithub } from \"react-icons/go\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport HomeIcon from \"@material-ui/icons/Home\"\nimport { IconContext } from \"react-icons\"\nimport { FaTrashAlt } from \"react-icons/fa\"\nimport templates from \"../StartingPage/templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport NoteAddIcon from \"@material-ui/icons/NoteAdd\"\n\nconst useStyles = makeStyles({})\n\nexport default ({\n  recentItems,\n  changeRecentItems,\n  onClickHome,\n  onCloseDrawer,\n  drawerOpen,\n  onOpenFile,\n  onOpenRecentItem,\n  onClickTemplate,\n}) => {\n  const c = useStyles()\n  let classTrashCan = \"\"\n\n  const onDrop = useCallback((acceptedFiles) => {\n    onOpenFile(acceptedFiles[0])\n  }, [])\n\n  function onDeleteFile(i) {\n    changeRecentItems(\n      recentItems.filter((oneRecentFile) => oneRecentFile.id !== i)\n    )\n  }\n\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n  return (\n    <Drawer open={drawerOpen} onClose={onCloseDrawer}>\n      <List className={c.list}>\n        <ListItem onClick={onClickHome} button>\n          <ListItemIcon>\n            <HomeIcon />\n          </ListItemIcon>\n          <ListItemText>Home</ListItemText>\n        </ListItem>\n        <ListItem {...getRootProps()} button>\n          <ListItemIcon>\n            <NoteAddIcon />\n          </ListItemIcon>\n          <ListItemText>Open File</ListItemText>\n          <input {...getInputProps()} />\n        </ListItem>\n        <ListSubheader>Recent Files</ListSubheader>\n        {recentItems.length === 0 ? (\n          <ListItem>\n            <ListItemText\n              style={{ textAlign: \"center\", color: colors.grey[500] }}\n            >\n              No Recent Items\n            </ListItemText>\n          </ListItem>\n        ) : (\n          recentItems.map((ri, index) => (\n            <ListItem key={ri.fileName} button>\n              <ListItemIcon\n                onClick={() => {\n                  onOpenRecentItem(ri)\n                }}\n              >\n                <FileIcon />\n              </ListItemIcon>\n              <ListItemText\n                onClick={() => {\n                  onOpenRecentItem(ri)\n                }}\n              >\n                {ri.fileName}\n              </ListItemText>\n              <ListItemIcon\n                onClick={() => {\n                  onDeleteFile(ri.id)\n                }}\n              >\n                <FaTrashAlt />\n              </ListItemIcon>\n            </ListItem>\n          ))\n        )}\n        <ListSubheader>Create From Template</ListSubheader>\n        {templates.map((template) => (\n          <ListItem\n            key={template.name}\n            onClick={() => onClickTemplate(template)}\n          >\n            <ListItemIcon>\n              <template.Icon />\n            </ListItemIcon>\n            <ListItemText>{template.name}</ListItemText>\n          </ListItem>\n        ))}\n        <ListSubheader>Explore More</ListSubheader>\n        {/* <ListItem button>\n      <ListItemIcon>\n        <CodeIcon />\n      </ListItemIcon>\n      <ListItemText>Integrate</ListItemText>\n    </ListItem> */}\n        <ListItem\n          button\n          onClick={() => {\n            window.location.href =\n              \"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n          }}\n        >\n          <ListItemIcon>\n            <GoMarkGithub />\n          </ListItemIcon>\n          <ListItemText>Github</ListItemText>\n        </ListItem>\n      </List>\n    </Drawer>\n  )\n}\n","// @flow weak\n\nimport React, { useState, createContext, useContext, useCallback } from \"react\"\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"\n\nimport HeaderToolbar from \"../HeaderToolbar\"\nimport HeaderDrawer from \"../HeaderDrawer\"\n\nexport const HeaderContext = createContext({\n  recentItems: [],\n  changeRecentItems: () => null,\n  onClickTemplate: () => null,\n  onClickHome: () => null,\n  onOpenFile: () => null,\n  onOpenRecentItem: () => null,\n  isDesktop: false,\n  inSession: false,\n  onJoinSession: () => null,\n  onCreateSession: () => null,\n  onLeaveSession: () => null,\n  sessionBoxOpen: false,\n  changeSessionBoxOpen: () => null,\n  fileOpen: false,\n  onDownload: () => null,\n})\n\nconst emptyArray = []\n\nexport default ({\n  additionalButtons = emptyArray,\n  title,\n  currentTab,\n  onChangeTab,\n  tabs = emptyArray,\n}) => {\n  const [drawerOpen, changeDrawerOpen] = useState(false)\n  let headerContext = useContext(HeaderContext)\n  if (!headerContext.recentItems) headerContext.recentItems = []\n\n  const isSmall = useMediaQuery(\"(max-width: 800px)\")\n\n  const onOpenDrawer = useCallback(() => changeDrawerOpen(true), [])\n  const onCloseDrawer = useCallback(() => changeDrawerOpen(false), [])\n\n  return (\n    <>\n      <HeaderToolbar\n        tabs={tabs}\n        currentTab={currentTab}\n        onChangeTab={onChangeTab}\n        additionalButtons={additionalButtons}\n        onOpenDrawer={onOpenDrawer}\n        isSmall={isSmall}\n        {...headerContext}\n        title={title}\n      />\n      <HeaderDrawer\n        drawerOpen={drawerOpen}\n        onCloseDrawer={onCloseDrawer}\n        onClickHome={headerContext.onClickHome}\n        recentItems={headerContext.recentItems}\n        changeRecentItems={headerContext.changeRecentItems}\n        onOpenFile={headerContext.onOpenFile}\n        onClickTemplate={headerContext.onClickTemplate}\n        onOpenRecentItem={headerContext.onOpenRecentItem}\n      />\n    </>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport templates from \"../StartingPage/templates\"\nimport { grey } from \"@material-ui/core/colors\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nconst useStyles = makeStyles({\n  bigButton: {\n    padding: 10,\n    width: 150,\n    height: 120,\n    border: \"1px solid #ccc\",\n    margin: 10,\n  },\n  bigIcon: {\n    width: 48,\n    height: 48,\n  },\n})\n\nexport default ({ open, onClose, onSelect }) => {\n  const c = useStyles()\n  return (\n    <SimpleDialog title=\"Create from Template\" open={open} onClose={onClose}>\n      {templates.map((template) => (\n        <Button\n          key={template.name}\n          onClick={() => onSelect(template)}\n          className={c.bigButton}\n        >\n          <div>\n            <div>{template.name}</div>\n            <div>\n              <template.Icon className={c.bigIcon} />\n            </div>\n          </div>\n        </Button>\n      ))}\n    </SimpleDialog>\n  )\n}\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return Boolean(window.require(\"electron\"))\n  }\n  return false\n}\n","// @flow\n\nimport React, { useState, useMemo, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Header from \"../Header\"\nimport Button from \"@material-ui/core/Button\"\nimport Typography from \"@material-ui/core/Typography\"\nimport templates from \"./templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport VideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport TemplateIcon from \"@material-ui/icons/Description\"\nimport { useDropzone } from \"react-dropzone\"\nimport CreateFromTemplateDialog from \"../CreateFromTemplateDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport packageInfo from \"../../../package.json\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles({\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: colors.grey[900],\n    height: \"100vh\",\n  },\n})\n\nconst ContentContainer = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  flexGrow: 1,\n  color: \"#fff\",\n  overflowY: \"scroll\",\n  padding: 100,\n  [theme.breakpoints.down(\"sm\")]: {\n    padding: 50,\n  },\n}))\nconst Content = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"calc(100% - 32px)\",\n  marginLeft: 16,\n  maxWidth: 1000,\n}))\n\nconst Title = styled(\"div\")({\n  marginTop: 20,\n  fontSize: 36,\n  fontWeight: 600,\n  color: colors.grey[300],\n})\n\nconst Subtitle = styled(\"div\")({\n  fontSize: 18,\n  // fontWeight: \"bold\",\n  marginTop: 8,\n  color: colors.grey[500],\n})\nconst ActionList = styled(\"div\")({ marginTop: 48 })\nconst Action = styled(\"a\")({\n  display: \"block\",\n  color: colors.blue[500],\n  marginTop: 4,\n  cursor: \"pointer\",\n  textDecoration: \"none\",\n})\nconst ActionTitle = styled(\"div\")({\n  // fontWeight: \"bold\",\n  fontSize: 24,\n  marginBottom: 8,\n  color: colors.grey[500],\n})\nconst ActionText = styled(\"div\")({\n  color: colors.grey[300],\n  \"& a\": {\n    cursor: \"pointer\",\n    color: colors.blue[500],\n    textDecoration: \"none\",\n  },\n})\nconst Actionless = styled(\"div\")({\n  color: colors.grey[600],\n  paddingTop: 16,\n})\nconst BottomSpacer = styled(\"div\")({ height: 100 })\n\nexport default ({\n  onFileDrop,\n  onOpenTemplate,\n  showDownloadLink = true,\n  recentItems = [],\n  onOpenRecentItem,\n  onClickOpenSession,\n}) => {\n  const c = useStyles()\n  const posthog = usePosthog()\n\n  const isDesktop = useIsDesktop()\n  const [newVersionAvailable, changeNewVersionAvailable] = useState(false)\n  useEffect(() => {\n    // if (!isDesktop) return\n    async function checkNewVersion() {\n      const newPackage = await fetch(\n        \"https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/package.json\"\n      ).then((r) => r.json())\n      if (newPackage.version !== packageInfo.version) {\n        changeNewVersionAvailable(newPackage.version)\n      }\n    }\n    checkNewVersion()\n  }, [])\n\n  const [\n    createFromTemplateDialogOpen,\n    changeCreateFromTemplateDialogOpen,\n  ] = useState(false)\n  const onDrop = useEventCallback((acceptedFiles) => {\n    onFileDrop(acceptedFiles[0])\n  })\n\n  let { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  return (\n    <div className={c.container}>\n      <CreateFromTemplateDialog\n        open={createFromTemplateDialogOpen}\n        onSelect={(template) => {\n          posthog.capture(\"template_clicked\", {\n            clicked_template: template.name,\n          })\n          onOpenTemplate(template)\n        }}\n        onClose={() => changeCreateFromTemplateDialogOpen(false)}\n      />\n      <Header\n        additionalButtons={[\n          newVersionAvailable && (\n            <Button\n              key=\"download-latest\"\n              className={c.headerButton}\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n            >\n              Download Version v{newVersionAvailable}\n            </Button>\n          ),\n          !newVersionAvailable && showDownloadLink && (\n            <Button\n              key=\"download\"\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n              className={c.headerButton}\n            >\n              Download\n            </Button>\n          ),\n        ].filter(Boolean)}\n      />\n      <ContentContainer>\n        <Content>\n          <Grid container>\n            <Grid xs={12} item>\n              <Title>Universal Data Tool</Title>\n              <Subtitle>Open-Source Data Labeling</Subtitle>\n            </Grid>\n            <Grid xs={6} item>\n              <ActionList>\n                <ActionTitle>Start</ActionTitle>\n                <Action\n                  onClick={() => {\n                    posthog.capture(\"template_clicked\", {\n                      clicked_template: \"empty\",\n                    })\n                    onOpenTemplate(templates.find((t) => t.name === \"Empty\"))\n                  }}\n                >\n                  New File\n                </Action>\n                <Action\n                  onClick={() => changeCreateFromTemplateDialogOpen(true)}\n                >\n                  Start from Template\n                </Action>\n                <Action {...getRootProps()}>\n                  <input {...getInputProps()} />\n                  Open File\n                </Action>\n                {onClickOpenSession && (\n                  <Action onClick={onClickOpenSession}>\n                    Open Collaborative Session\n                  </Action>\n                )}\n                {/* <Action>Open Folder</Action> */}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Recent</ActionTitle>\n                {recentItems.length === 0 ? (\n                  <Actionless>No Recent Files</Actionless>\n                ) : (\n                  recentItems.map((ri, i) => (\n                    <Action key={i} onClick={() => onOpenRecentItem(ri)}>\n                      {ri.fileName}\n                    </Action>\n                  ))\n                )}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Help</ActionTitle>\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool/releases\">\n                  Downloading and Installing UDT\n                </Action>\n                <Action href=\"https://dev.to/seveibar/make-bounding-boxes-for-artificial-intelligence-with-udt-1kai\">\n                  Labeling Images\n                </Action>\n                {/* <Action>Custom Data Entry</Action> */}\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool\">\n                  Github Repository\n                </Action>\n                {/* <Action href=\"#\">\n                  How to Collaborate in Real-Time with UDT\n                </Action> */}\n              </ActionList>\n            </Grid>\n            <Grid xs={6} item>\n              <ActionList>\n                <ActionTitle>About</ActionTitle>\n                <ActionText>\n                  The Universal Data Tool (UDT) is an open-source web or\n                  downloadable tool for labeling data for usage in machine\n                  learning or data processing systems.\n                  <br />\n                  <br />\n                  The Universal Data Tool supports Computer Vision, Natural\n                  Language Processing (including Named Entity Recognition and\n                  Audio Transcription) workflows.\n                  <br />\n                  <br />\n                  The UDT uses an{\" \"}\n                  <a href=\"https://github.com/UniversalDataTool/udt-format\">\n                    open-source data format (.udt.json / .udt.csv)\n                  </a>{\" \"}\n                  that can be easily read by programs as a ground-truth dataset\n                  for machine learning algorithms.\n                  <br />\n                  <br />\n                </ActionText>\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Instant Try Now</ActionTitle>\n                <ActionText>\n                  <a onClick={() => changeCreateFromTemplateDialogOpen(true)}>\n                    Open a template\n                  </a>{\" \"}\n                  to see how the UDT could work for your data.\n                </ActionText>\n              </ActionList>\n            </Grid>\n            <Grid xs={12} item>\n              <BottomSpacer />\n            </Grid>\n          </Grid>\n        </Content>\n      </ContentContainer>\n    </div>\n  )\n}\n","export default `\n{\n  \"interface\": {\n    \"type\": \"data_entry\",\n    \"description\": \"# Markdown description here\",\n    \"surveyjs\": {\n      \"questions\": [\n        {\n          \"type\": \"text\",\n          \"name\": \"question1\",\n          \"title\": \"Some question title here\"\n        }\n      ]\n    }\n  },\n  \"taskData\": []\n}\n`.trim()\n","export default function getTaskDescription(taskDataItem) {\n  const { description, imageUrl, url, pdfUrl } = taskDataItem\n  if (description) return description\n  if (imageUrl) return `![${imageUrl}](${imageUrl})`\n  if (pdfUrl)\n    return (\n      `[PDF Link](${pdfUrl})` +\n      `<object data=\"${pdfUrl.replace(\n        \"http://\",\n        \"https://\"\n      )}\" type=\"application/pdf\" width=\"100%\" height=\"600px\"></object>`\n    )\n  if (url) return `Use this [Link](${url})`\n  return null\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  linkButtonContainer: {\n    marginLeft: 8,\n    marginRight: 8,\n  },\n  linkButton: {\n    textTransform: \"none\",\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n  },\n})\n\nexport default ({ onClick, text }: { onClick: Function, text: string }) => {\n  const c = useStyles()\n  return (\n    <span className={c.linkButtonContainer}>\n      (\n      <span onClick={onClick} className={c.linkButton}>\n        {text}\n      </span>\n      )\n    </span>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport { makeStyles } from \"@material-ui/core\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Button from \"@material-ui/core/Button\"\nimport ReactMarkdown from \"react-markdown\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport ScatterPlotIcon from \"@material-ui/icons/ScatterPlot\"\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport LeftIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport InnerCircleIcon from \"@material-ui/icons/RadioButtonChecked\"\nimport CircleIcon from \"@material-ui/icons/RadioButtonUnchecked\"\nimport CheckCircle from \"@material-ui/icons/CheckCircle\"\nimport Typography from \"@material-ui/core/Typography\"\nimport GithubIcon from \"../Header/GithubIcon.js\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport Divider from \"@material-ui/core/Divider\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport LinkButton from \"./LinkButton\"\nimport range from \"lodash/range\"\n\nconst useStyles = makeStyles((theme) => ({\n  footer: {\n    backgroundColor: \"#fff\",\n    marginTop: 40,\n  },\n  footerContent: {\n    alignItems: \"center\",\n    padding: 20,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  footerBorder: {\n    borderTop: \"1px solid #ccc\",\n    marginLeft: 20,\n    marginRight: 20,\n  },\n  footerCount: {\n    display: \"inline-flex\",\n  },\n  allSamplesButton: {\n    color: \"#fff\",\n    border: \"1px solid rgba(255,255,255,0.5)\",\n    marginRight: 10,\n    paddingLeft: 8,\n  },\n  sampleIcon: {\n    marginRight: 8,\n  },\n  menuButton: {\n    marginRight: 8,\n    color: \"#fff\",\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  buttons: {\n    \"& > *\": {\n      margin: 4,\n    },\n  },\n  description: {\n    padding: 10,\n    \"& img\": {\n      maxWidth: \"calc(100% - 16px)\",\n      marginLeft: 8,\n      marginRight: 8,\n      maxHeight: 600,\n    },\n  },\n  sectionHeader: {\n    fontWeight: 700,\n    fontSize: 12,\n    padding: 10,\n    paddingTop: 16,\n    textTransform: \"uppercase\",\n    color: colors.grey[600],\n  },\n  content: {\n    padding: 10,\n    // minHeight: \"calc(100vh - 200px)\"\n  },\n}))\n\nexport const SampleContainer = ({\n  hideDescription: defaultHideDescription = false,\n  lastSampleExitText,\n  onExit,\n  requireCompleteToPressNext = false,\n  taskData,\n  minContentHeight,\n  currentSampleIndex,\n  totalSamples,\n  onChangeSample,\n  taskOutput = [],\n  description,\n  children,\n}) => {\n  const c = useStyles()\n  const [hideDescription, changeHideDescription] = useState(\n    defaultHideDescription\n  )\n  const [sampleDrawerOpen, changeSampleDrawerOpen] = useState(false)\n  return (\n    <>\n      <Grid container>\n        {!hideDescription && (\n          <Grid item xs={12} sm={12} md={6}>\n            <div className={c.sectionHeader}>\n              Description\n              <LinkButton\n                onClick={() => changeHideDescription(true)}\n                text=\"hide\"\n              />\n            </div>\n            <div className={c.description}>\n              <ReactMarkdown escapeHtml={false} source={description} />\n            </div>\n          </Grid>\n        )}\n        <Grid item xs={12} sm={12} md={hideDescription ? 12 : 6}>\n          <div className={c.sectionHeader}>\n            Sample {currentSampleIndex + 1}/{totalSamples}\n            {hideDescription && (\n              <LinkButton\n                onClick={() => changeHideDescription(false)}\n                text=\"show description\"\n              />\n            )}\n            {totalSamples > 1 && (\n              <LinkButton\n                onClick={() => changeSampleDrawerOpen(true)}\n                text=\"view all\"\n              />\n            )}\n            {onExit && (\n              <LinkButton onClick={() => onExit()} text=\"exit without saving\" />\n            )}\n          </div>\n          <div style={{ minHeight: minContentHeight }} className={c.content}>\n            {children}\n          </div>\n        </Grid>\n        {totalSamples > 1 && (\n          <Grid item xs={12}>\n            <div className={c.footer}>\n              <div className={c.footerBorder} />\n              <div className={c.footerContent}>\n                <Button\n                  onClick={() =>\n                    onChangeSample(\n                      (currentSampleIndex - 1 + totalSamples) % totalSamples\n                    )\n                  }\n                >\n                  <LeftIcon /> Prev Sample\n                </Button>\n                <Button\n                  onClick={() => changeSampleDrawerOpen(true)}\n                  className={c.footerCount}\n                >\n                  {currentSampleIndex + 1} / {totalSamples}\n                </Button>\n                <Button\n                  disabled={\n                    requireCompleteToPressNext &&\n                    !taskOutput[currentSampleIndex]\n                  }\n                  onClick={() =>\n                    onChangeSample((currentSampleIndex + 1) % totalSamples)\n                  }\n                >\n                  {requireCompleteToPressNext && !taskOutput[currentSampleIndex]\n                    ? \"Save to Continue\"\n                    : \"Next Sample\"}\n                  <RightIcon />\n                </Button>\n              </div>\n            </div>\n          </Grid>\n        )}\n      </Grid>\n      <Drawer\n        open={sampleDrawerOpen}\n        anchor=\"left\"\n        onClose={() => changeSampleDrawerOpen(false)}\n      >\n        <List style={{ minWidth: 300 }}>\n          <ListSubheader>Samples</ListSubheader>\n          {range(0, totalSamples).map((i) => (\n            <ListItem\n              style={{\n                backgroundColor:\n                  i === currentSampleIndex ? colors.grey[200] : undefined,\n              }}\n              button\n              onClick={() => onChangeSample(i)}\n            >\n              <ListItemIcon\n                style={{\n                  color:\n                    i === currentSampleIndex ? colors.blue[500] : undefined,\n                }}\n              >\n                {taskOutput[i] ? <CheckCircle /> : <CircleIcon />}\n              </ListItemIcon>\n              <ListItemText>Sample {i + 1}</ListItemText>\n            </ListItem>\n          ))}\n        </List>\n      </Drawer>\n    </>\n  )\n}\n\nexport default SampleContainer\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nexport const TextClassification = (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const initialLabels =\n    props.taskOutput && props.taskOutput[currentSampleIndex]\n      ? [props.taskOutput[currentSampleIndex].label] ||\n        props.taskOutput[currentSampleIndex].labels\n      : undefined\n  let labels = props.interface.labels\n    .map((l) =>\n      typeof l === \"string\" ? { id: l, description: l, displayName: l } : l\n    )\n    .map((l) => (!l.displayName ? { ...l, displayName: l.id } : l))\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        type=\"label-document\"\n        labels={labels}\n        multipleLabels={props.interface.multiple}\n        document={props.taskData[currentSampleIndex].document}\n        initialLabels={initialLabels}\n        onFinish={(result) => {\n          if (typeof result === \"string\") result = { label: result }\n          else result = { labels: result }\n          props.onSaveTaskOutputItem(currentSampleIndex, result)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default TextClassification\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nconst simpleSequenceToEntitySequence = (simpleSeq) => {\n  const entSeq = []\n  let charsPassed = 0\n  for (const seq of simpleSeq) {\n    if (seq.label) {\n      entSeq.push({\n        text: seq.text,\n        label: seq.label,\n        start: charsPassed,\n        end: charsPassed + seq.text.length,\n      })\n    }\n    charsPassed += seq.text.length\n  }\n  return entSeq\n}\n\nconst entitySequenceToSimpleSeq = (doc, entSeq) => {\n  if (!entSeq) return undefined\n  const simpleSeq = []\n  entSeq = [...entSeq]\n  entSeq.sort((a, b) => a.start - b.start)\n  let nextEntity = 0\n  for (let i = 0; i < doc.length; i++) {\n    if ((entSeq[nextEntity] || {}).start === i) {\n      simpleSeq.push({\n        text: entSeq[nextEntity].text,\n        label: entSeq[nextEntity].label,\n      })\n      i = entSeq[nextEntity].end\n      nextEntity += 1\n    } else {\n      if (simpleSeq.length === 0 || simpleSeq[simpleSeq.length - 1].label) {\n        simpleSeq.push({ text: doc[i] })\n      } else {\n        simpleSeq[simpleSeq.length - 1].text += doc[i]\n      }\n    }\n  }\n  return simpleSeq\n}\n\nexport const TextEntityRecognition = (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const initialSequence =\n    props.taskOutput && props.taskOutput[currentSampleIndex]\n      ? entitySequenceToSimpleSeq(\n          props.taskData[currentSampleIndex].document,\n          props.taskOutput[currentSampleIndex].entities\n        )\n      : undefined\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={currentSampleIndex}\n        type=\"label-sequence\"\n        document={props.taskData[currentSampleIndex].document}\n        labels={props.interface.labels}\n        initialSequence={initialSequence}\n        onFinish={(result) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, {\n            entities: simpleSequenceToEntitySequence(result),\n          })\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default TextEntityRecognition\n","// @flow\n\n// RIA = React Image Annotate\n\nexport function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function getRandomColor() {\n  var h = getRandomInt(0, 360)\n  var s = 100\n  var l = 50\n  return \"hsl(\"\n    .concat(h.toString(), \",\")\n    .concat(s.toString(), \"%,\")\n    .concat(l.toString(), \"%)\")\n}\n\nexport const rid = () => Math.random().toString().split(\".\")[1]\n\nexport const convertToRIARegionFmt = (region) => {\n  switch (region.regionType) {\n    case \"bounding-box\": {\n      return {\n        id: rid(),\n        cls: region.classification,\n        tags: region.labels,\n        color: region.color || getRandomColor(),\n        type: \"box\",\n        x: region.centerX - region.width / 2,\n        y: region.centerY - region.height / 2,\n        w: region.width,\n        h: region.height,\n      }\n    }\n    case \"point\": {\n      return {\n        id: rid(),\n        type: \"point\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        x: region.x,\n        y: region.y,\n      }\n    }\n    case \"polygon\": {\n      return {\n        id: rid(),\n        type: \"polygon\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        open: false,\n        points: region.points.map((p) => [p.x, p.y]),\n      }\n    }\n    case \"line\":\n    case \"pixel-mask\": {\n      throw new Error(`Unsupported region \"${JSON.stringify(region)}\"`)\n    }\n  }\n}\n\nexport const convertFromRIARegionFmt = (riaRegion) => {\n  switch (riaRegion.type) {\n    case \"point\": {\n      return {\n        regionType: \"point\",\n        x: riaRegion.x,\n        y: riaRegion.y,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n      }\n    }\n    case \"box\": {\n      return {\n        regionType: \"bounding-box\",\n        centerX: riaRegion.x + riaRegion.w / 2,\n        centerY: riaRegion.y + riaRegion.h / 2,\n        width: riaRegion.w,\n        height: riaRegion.h,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n      }\n    }\n    case \"polygon\": {\n      return {\n        regionType: \"polygon\",\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n        points: riaRegion.points.map(([x, y]) => ({ x, y })),\n      }\n    }\n  }\n  throw new Error(`Unsupported riaRegion \"${JSON.stringify(riaRegion)}\"`)\n}\n\nexport const convertToRIAImageFmt = ({\n  title,\n  taskDatum: td,\n  index: i,\n  output,\n}) => {\n  td = td || {}\n  const regions = !output\n    ? undefined\n    : Array.isArray(output)\n    ? output.map(convertToRIARegionFmt)\n    : [convertToRIARegionFmt(output)]\n\n  if (td.imageUrl) {\n    return {\n      src: td.imageUrl,\n      name: title || `Sample ${i}`,\n      regions,\n    }\n  } else if (td.videoUrl && td.videoFrameAt !== undefined) {\n    return {\n      src: td.videoUrl,\n      frameTime: td.videoFrameAt,\n      name: title || `Sample ${i}`,\n      regions,\n    }\n  }\n  throw new Error(`Task Datum not supported \"${JSON.stringify(td)}\"`)\n}\n\nexport const convertToRIAKeyframes = (keyframes) => {\n  const newKeyframes = {}\n  for (const key in keyframes) {\n    newKeyframes[key] = {\n      regions: keyframes[key].regions.map(convertToRIARegionFmt),\n    }\n  }\n  return newKeyframes\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Annotator from \"react-image-annotate\"\nimport isEqual from \"lodash/isEqual\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  rid,\n  convertFromRIARegionFmt,\n  convertToRIARegionFmt,\n  convertToRIAImageFmt,\n} from \"../../utils/ria-format.js\"\n\nconst useStyles = makeStyles({})\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: \"create-polygon\",\n  \"full-segmentation\": \"create-polygon\",\n  point: \"create-point\",\n}\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n}) => {\n  const c = useStyles()\n  const [selectedIndex, changeSelectedIndex] = useState(0)\n\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n\n  const labelProps = useMemo(\n    () =>\n      isClassification\n        ? {\n            regionClsList: (iface.availableLabels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          }\n        : {\n            regionTagList: (iface.availableLabels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          },\n    [isClassification]\n  )\n\n  const multipleRegions =\n    iface.multipleRegions || iface.multipleRegions === undefined\n\n  const onExit = useEventCallback((output) => {\n    const regionMat = (output.images || [])\n      .map((img) => img.regions)\n      .map((riaRegions) => (riaRegions || []).map(convertFromRIARegionFmt))\n\n    for (let i = 0; i < regionMat.length; i++) {\n      if (multipleRegions) {\n        onSaveTaskOutputItem(i, regionMat[i])\n      } else {\n        onSaveTaskOutputItem(i, regionMat[i][0])\n      }\n    }\n    if (containerProps.onExit) containerProps.onExit()\n  })\n\n  const images = useMemo(\n    () =>\n      taskData.map((taskDatum, index) =>\n        convertToRIAImageFmt({\n          title: containerProps.datasetName,\n          taskDatum,\n          output: taskOutput[index],\n          index,\n        })\n      ),\n    [taskData]\n  )\n\n  const enabledTools = useMemo(\n    () =>\n      [\"select\"].concat(\n        regionTypesAllowed.map((rt) => regionTypeToTool[rt]).filter(Boolean)\n      ),\n    [regionTypesAllowed]\n  )\n  console.log({\n    selectedImage: taskData[selectedIndex].imageUrl,\n    taskDescription: iface.description,\n    ...labelProps,\n    enabledTools: enabledTools,\n    images,\n    onExit,\n  })\n\n  return (\n    <div style={{ height: \"calc(100vh - 70px)\" }}>\n      <Annotator\n        selectedImage={taskData[selectedIndex].imageUrl}\n        taskDescription={iface.description}\n        {...labelProps}\n        enabledTools={enabledTools}\n        images={images}\n        onExit={onExit}\n      />\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\"\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport without from \"lodash/without\"\n\nconst brightColors = [\n  colors.blue[600],\n  colors.green[600],\n  colors.red[600],\n  colors.deepOrange[600],\n  colors.pink[600],\n  colors.teal[600],\n  colors.deepPurple[600],\n  colors.indigo[600],\n  colors.blue[600],\n  colors.cyan[600],\n  colors.purple[600],\n]\n\nconst letters = \"abcdefghijklmnopqrstuvwxyz1234567890\".split(\"\")\nconst getRandomColor = (label) => {\n  const hashInt = label.id\n    .split(\"\")\n    .reduce((acc, v, i) => acc + (letters.indexOf(v) + 1), 0)\n  return brightColors[hashInt % brightColors.length]\n}\n\nconst Container = styled(\"div\")({ maxWidth: \"100vw\" })\n\nconst ImageContainer = styled(\"div\")({\n  maxHeight: \"50vh\",\n})\n\nconst Image = styled(\"img\")({\n  display: \"inline-block\",\n  width: \"100%\",\n  height: \"100%\",\n  maxHeight: \"50vh\",\n  objectFit: \"contain\",\n})\n\nconst Nav = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"center\",\n  marginTop: 4,\n})\nconst NavItem = styled(\"div\")({\n  backgroundColor: \"#000\",\n  color: \"#fff\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  \"& > span\": {\n    padding: 16,\n  },\n})\nconst NavButton = styled(Button)({\n  color: \"#fff\",\n  padding: 8,\n  paddingLeft: 16,\n  paddingRight: 16,\n})\n\nconst ButtonsContainer = styled(\"div\")({\n  paddingLeft: 50,\n  paddingRight: 50,\n  marginTop: 8,\n  textAlign: \"center\",\n})\n\nconst CheckButton = styled(Button)({\n  margin: 8,\n  color: \"#fff\",\n  fontSize: 18,\n  paddingRight: 16,\n  transition: \"transform 50ms ease\",\n})\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  sampleIndex: globalSampleIndex,\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n}) => {\n  const [sampleIndex, changeSampleIndex] = useState(0)\n  const [enlargedLabel, changeEnlargedLabel] = useState(null)\n  const [currentOutput, changeCurrentOutput] = useState(emptyArr)\n  const labels = useMemo(\n    () =>\n      iface.availableLabels.map((l) =>\n        typeof l === \"string\" ? { id: l, description: l } : l\n      ),\n    [iface.availableLabels]\n  )\n\n  const onDone = useEventCallback((newOutput) => {\n    if (containerProps.onExit) containerProps.onExit()\n  })\n  const onNext = useEventCallback((newOutput) => {\n    onSaveTaskOutputItem(sampleIndex, newOutput || currentOutput)\n    if (sampleIndex !== taskData.length - 1) {\n      changeSampleIndex(sampleIndex + 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-next\")\n    }\n  })\n  const onPrev = useEventCallback(() => {\n    if (sampleIndex > 0) {\n      changeSampleIndex(sampleIndex - 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-previous\")\n    }\n  })\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      changeEnlargedLabel(null)\n    }, 100)\n    return () => clearTimeout(timeout)\n  }, [enlargedLabel])\n\n  const onClickLabel = useEventCallback((label) => {\n    changeEnlargedLabel(label)\n    let newOutput\n    if ((currentOutput || []).includes(label.id)) {\n      newOutput = without(currentOutput, label.id)\n    } else {\n      if (iface.allowMultiple) {\n        newOutput = currentOutput.concat([label.id])\n      } else {\n        newOutput = [label.id]\n      }\n    }\n\n    changeCurrentOutput(newOutput)\n    if (!iface.allowMultiple && newOutput.length > 0) {\n      onNext(newOutput)\n    }\n  })\n\n  useEffect(() => {\n    let newOutput = (taskOutput || [])[sampleIndex]\n    if (!newOutput) newOutput = []\n    if (typeof newOutput === \"string\") newOutput = [newOutput]\n    changeCurrentOutput(newOutput)\n  }, [sampleIndex, globalSampleIndex])\n\n  const [hotkeyMap, labelKeyMap] = useMemo(() => {\n    const hotkeyMap = {\n      \" \": onNext,\n      backspace: onPrev,\n      enter: onDone,\n      rightarrow: onNext,\n      leftarrow: onPrev,\n    }\n    const labelKeyMap = {}\n    for (let label of labels) {\n      const nextAvailableLetter = label.id\n        .split(\"\")\n        .filter((l) => letters.includes(l))\n        .find((l) => !hotkeyMap[l.toLowerCase()])\n      if (!nextAvailableLetter) continue\n      hotkeyMap[nextAvailableLetter] = () => onClickLabel(label)\n      labelKeyMap[label.id] = nextAvailableLetter\n    }\n    return [hotkeyMap, labelKeyMap]\n  }, [labels])\n\n  useEffect(() => {\n    const onKeyDown = (e) => {\n      const key = e.key.toLowerCase()\n      if (hotkeyMap[key]) {\n        hotkeyMap[key]()\n      }\n    }\n    window.addEventListener(\"keydown\", onKeyDown)\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown)\n    }\n  }, [hotkeyMap])\n\n  return (\n    <Container>\n      <ImageContainer>\n        <Image src={taskData[sampleIndex].imageUrl} />\n      </ImageContainer>\n      <Nav>\n        <NavItem>\n          <NavButton onClick={onPrev}>Prev (backspace)</NavButton>\n        </NavItem>\n        {taskData.length > 1 ? (\n          <NavItem>\n            <span>\n              ({sampleIndex + 1}/{taskData.length})\n            </span>\n          </NavItem>\n        ) : globalSampleIndex !== undefined ? (\n          <NavItem>\n            <span>[{globalSampleIndex}]</span>\n          </NavItem>\n        ) : null}\n        <NavItem>\n          <NavButton onClick={onNext}>Next (space)</NavButton>\n        </NavItem>\n        <NavItem>\n          <NavButton onClick={onDone}>Done (enter)</NavButton>\n        </NavItem>\n      </Nav>\n      <ButtonsContainer>\n        {labels.map((label) => (\n          <CheckButton\n            key={label.id}\n            onClick={() => onClickLabel(label)}\n            style={{\n              backgroundColor: getRandomColor(label),\n              transform: enlargedLabel === label ? \"scale(1.1,1.1)\" : undefined,\n            }}\n          >\n            <Checkbox\n              style={{ color: \"#fff\" }}\n              checked={currentOutput.includes(label.id)}\n            />\n            {label.id}\n            {labelKeyMap[label.id] ? ` (${labelKeyMap[label.id]})` : \"\"}\n          </CheckButton>\n        ))}\n      </ButtonsContainer>\n    </Container>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Annotator from \"react-image-annotate\"\nimport isEqual from \"lodash/isEqual\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  rid,\n  convertFromRIARegionFmt,\n  convertToRIARegionFmt,\n  convertToRIAKeyframes,\n} from \"../../utils/ria-format.js\"\n\nconst useStyles = makeStyles({})\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: \"create-polygon\",\n  \"full-segmentation\": \"create-polygon\",\n  point: \"create-point\",\n}\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem,\n}) => {\n  const c = useStyles()\n  const [selectedIndex, changeSelectedIndex] = useState(0)\n\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n\n  const labelProps = useMemo(\n    () =>\n      isClassification\n        ? {\n            regionClsList: (iface.availableLabels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          }\n        : {\n            regionTagList: (iface.availableLabels || []).map((l) =>\n              typeof l === \"string\" ? l : l.id\n            ),\n          },\n    [isClassification]\n  )\n\n  const multipleRegions =\n    iface.multipleRegions || iface.multipleRegions === undefined\n\n  const onExit = useEventCallback((output) => {\n    const newKeyframes = {}\n    for (const key in output.keyframes) {\n      newKeyframes[key] = {\n        regions: output.keyframes[key].regions.map(convertFromRIARegionFmt),\n      }\n    }\n    onSaveTaskOutputItem(0, { keyframes: newKeyframes })\n    if (containerProps.onExit) containerProps.onExit()\n  })\n\n  const enabledTools = useMemo(\n    () =>\n      [\"select\"].concat(\n        regionTypesAllowed.map((rt) => regionTypeToTool[rt]).filter(Boolean)\n      ),\n    [regionTypesAllowed]\n  )\n\n  // TODO fix by adding some way of going to the \"next\" video\n  if (taskData.length > 1) {\n    return \"Video segmentation is currently limited to only a single video per selection\"\n  }\n\n  if (taskData.length === 0) return \"taskData[0] with videoUrl is required\"\n  if (!taskData[0].videoUrl) return \"taskData[0] must have videoUrl\"\n\n  return (\n    <div style={{ height: \"calc(100vh - 70px)\" }}>\n      <Annotator\n        taskDescription={iface.description}\n        {...labelProps}\n        enabledTools={enabledTools}\n        keyframes={convertToRIAKeyframes(\n          ((taskOutput || [])[0] || {}).keyframes\n        )}\n        videoName={taskData[0].customId || \"\"}\n        videoTime={0}\n        videoSrc={taskData[0].videoUrl}\n        onExit={onExit}\n      />\n    </div>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nexport default (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        type=\"transcribe\"\n        audio={props.taskData[currentSampleIndex].audioUrl}\n        phraseBank={props.phraseBank}\n        initialTranscriptionText={\n          (props.taskOutput || [])[currentSampleIndex] || \"\"\n        }\n        onFinish={(result) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, result)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n","import React, { useState } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\n\nexport const DataEntry = (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <Survey\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        variant=\"flat\"\n        form={\n          props.taskData[currentSampleIndex].surveyjs ||\n          props.interface.surveyjs\n        }\n        defaultAnswers={\n          props.taskOutput && props.taskOutput[currentSampleIndex]\n            ? props.taskOutput[currentSampleIndex]\n            : undefined\n        }\n        completeText=\"Save & Next\"\n        onFinish={(answers) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, answers)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default DataEntry\n","// @flow\n\nimport React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  root: {\n    padding: 50,\n    textAlign: \"center\",\n  },\n  title: {\n    margin: 50,\n  },\n  explain: {},\n})\n\nexport default ({ title, description, children }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      <Typography variant=\"h3\" component=\"div\" className={c.title}>\n        {title}\n      </Typography>\n      <Typography variant=\"h5\" component=\"div\" className={c.explain}>\n        {description || children}\n      </Typography>\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport BadOHA from \"../BadOHA\"\n\nexport default () => {\n  return (\n    <BadOHA title=\"No Samples to Show\">\n      Make sure that <code>taskData</code> is defined and not empty.\n      <br />\n      <br />\n      Need help setting up? <a href=\"#\">Check out this tutorial.</a>\n    </BadOHA>\n  )\n}\n","import React from \"react\"\n\nimport RemoveRedEye from \"@material-ui/icons/RemoveRedEye\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport OndemandVideo from \"@material-ui/icons/OndemandVideo\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Help from \"@material-ui/icons/Help\"\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\n\nexport default ({ type, ...props }) => {\n  switch (type) {\n    case \"image_label\":\n    case \"image_segmentation\":\n      return <RemoveRedEye {...props} />\n    case \"audio_transcription\":\n      return <Audiotrack {...props} />\n    case \"data_entry\":\n      return <Edit {...props} />\n    case \"text_entity_recognition\":\n      return <TextFormat {...props} />\n    case \"3d_bounding_box\":\n      return <ThreeDRotation {...props} />\n    default:\n      return <Help {...props} />\n  }\n}\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport Button from \"@material-ui/core/Button\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport InterfaceIcon from \"../InterfaceIcon\"\nimport KeyboardArrowRightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport Box from \"@material-ui/core/Box\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\n\nconst Title = styled(\"div\")({\n  fontSize: 18,\n  fontWeight: \"bold\",\n  color: colors.grey[700],\n  borderBottom: `1px solid ${colors.grey[300]}`,\n  paddingBottom: 8,\n  marginBottom: 8,\n  paddingLeft: 8,\n})\nconst StyledButton = styled(Button)({\n  display: \"flex\",\n  textAlign: \"left\",\n  justifyContent: \"flex-start\",\n  marginTop: 8,\n})\n\nexport const Composite = (props) => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const {\n    interface: { fields },\n  } = props\n  const [selectedField, changeSelectedField] = useState()\n  const [taskOutput, changeTaskOutput] = useState(props.taskOutput)\n\n  if (selectedField) {\n    return (\n      <UniversalDataViewer\n        oha={{\n          interface: selectedField.interface,\n          taskOutput: [\n            props.taskOutput\n              ? (props.taskOutput[currentSampleIndex] || {})[\n                  selectedField.fieldName\n                ]\n              : null,\n          ],\n          taskData: [props.taskData[currentSampleIndex]],\n        }}\n        onSaveTaskOutputItem={(indexZero, output) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, {\n            ...(props.taskOutput ? props.taskOutput[currentSampleIndex] : {}),\n            [selectedField.fieldName]: output,\n          })\n          changeSelectedField(null)\n        }}\n      />\n    )\n  }\n\n  console.log(\"taskOutput\", props.taskOutput)\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={(sampleIndex) => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <Title>Fields</Title>\n      {fields.map((field, index) => (\n        <StyledButton\n          key={field.fieldName}\n          onClick={() => {\n            changeSelectedField({ ...field, index })\n          }}\n          fullWidth\n          variant=\"outlined\"\n        >\n          <InterfaceIcon\n            style={{ color: colors.grey[500], marginRight: 16 }}\n            type={field.interface.type}\n          />\n          {field.fieldName}\n          <Box flexGrow={1} />\n          <Checkbox\n            checked={Boolean(\n              (props.taskOutput\n                ? props.taskOutput[currentSampleIndex] || {}\n                : {})[field.fieldName]\n            )}\n          />\n          <KeyboardArrowRightIcon />\n        </StyledButton>\n      ))}\n      <StyledButton\n        onClick={() => props.containerProps.onExit(\"go-to-next\")}\n        fullWidth\n        variant=\"outlined\"\n      >\n        <KeyboardArrowRightIcon\n          style={{ color: colors.grey[500], marginRight: 16 }}\n        />\n        Next\n        <Box flexGrow={1} />\n        <Box height=\"42px\" />\n        <KeyboardArrowRightIcon />\n      </StyledButton>\n    </SampleContainer>\n  )\n}\n\nexport default Composite\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport TextClassification from \"../TextClassification\"\nimport TextEntityRecognition from \"../TextEntityRecognition\"\nimport ImageSegmentation from \"../ImageSegmentation\"\nimport ImageClassification from \"../ImageClassification\"\nimport VideoSegmentation from \"../VideoSegmentation\"\nimport AudioTranscription from \"../AudioTranscription\"\nimport DataEntry from \"../DataEntry\"\nimport EmptySampleContainer from \"../EmptySampleContainer\"\nimport Composite from \"../Composite\"\nimport BadOHA from \"../BadOHA\"\n\nexport const UniversalDataViewer = ({\n  oha,\n  onExit,\n  hideHeader,\n  hideDescription,\n  datasetName,\n  requireCompleteToPressNext,\n  onSaveTaskOutputItem,\n}) => {\n  // TODO type check w/ superstruct against oha\n  const containerProps = useMemo(\n    () => ({\n      hideHeader,\n      hideDescription,\n      datasetName,\n      requireCompleteToPressNext,\n      onExit,\n    }),\n    [\n      hideHeader,\n      hideDescription,\n      requireCompleteToPressNext,\n      datasetName,\n      onExit,\n    ]\n  )\n\n  if (!oha) {\n    return (\n      <BadOHA\n        title=\"Null OHA\"\n        description=\"Your OHA file isn't defined for some reason.\"\n      />\n    )\n  }\n\n  if (!oha.taskData || oha.taskData.length === 0) {\n    return <EmptySampleContainer />\n  }\n\n  switch (oha.interface.type) {\n    case \"data_entry\":\n      return (\n        <DataEntry\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_classification\":\n      return (\n        <TextClassification\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_entity_recognition\":\n      return (\n        <TextEntityRecognition\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"image_segmentation\":\n      return (\n        <ImageSegmentation\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"image_classification\":\n      return (\n        <ImageClassification\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"video_segmentation\":\n      return (\n        <VideoSegmentation\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"composite\":\n      return (\n        <Composite\n          containerProps={containerProps}\n          {...oha}\n          oha={oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"audio_transcription\":\n      return (\n        <AudioTranscription\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    default:\n      return `\"${oha.interface.type}\" not supported`\n  }\n}\n\nexport default UniversalDataViewer\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  textField: {\n    marginLeft: 8,\n  },\n})\n\nconst SAVE_WAIT = 2000\n\nexport default ({ value, onChange }) => {\n  const c = useStyles()\n  const [{ editing, newValue }, changeEditing] = useState({\n    editing: false,\n    newValue: value || \"\",\n  })\n\n  useEffect(() => {\n    changeEditing({ editing, newValue: value })\n  }, [value])\n\n  useEffect(() => {\n    if (!editing) return\n    let listener = (e) => {\n      if (e.key === \"Enter\") {\n        onChange(newValue)\n        changeEditing({ editing: false })\n      }\n    }\n    window.addEventListener(\"keydown\", listener)\n    return () => {\n      window.removeEventListener(\"keydown\", listener)\n    }\n  }, [editing, newValue])\n\n  useEffect(() => {\n    if (!newValue) return\n    if (editing) {\n      let timeout = setTimeout(\n        () => {\n          onChange(newValue)\n          changeEditing({ editing: false })\n        },\n        value === newValue ? SAVE_WAIT * 5 : SAVE_WAIT\n      )\n\n      return () => clearTimeout(timeout)\n    } else {\n      return () => {}\n    }\n  }, [editing, newValue])\n\n  return (\n    <TextField\n      className={c.textField}\n      label=\"File Name\"\n      variant=\"outlined\"\n      size=\"small\"\n      InputProps={{\n        inputProps: { style: { color: \"#000\" } },\n      }}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\") {\n          e.preventDefault()\n          e.stopPropagation()\n          e.target.blur()\n        }\n      }}\n      onKeyPress={(e) => {\n        e.stopPropagation()\n      }}\n      onChange={(e) => {\n        changeEditing({\n          editing: true,\n          newValue: e.target.value,\n        })\n      }}\n      value={newValue || \"\"}\n    />\n  )\n}\n","// @flow weak\n\nimport React, { memo, useCallback, useReducer, useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { useLocalStorage } from \"react-use\"\nimport { styled } from \"@material-ui/core/styles\"\nimport range from \"lodash/range\"\nimport * as colors from \"@material-ui/core/colors\"\nimport classNames from \"classnames\"\nimport TablePagination from \"@material-ui/core/TablePagination\"\nimport getBrushColorPalette from \"../../utils/get-brush-color-palette\"\n\nconst Container = styled(\"div\")({\n  flexWrap: \"wrap\",\n})\nconst SampleDiv = styled(\"div\")(({ color }) => ({\n  margin: 4,\n  padding: 4,\n  backgroundColor: color[500],\n  display: \"inline-flex\",\n  fontSize: 11,\n  textAlign: \"center\",\n  justifyContent: \"center\",\n  minWidth: \"3em\",\n  borderRadius: 3,\n  cursor: \"pointer\",\n  userSelect: \"none\",\n  transition: \"box-shadow 200ms ease, transform 200ms ease\",\n  color: color.isFaded ? \"#000\" : \"#fff\",\n  \"&.selected\": {\n    boxShadow: `0px 0px 2px 1px ${color[\"A200\"]}`,\n    transform: \"scale(1.05,1.05)\",\n  },\n}))\n\nconst Sample = memo(\n  ({\n    index,\n    onClick,\n    completed,\n    selected,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    brush,\n  }) => {\n    return (\n      <SampleDiv\n        className={classNames({ completed, selected })}\n        onClick={() => onClick(index)}\n        onMouseDown={() => onMouseDown(index)}\n        onMouseUp={() => onMouseUp(index)}\n        onMouseEnter={() => onMouseEnter(index)}\n        color={getBrushColorPalette(brush)}\n      >\n        {index}\n      </SampleDiv>\n    )\n  },\n  function (p, n) {\n    return (\n      p.index === n.index &&\n      p.completed === n.completed &&\n      p.selected === n.selected &&\n      p.brush === n.brush\n    )\n  }\n)\n\nexport default ({ count, completed = [], taskData, onClick }) => {\n  const [samplesPerPage, changeSamplesPerPage] = useLocalStorage(\n    \"samplesPerPage\",\n    100\n  )\n  const [sampleOffset, changeSampleOffset] = useLocalStorage(\"sampleOffset\", 0)\n\n  useEffect(() => {\n    if (sampleOffset > count) {\n      changeSampleOffset(0)\n    }\n  }, [])\n\n  const [selectRange, changeSelectRange] = useReducer((state, newValue) => {\n    if (newValue === null) return null\n    if (typeof newValue === \"number\") {\n      if (!state) return null\n      return [Math.min(newValue, state[0]), Math.max(newValue + 1, state[1])]\n    }\n    return newValue\n  }, null)\n\n  const startSelectRange = useCallback(\n    (index) => changeSelectRange([index, index + 1]),\n    [changeSelectRange]\n  )\n  const moveSelectRange = useCallback((index) => changeSelectRange(index), [\n    changeSelectRange,\n  ])\n  const endSelectRange = useCallback(() => {}, [changeSelectRange])\n  const checkAndNullifySelectRange = useCallback(\n    (e) => {\n      if (e.buttons !== 1) {\n        changeSelectRange(null)\n      }\n    },\n    [changeSelectRange]\n  )\n  const onClickMemo = useEventCallback(onClick)\n\n  return (\n    <Container\n      onMouseUp={checkAndNullifySelectRange}\n      onMouseEnter={checkAndNullifySelectRange}\n    >\n      {range(sampleOffset, Math.min(count, sampleOffset + samplesPerPage)).map(\n        (i) => (\n          <Sample\n            onClick={onClickMemo}\n            key={i}\n            index={i}\n            completed={completed[i]}\n            brush={\n              completed[i] ? taskData[i].brush || \"complete\" : \"incomplete\"\n            }\n            selected={selectRange && i >= selectRange[0] && i < selectRange[1]}\n            onMouseDown={startSelectRange}\n            onMouseEnter={moveSelectRange}\n            onMouseUp={endSelectRange}\n          />\n        )\n      )}\n      <TablePagination\n        rowsPerPageOptions={[100, 250, 500, 1000, 2000, 10000]}\n        component=\"div\"\n        count={count}\n        rowsPerPage={samplesPerPage}\n        page={Math.floor(sampleOffset / samplesPerPage)}\n        labelRowsPerPage=\"Samples per Page:\"\n        onChangePage={(e, newPage) =>\n          changeSampleOffset(newPage * samplesPerPage)\n        }\n        onChangeRowsPerPage={(e) => changeSamplesPerPage(+e.target.value)}\n      />\n    </Container>\n  )\n}\n","// @flow weak\nimport React, { useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\n\nexport default ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n  return (\n    <SimpleDialog\n      title=\"Paste Urls\"\n      open={open}\n      onClose={onClose}\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            onAddSamples(\n              content\n                .split(\"\\n\")\n                .map((l) => l.trim())\n                .filter(Boolean)\n                .map((s) => {\n                  const extension = s.split(\".\").slice(-1)[0]\n                  switch (extension.toLowerCase()) {\n                    case \"png\":\n                    case \"jpg\":\n                    case \"gif\":\n                    case \"jpeg\":\n                    case \"bmp\": {\n                      return { imageUrl: s }\n                    }\n                    case \"pdf\": {\n                      return { pdfUrl: s }\n                    }\n                    case \"mp3\":\n                    case \"wav\": {\n                      return { audioUrl: s }\n                    }\n                    default: {\n                      // TODO throw error or toast\n                      console.error(\"extension not recognized\")\n                      return null\n                    }\n                  }\n                })\n                .filter(Boolean)\n            )\n          },\n        },\n      ]}\n    >\n      <TextArea\n        onChange={(e, v) => changeContent(e.target.value)}\n        placeholder={\"Paste URLs here\\nOne URL per line\"}\n      />\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\nimport { useDropzone } from \"react-dropzone\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300,\n})\n\nconst UploadHover = styled(\"div\")({\n  fontSize: 24,\n  color: colors.grey[600],\n  textAlign: \"center\",\n  padding: 48,\n})\n\nconst emptyFunc = () => null\n\nexport default ({ content, onChangeContent, placeholder }) => {\n  const onDrop = useEventCallback((acceptedFiles) => {\n    const { name: fileName } = acceptedFiles[0]\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      const fileContent = e.target.result\n      if (fileName.endsWith(\"csv\") || fileName.endsWith(\"CSV\")) {\n        onChangeContent(fileContent.replace(\",\", \"\\n\"))\n      } else {\n        onChangeContent(fileContent)\n      }\n    }\n    reader.readAsText(acceptedFiles[0])\n  })\n\n  const [lastClickTime, changeLastClickTime] = useState(0)\n  const onClick = useEventCallback((e) => {\n    if (Date.now() - lastClickTime < 400) {\n      getRootProps().onClick(e)\n    }\n    changeLastClickTime(Date.now())\n  })\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  return (\n    <div {...getRootProps()} onClick={emptyFunc}>\n      <input {...getInputProps()} />\n      {isDragActive ? (\n        <UploadHover>Drop the text or csv file here.</UploadHover>\n      ) : (\n        <TextArea\n          value={content}\n          onChange={(e, v) => onChangeContent(e.target.value)}\n          onClick={onClick}\n          placeholder={placeholder}\n        />\n      )}\n    </div>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\n\nconst ImportTextSnippetsDialog = ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Import Text Snippets\"\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            onAddSamples(\n              content\n                .split(\"\\n\")\n                .map((l) => l.trim())\n                .filter(Boolean)\n                .map((s) => ({ document: s }))\n            )\n          },\n        },\n      ]}\n    >\n      <TextAreaWithUpload\n        content={content}\n        onChangeContent={changeContent}\n        placeholder={\n          \"Paste Snippets here\\nOne snippet per line.\\n\\nYou can also drag a text or csv file here (double click to open file dialog)\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n\nexport default ImportTextSnippetsDialog\n","import React, { useState, useEffect, useRef } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Button from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst ExplainText = styled(\"div\")({\n  marginTop: 8,\n  marginBottom: 8,\n})\nconst GoogleDriveScreenshot = styled(\"img\")({\n  width: \"100%\",\n  boxSizing: \"border-box\",\n})\n\n// Example for Google OAuth\n// https://developers.google.com/drive/api/v3/picker\n\nconst credentials = {\n  web: {\n    client_id:\n      process.env.REACT_APP_GOOGLE_DRIVE_CLIENT_ID ||\n      \"294393711342-h5aqqt3pvn8othepvsmi16iakdhi7m6j.apps.googleusercontent.com\",\n    app_id: process.env.REACT_APP_GOOGLE_DRIVE_APP_ID || \"294393711342\",\n    developer_key:\n      process.env.REACT_APP_GOOGLE_DRIVE_DEVELOPER_KEY ||\n      \"AIzaSyCoNoDnfzDBSXpt84Q75LU9UMTzvyLkRhg\",\n  },\n}\n\nconst scope = \"https://www.googleapis.com/auth/drive.readonly\"\n\nexport default ({ open, onClose, onAddSamples }) => {\n  const [googleScriptLoaded, setGoogleScriptLoaded] = useState(false)\n  const [pickerApiLoaded, setPickerApiLoaded] = useState(false)\n  const [oauthToken, setOAuthToken] = useState(null)\n  const [userSelectedItemsFromDrive, setUserSelectedItemsFromDrive] = useState(\n    []\n  )\n  const [isPickerOpen, setIsPickerOpen] = useState(false)\n\n  useEffect(() => {\n    const scriptElement = document.createElement(\"script\")\n    scriptElement.src = \"https://apis.google.com/js/api.js\"\n    scriptElement.async = true\n\n    scriptElement.onload = () => {\n      setGoogleScriptLoaded(true)\n    }\n\n    document.body.appendChild(scriptElement)\n    return () => {\n      scriptElement.remove()\n    }\n  }, [])\n\n  const googlePickerActionCallback = (data) => {\n    if (data.action === window.google.picker.Action.PICKED) {\n      setUserSelectedItemsFromDrive(\n        data.docs.map((googleDriveDocument) => ({\n          url: googleDriveDocument.url,\n          mimeType: googleDriveDocument.mimeType,\n          name: googleDriveDocument.name,\n          id: googleDriveDocument.id,\n        }))\n      )\n      setIsPickerOpen(false)\n    } else if (data.action === \"cancel\") {\n      onClose()\n    }\n  }\n\n  const createPicker = () => {\n    if (pickerApiLoaded && oauthToken) {\n      const view = new window.google.picker.View(\n        window.google.picker.ViewId.Docs\n      )\n\n      view.setMimeTypes(\n        \"image/png\",\n        \"image/jpeg\",\n        \"image/jpg\",\n        \"image/gif\",\n        \"video/mp4\",\n        \"video/mpeg\"\n      )\n      const picker = new window.google.picker.PickerBuilder()\n        .enableFeature(window.google.picker.Feature.NAV_HIDDEN)\n        .enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED)\n        .setAppId(credentials.web.app_id)\n        .setOAuthToken(oauthToken)\n        .addView(view)\n        .addView(window.google.picker.ViewId.DOCS)\n        .setDeveloperKey(credentials.web.developer_key)\n        .setCallback(googlePickerActionCallback)\n        .build()\n      picker.setVisible(true)\n      setIsPickerOpen(true)\n    }\n  }\n\n  useEffect(() => {\n    createPicker()\n  }, [pickerApiLoaded, oauthToken])\n\n  const handleAuthenticationResponse = (authenticationResponse) => {\n    if (authenticationResponse && !authenticationResponse.error) {\n      setOAuthToken(authenticationResponse.access_token)\n      createPicker()\n    }\n  }\n\n  const onAuthApiLoad = () => {\n    window.gapi.auth.authorize(\n      {\n        client_id: credentials.web.client_id,\n        scope: scope,\n        immediate: false,\n      },\n      handleAuthenticationResponse\n    )\n  }\n\n  const onPickerApiLoad = () => {\n    setPickerApiLoaded(true)\n    createPicker()\n  }\n\n  const onLoadPicker = () => {\n    if (googleScriptLoaded === true) {\n      window.gapi.load(\"auth\", { callback: onAuthApiLoad })\n      window.gapi.load(\"picker\", { callback: onPickerApiLoad })\n    }\n  }\n\n  const onAddSamplesClicked = () => {\n    const samples = []\n    for (const item of userSelectedItemsFromDrive) {\n      if (item.mimeType.includes(\"image/\")) {\n        samples.push({ imageUrl: `https://drive.google.com/uc?id=${item.id}` })\n      } else if (item.mimeType.includes(\"video/\")) {\n        samples.push({ videoUrl: `https://drive.google.com/uc?id=${item.id}` })\n      }\n    }\n    onAddSamples(samples)\n  }\n\n  useEffect(() => {\n    if (open) {\n      onLoadPicker()\n    }\n  }, [open, googleScriptLoaded])\n\n  return (\n    <SimpleDialog\n      open={open && !isPickerOpen}\n      onClose={onClose}\n      title=\"Import from Google Drive\"\n      actions={[\n        userSelectedItemsFromDrive &&\n          userSelectedItemsFromDrive.length > 0 && {\n            text: `Add ${userSelectedItemsFromDrive.length} Samples`,\n            onClick: onAddSamplesClicked,\n          },\n      ].filter(Boolean)}\n    >\n      <Button variant=\"outlined\" onClick={onLoadPicker}>\n        Reopen Google Drive Picker\n      </Button>\n      <ExplainText>\n        Make sure your Google Drive files are available via a link.{\" \"}\n        <b>If you don't, the files will not appear when you're labeling!</b>\n      </ExplainText>\n      <GoogleDriveScreenshot\n        src={\n          \"https://s3.amazonaws.com/asset.workaround.online/google-share-screenshot.png\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n","import JAC from \"jac-format\"\n\nexport default (csv) => {\n  const json = JAC.fromCSV(csv)\n  return {\n    interface: json.interface,\n    taskOutput: json.samples.map((sample) => sample.output),\n    taskData: json.samples.map((sample) => {\n      delete sample.output\n      return sample\n    }),\n  }\n}\n","// @flow weak\n\nimport React, { useState, useEffect } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\nimport * as colors from \"@material-ui/core/colors\"\nimport fromUDTCSV from \"../../utils/from-udt-csv.js\"\n\nconst InfoText = styled(\"div\")({\n  fontFamily: \"Inter\",\n  marginBottom: 20,\n  \"& a\": {\n    color: colors.blue[500],\n  },\n})\n\nconst Error = styled(\"div\")({\n  color: colors.red[500],\n  whiteSpace: \"pre-wrap\",\n  marginBottom: 20,\n})\n\nconst ImportUDTFileDialog = ({ open, onClose, onAddSamples }) => {\n  const [error, changeError] = useState(null)\n  const [content, setContent] = useState(\"\")\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Import JSON/CSV Samples\"\n      actions={[\n        {\n          text: \"Add Samples\",\n          disabled: Boolean(error),\n          onClick: () => {\n            let taskData, taskOutput\n            try {\n              ;[taskData, taskOutput] = JSON.parse(content).taskData\n            } catch (e1) {\n              try {\n                const udt = fromUDTCSV(content)\n                ;({ taskData, taskOutput } = udt)\n              } catch (e2) {\n                changeError(\n                  `JSON did not parse. CSV did not parse.\\n\\nJSON Error: ${e1.toString()}\\nCSV Error: ${e2.toString()}`\n                )\n                return\n              }\n            }\n            if (!taskData || taskData.length === 0) {\n              changeError(\"No task data found\")\n              return\n            }\n            onAddSamples(taskData, taskOutput)\n          },\n        },\n      ]}\n    >\n      <InfoText>\n        See the{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://github.com/UniversalDataTool/udt-format\"\n        >\n          UDT JSON format\n        </a>{\" \"}\n        or the{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://github.com/UniversalDataTool/udt-format\"\n        >\n          UDT CSV format\n        </a>{\" \"}\n        for formatting details. Or take a look at a{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.json\"\n        >\n          sample JSON\n        </a>{\" \"}\n        or{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.csv\"\n        >\n          sample CSV\n        </a>{\" \"}\n        file.\n      </InfoText>\n      <Error>{error}</Error>\n      <TextAreaWithUpload\n        content={content}\n        onChangeContent={setContent}\n        placeholder={\n          \"Paste CSV/JSON here. The file should be in the UDT JSON/CSV format.\\n\\nYou can also drag a json or csv file here (double click to open file dialog)\"\n        }\n      />\n    </SimpleDialog>\n  )\n}\n\nexport default ImportUDTFileDialog\n","// @flow weak\n\nimport React from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport Table from \"@material-ui/core/Table\"\nimport TableBody from \"@material-ui/core/TableBody\"\nimport TableCell from \"@material-ui/core/TableCell\"\nimport TableContainer from \"@material-ui/core/TableContainer\"\nimport TableHead from \"@material-ui/core/TableHead\"\nimport TableRow from \"@material-ui/core/TableRow\"\n\nconst datasets = [\n  { name: \"Elon Musk Tweets\", type: \"text\", size: 2800 },\n  { name: \"Cats\", type: \"image\", size: 360 },\n  { name: \"VR Hand Pinching\", type: \"image\", size: 20517 },\n  { name: \"AI Generated Faces\", type: \"image\", size: 1999 },\n  { name: \"Text to Speech Audio\", type: \"audio\", size: 200 },\n]\n\nasync function getSamples(dataset) {\n  const datasetName =\n    dataset.name.toLowerCase().replace(/ /g, \"_\") + \".udt.json\"\n\n  const datasetUrl = `https://s3.amazonaws.com/datasets.workaround.online/${datasetName}`\n\n  return await fetch(datasetUrl)\n    .then((r) => r.json())\n    .then((r) => r.taskData)\n}\n\nconst StyledButton = styled(Button)({})\n\nconst ImportToyDatasetDialog = ({ onClose, onAddSamples, open }) => {\n  return (\n    <SimpleDialog onClose={onClose} open={open} title=\"Import Toy Dataset\">\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Type</TableCell>\n              <TableCell>Size</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {datasets.map((dataset) => (\n              <TableRow key={dataset.name}>\n                <TableCell>{dataset.name}</TableCell>\n                <TableCell>{dataset.type}</TableCell>\n                <TableCell>{dataset.size}</TableCell>\n                <TableCell>\n                  <StyledButton\n                    onClick={async () => {\n                      onAddSamples(await getSamples(dataset))\n                    }}\n                    variant=\"outlined\"\n                  >\n                    Import\n                  </StyledButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </SimpleDialog>\n  )\n}\n\nexport default ImportToyDatasetDialog\n","// @flow weak\n\nimport React, { useState, useContext, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\"\nimport TextFieldsIcon from \"@material-ui/icons/TextFields\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport PetsIcon from \"@material-ui/icons/Pets\"\nimport * as colors from \"@material-ui/core/colors\"\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\nimport ImportTextSnippetsDialog from \"../ImportTextSnippetsDialog\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useElectron from \"../../utils/use-electron\"\nimport classnames from \"classnames\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport ImportFromGoogleDriveDialog from \"../ImportFromGoogleDriveDialog\"\nimport ImportUDTFileDialog from \"../ImportUDTFileDialog\"\nimport ImportToyDataset from \"../ImportToyDatasetDialog\"\nimport ImportFromYoutubeUrls from \"../ImportFromYoutubeUrls\"\nimport { FaGoogleDrive, FaYoutube } from \"react-icons/fa\"\n\nconst extendWithNull = (ar, len) => {\n  ar = [...ar]\n  while (ar.length < len) {\n    ar.push(null)\n  }\n  return ar\n}\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200],\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 48,\n    height: 48,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400],\n    },\n  },\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500],\n  },\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({ Icon, desktopOnly, isDesktop, children, dialog }) => {\n  const disabled = desktopOnly ? !isDesktop : false\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => onChangeDialog(dialog)}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              <Icon className={classnames(\"icon\", { disabled })} />\n              <div>{children}</div>\n              {desktopOnly && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  DESKTOP ONLY\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nconst convertToTaskDataObject = (fp) => {\n  const ext = fp.split(\".\").slice(-1)[0].toLowerCase()\n  if ([\"png\", \"jpg\", \"jpeg\"].includes(ext)) {\n    return { imageUrl: `file://${fp}` }\n  }\n  if ([\"pdf\"].includes(ext)) {\n    return { pdfUrl: `file://${fp}` }\n  }\n  if ([\"mp4\", \"webm\", \"mkv\"].includes(ext)) {\n    return { videoUrl: `file://${fp}` }\n  }\n  return null\n}\n\nexport default ({ oha, onChangeOHA, isDesktop }) => {\n  const [selectedDialog, changeDialog] = useState()\n  const electron = useElectron()\n  const onChangeDialog = async (dialog) => {\n    switch (dialog) {\n      case \"upload-directory\": {\n        if (!electron) return\n        const {\n          canceled,\n          filePaths: dirPaths,\n        } = await electron.remote.dialog.showOpenDialog({\n          title: \"Select Directory to Import Files\",\n          properties: [\"openDirectory\"],\n        })\n        if (canceled) return\n        const dirPath = dirPaths[0]\n        const fs = electron.remote.require(\"fs\")\n        const path = electron.remote.require(\"path\")\n        const importedFilePaths = (await fs.promises.readdir(dirPath))\n          .filter((fn) => fn.includes(\".\"))\n          .map((fileName) => path.join(dirPath, fileName))\n\n        onChangeOHA(\n          setIn(\n            oha,\n            [\"taskData\"],\n            (oha.taskData || []).concat(\n              importedFilePaths.map(convertToTaskDataObject).filter(Boolean)\n            )\n          ),\n          true\n        )\n        return\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n  const closeDialog = () => changeDialog(null)\n  const onAddSamples = useEventCallback(\n    (appendedTaskData, appendedTaskOutput) => {\n      let newOHA = setIn(\n        oha,\n        [\"taskData\"],\n        (oha.taskData || []).concat(appendedTaskData)\n      )\n      if (appendedTaskOutput) {\n        newOHA = setIn(\n          newOHA,\n          [\"taskOutput\"],\n          extendWithNull(oha.taskOutput || [], oha.taskData.length).concat(\n            appendedTaskOutput\n          )\n        )\n      }\n      onChangeOHA(newOHA, true)\n      closeDialog()\n    }\n  )\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"paste-image-urls\"\n          Icon={AssignmentReturnedIcon}\n        >\n          Paste URLs\n        </Button>\n        <Button\n          desktopOnly\n          isDesktop={isDesktop}\n          dialog=\"upload-directory\"\n          Icon={CreateNewFolderIcon}\n        >\n          Files from Directory\n        </Button>\n        <Button dialog=\"import-text-snippets\" Icon={TextFieldsIcon}>\n          Import Text Snippets\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"import-toy-dataset\"\n          Icon={PetsIcon}\n        >\n          Import Toy Dataset\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"google-drive-file-picker\"\n          Icon={FaGoogleDrive}\n        >\n          Import from Google Drive\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"youtube-urls\"\n          Icon={FaYoutube}\n          desktopOnly\n        >\n          Import from Youtube URLs\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"import-csv-json\"\n          Icon={DescriptionIcon}\n        >\n          Import from CSV / JSON\n        </Button>\n        <ImportTextSnippetsDialog\n          open={selectedDialog === \"import-text-snippets\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <PasteUrlsDialog\n          open={selectedDialog === \"paste-image-urls\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportFromGoogleDriveDialog\n          open={selectedDialog === \"google-drive-file-picker\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportToyDataset\n          open={selectedDialog === \"import-toy-dataset\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportFromYoutubeUrls\n          open={selectedDialog === \"youtube-urls\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportUDTFileDialog\n          open={selectedDialog === \"import-csv-json\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Box from \"@material-ui/core/Box\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport immutable, { setIn } from \"seamless-immutable\"\n\nconst Code = styled(\"pre\")({\n  fontSize: 8,\n})\n\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  backgroundColor: colors.grey[100],\n  border: `1px solid ${colors.grey[500]}`,\n  marginTop: 16,\n  marginBottom: 16,\n})\n\nconst StyledExpansionPanelSummary = styled(ExpansionPanelSummary)({\n  fontWeight: \"bold\",\n})\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Transform Video Keyframes\"\n      actions={[\n        {\n          text: \"Transform Video Keyframes\",\n          disabled: !oha.taskOutput,\n          onClick: () => {\n            const samples = oha.taskData.flatMap((item, index) => {\n              if (!item.videoUrl)\n                return { data: item, output: oha.taskOutput[index] }\n              if (item.videoUrl && !item.videoFrameAt) {\n                if (!oha.taskOutput[index]) return []\n                if (!oha.taskOutput[index].keyframes) return []\n                const { keyframes } = oha.taskOutput[index]\n                return Object.keys(keyframes).map((kf) => ({\n                  data: {\n                    videoUrl: item.videoUrl,\n                    videoFrameAt: parseInt(kf),\n                  },\n                  output: keyframes[kf].regions || [],\n                }))\n              }\n            })\n\n            onChangeOHA(\n              immutable(oha)\n                .setIn(\n                  [\"taskData\"],\n                  samples.map((s) => s.data)\n                )\n                .setIn(\n                  [\"taskOutput\"],\n                  samples.map((s) => s.output)\n                )\n                .setIn([\"interface\", \"type\"], \"image_segmentation\")\n            )\n          },\n        },\n      ]}\n    >\n      This operation will convert keyframes set on a video into individual image\n      segmentation frames. Your interface type will change from\n      \"video_segmentation\" into \"image_segmentation\". This is sometimes helpful\n      when preparing video data for a computer vision model.\n      {!oha.taskOutput && (\n        <b>\n          <br />\n          <br />\n          You need to label some keyframes to use this.\n        </b>\n      )}\n      <StyledExpansionPanel>\n        <StyledExpansionPanelSummary>Details</StyledExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <Box display=\"flex\">\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"video_segmentation\" },\n  taskData: [\n    {\n      videoUrl: \"https://example.com/video1.mp4\"\n    }\n  ],\n  taskOutput: [\n    {\n      keyframes: {\n        \"0\": { /* labels */ },\n        \"1000\": { /* labels */ },\n        \"2000\": { /* labels */ }\n      }\n    }\n  ]\n}`}\n              </Code>\n            </Box>\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n              <ArrowForwardIcon\n                style={{ color: colors.grey[500], width: 48, height: 48 }}\n              />\n            </Box>\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"image_segmentation\" },\n  taskData: [\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 0\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 1000\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 2000\n    }\n  ],\n  taskOutput: [\n    { /* labels */ },\n    { /* labels */ },\n    { /* labels */ }\n  ]\n}`}\n              </Code>\n            </Box>\n          </Box>\n        </ExpansionPanelDetails>\n      </StyledExpansionPanel>\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport md5 from \"js-md5\"\nimport path from \"path\"\nimport { setIn } from \"seamless-immutable\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nfunction downloadFile(urlToDownload, directoryPath, remote) {\n  const fileName = `sample_${md5(urlToDownload).slice(0, 6)}__${urlToDownload\n    .split(\"/\")\n    .slice(-1)[0]\n    .replace(/[^a-zA-Z0-9_\\-\\.]/g, \"\")}`\n  const downloadPath = path.join(directoryPath, fileName)\n  if (remote.require(\"fs\").existsSync(downloadPath)) return downloadPath\n  return new Promise((resolve, reject) => {\n    remote.require(\"download-file\")(\n      urlToDownload,\n      {\n        directory: directoryPath,\n        filename: fileName,\n      },\n      (err) => {\n        if (err) return reject(err)\n        return resolve(downloadPath)\n      }\n    )\n  })\n}\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Download URLs\"\n      actions={[\n        {\n          text: \"Download URLs\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            const {\n              cancelled,\n              filePaths: [directoryPath] = [null],\n            } = await remote.dialog.showOpenDialog({\n              title: \"Directory to download files to\",\n              buttonLabel: \"Download Files Here\",\n              properties: [\n                \"createDirectory\",\n                \"openDirectory\",\n                \"promptToCreate\",\n              ],\n            })\n            if (cancelled || !directoryPath) {\n              changeProgress(null)\n              return\n            }\n\n            const newTaskData = [...oha.taskData]\n            let errors = \"\"\n\n            // Iterate over each task datum and download the url, then convert\n            // the path to a filesystem path\n            for (let i = 0; i < oha.taskData.length; i++) {\n              const td = oha.taskData[i]\n              let urlKey\n              if (td.imageUrl) urlKey = \"imageUrl\"\n              if (td.videoUrl) urlKey = \"videoUrl\"\n              if (!urlKey || !td[urlKey].startsWith(\"http\")) continue\n              const urlToDownload = td[urlKey]\n              try {\n                const pathToFile = await downloadFile(\n                  urlToDownload,\n                  directoryPath,\n                  remote\n                )\n                newTaskData[i] = {\n                  ...td,\n                  [urlKey]: `file://${pathToFile}`,\n                }\n              } catch (e) {\n                errors += `Skipping sample, error downloading taskData[${i}] (${urlToDownload}): ${e.toString()} \\n`\n              }\n              changeProgress((i / oha.taskData.length) * 100)\n            }\n\n            onChangeOHA(setIn(oha, [\"taskData\"], newTaskData))\n\n            changeErrors(errors)\n            changeProgress(100)\n          },\n        },\n      ]}\n    >\n      This transformation will download all the urls from your samples to your\n      computer, and change the paths to filenames. This is usually not a good\n      idea if you're collaborating with others, but is very useful if you're\n      about to build a model.\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport md5 from \"js-md5\"\nimport path from \"path\"\nimport { setIn, without } from \"seamless-immutable\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11,\n})\n\nconst getFfmpegTimeCode = (ms) => {\n  const cs = Math.floor(ms / 10) % 100\n  const ss = Math.floor(ms / 1000) % 60\n  const mn = Math.floor(ms / 1000 / 60) % 60\n  const hr = Math.floor(ms / 1000 / 60 / 60)\n  return [hr, \":\", mn, \":\", ss, \".\", cs]\n    .map((n) => (typeof n === \"number\" ? n.toString().padStart(2, \"0\") : n))\n    .join(\"\")\n}\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Video Frames to Images\"\n      actions={[\n        {\n          text: \"Convert Video Frames to Images\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            let errors = \"\"\n            const pathToFfmpeg = remote.require(\"ffmpeg-static\")\n            if (!pathToFfmpeg) {\n              changeErrors(\n                \"There was an issue using ffmpeg. Please create an issue on the github repository.\"\n              )\n            }\n\n            const shell = remote.require(\"any-shell-escape\")\n            const { exec } = remote.require(\"child_process\")\n            const newTaskData = [...oha.taskData]\n            let transformsPerformed = 0\n\n            for (let i = 0; i < oha.taskData.length; i++) {\n              const td = oha.taskData[i]\n              if (td.videoUrl && td.videoFrameAt !== undefined) {\n                if (td.videoUrl.startsWith(\"http\")) {\n                  errors += `Sample ${i} has a url to a video, videos must be downloaded before extracting frames.`\n                  continue\n                }\n                transformsPerformed++\n\n                const videoPath = td.videoUrl.replace(/^file:\\/\\//, \"\")\n                const imageOutputPath =\n                  videoPath + \"__frameat__\" + td.videoFrameAt + \".jpg\"\n                const ffmpegCommand = shell([\n                  pathToFfmpeg,\n                  \"-y\",\n                  \"-ss\",\n                  getFfmpegTimeCode(td.videoFrameAt),\n                  \"-i\",\n                  videoPath,\n                  \"-frames:v\",\n                  1,\n                  imageOutputPath,\n                ])\n                console.log(\"running:\", ffmpegCommand)\n                await new Promise((resolve, reject) => {\n                  exec(ffmpegCommand, { timeout: 5000 }, (err) => {\n                    if (err) return reject(err)\n                    resolve()\n                  })\n                })\n                newTaskData[i] = {\n                  ...without(\n                    without(oha.taskData[i], \"videoUrl\"),\n                    \"videoFrameAt\"\n                  ),\n                  imageUrl: `file://${imageOutputPath}`,\n                }\n              }\n              changeProgress((i / oha.taskData.length) * 100)\n            }\n\n            if (transformsPerformed === 0) {\n              errors +=\n                \"No transforms were performed, do all of your video samples have frames specified? You may need to convert the keyframes to samples.\"\n            }\n\n            onChangeOHA(setIn(oha, [\"taskData\"], newTaskData))\n\n            changeErrors(errors)\n            changeProgress(100)\n          },\n        },\n      ]}\n    >\n      This transformation will convert samples that reference a video frame into\n      an image. This is a useful step before creating a model. You can only\n      convert videos that are downloaded on your computer. Note: This can take a\n      little while.\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState, useContext, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\"\nimport ImageIcon from \"@material-ui/icons/Image\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport TextFieldsIcon from \"@material-ui/icons/TextFields\"\nimport PetsIcon from \"@material-ui/icons/Pets\"\nimport * as colors from \"@material-ui/core/colors\"\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\nimport ImportTextSnippetsDialog from \"../ImportTextSnippetsDialog\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useElectron from \"../../utils/use-electron\"\nimport classnames from \"classnames\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport TransformVideoKeyframesDialog from \"../TransformVideoKeyframesDialog\"\nimport DownloadURLsDialog from \"../DownloadURLsDialog\"\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\nimport CollectionsIcon from \"@material-ui/icons/Collections\"\nimport TransformVideoFramesToImagesDialog from \"../TransformVideoFramesToImagesDialog\"\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200],\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 36,\n    height: 36,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400],\n    },\n  },\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500],\n  },\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({ Icon1, Icon2, desktopOnly, children, dialog, disabled }) => {\n  const isDesktop = useIsDesktop()\n  disabled =\n    disabled === undefined ? (desktopOnly ? !isDesktop : false) : disabled\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => onChangeDialog(dialog)}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              {Icon1 && Icon2 ? (\n                <>\n                  <Icon1 className={classnames(\"icon\", { disabled })} />\n                  <ArrowForwardIcon\n                    className={classnames(\"icon\", { disabled })}\n                  />\n                  <Icon2 className={classnames(\"icon\", { disabled })} />\n                </>\n              ) : (\n                <Icon1 className={classnames(\"icon\", { disabled })} />\n              )}\n              <div>{children}</div>\n              {desktopOnly && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  DESKTOP ONLY\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nexport default ({ oha, onChangeOHA }) => {\n  const [selectedDialog, changeDialog] = useState()\n  const electron = useElectron()\n  const onChangeDialog = async (dialog) => {\n    switch (dialog) {\n      case \"convert-keyframes-to-samples\": {\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n  const closeDialog = () => changeDialog(null)\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          disabled={oha.interface.type !== \"video_segmentation\"}\n          dialog=\"convert-keyframes-to-samples\"\n          Icon1={OndemandVideoIcon}\n          Icon2={CollectionsIcon}\n        >\n          Convert Video Keyframes to Samples\n        </Button>\n        <Button desktopOnly dialog=\"download-urls\" Icon1={GetAppIcon}>\n          Download URLs\n        </Button>\n        <Button\n          desktopOnly\n          dialog=\"convert-video-frames-to-images\"\n          Icon1={OndemandVideoIcon}\n          Icon2={ImageIcon}\n        >\n          Convert Video Frames to Images\n        </Button>\n        <TransformVideoKeyframesDialog\n          open={selectedDialog === \"convert-keyframes-to-samples\"}\n          onClose={closeDialog}\n          oha={oha}\n          onChangeOHA={(...args) => {\n            onChangeOHA(...args)\n            closeDialog()\n          }}\n        />\n        <DownloadURLsDialog\n          open={selectedDialog === \"download-urls\"}\n          onClose={closeDialog}\n          oha={oha}\n          desktopOnly\n          onChangeOHA={onChangeOHA}\n        ></DownloadURLsDialog>\n        <TransformVideoFramesToImagesDialog\n          open={selectedDialog === \"convert-video-frames-to-images\"}\n          onClose={closeDialog}\n          oha={oha}\n          desktopOnly\n          onChangeOHA={onChangeOHA}\n        ></TransformVideoFramesToImagesDialog>\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React, { useMemo, useState } from \"react\"\nimport DataTable from \"react-data-table-component\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport SampleGrid from \"../SampleGrid\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport AppsIcon from \"@material-ui/icons/Apps\"\nimport SlideshowIcon from \"@material-ui/icons/Slideshow\"\nimport TableChartIcon from \"@material-ui/icons/TableChart\"\nimport Box from \"@material-ui/core/Box\"\nimport ImportIcon from \"@material-ui/icons/Publish\"\nimport ImportPage from \"../ImportPage\"\nimport TransformPage from \"../TransformPage\"\nimport useIsDesktop from \"../../utils/use-is-desktop.js\"\n\nconst Container = styled(\"div\")({\n  padding: 16,\n})\n\nconst ExpandedRowContainer = styled(\"div\")({\n  padding: 8,\n  border: \"#888 solid 1px\",\n  borderTop: \"none\",\n  borderRadius: 4,\n  borderTopLeftRadius: 0,\n  borderTopRightRadius: 0,\n  boxShadow: \"inset 0 3px 3px rgba(0,0,0,0.2)\",\n})\nconst ExpandedRowTitle = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n})\nconst ExpandedRowCode = styled(\"pre\")({ whiteSpace: \"pre-wrap\", fontSize: 11 })\n\nconst ExpandedRow = ({ data }) => {\n  const { _output, ...input } = data\n\n  return (\n    <ExpandedRowContainer>\n      <Grid spacing={2} container>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>taskData[{data.index}]:</ExpandedRowTitle>\n          <ExpandedRowCode>{JSON.stringify(input, null, \"  \")}</ExpandedRowCode>\n        </Grid>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>taskOutput[{data.index}]:</ExpandedRowTitle>\n          <ExpandedRowCode>\n            {JSON.stringify(_output, null, \"  \")}\n          </ExpandedRowCode>\n        </Grid>\n      </Grid>\n    </ExpandedRowContainer>\n  )\n}\n\nexport default ({\n  oha,\n  openSampleInputEditor,\n  openSampleLabelEditor,\n  deleteSample,\n  onChangeOHA,\n}) => {\n  const isDesktop = useIsDesktop()\n  const [currentTab, changeTabState] = useState(\n    (oha.taskData || []).length === 0\n      ? \"import\"\n      : window.localStorage.lastSampleTab || \"grid\"\n  )\n  const changeTab = (tab) => {\n    changeTabState(tab)\n    window.localStorage.lastSampleTab = tab\n  }\n  const columns = useMemo(() => {\n    if (!oha.taskData) return []\n    const columns = [\n      {\n        name: \"Index\",\n        selector: \"index\",\n        sortable: true,\n      },\n    ]\n    const knownKeys = new Set()\n    for (const td of oha.taskData) {\n      for (const key in td) {\n        if (!knownKeys.has(key)) {\n          columns.push({\n            name: key,\n            selector: key,\n          })\n          knownKeys.add(key)\n        }\n      }\n    }\n    columns.push({\n      name: \"Edit\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised onClick={() => openSampleInputEditor(row.index)}>\n          <EditIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    columns.push({\n      name: \"Label\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised onClick={() => openSampleLabelEditor(row.index)}>\n          <BorderColorIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    columns.push({\n      name: \"Delete\",\n      button: true,\n      cell: (row) => (\n        <IconButton raised primary onClick={() => deleteSample(row.index)}>\n          <DeleteIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      ),\n    })\n    return columns\n  }, [oha.taskData, oha.taskOutput])\n\n  const data = useMemo(() => {\n    if (!oha.taskData) return []\n    return oha.taskData.map((td, i) => ({\n      ...td,\n      _output: oha.taskOutput && oha.taskOutput[i] ? oha.taskOutput[i] : {},\n      index: i,\n    }))\n  }, [oha.taskData, oha.taskOutput])\n  return (\n    <Container>\n      <Tabs value={currentTab} onChange={(e, newTab) => changeTab(newTab)}>\n        <Tab icon={<ImportIcon />} label=\"Import\" value=\"import\" />\n        <Tab icon={<SlideshowIcon />} label=\"Transform\" value=\"transform\" />\n        <Tab icon={<AppsIcon />} label=\"Grid\" value=\"grid\" />\n        <Tab icon={<TableChartIcon />} label=\"Table\" value=\"table\" />\n      </Tabs>\n      <Box paddingTop={2} />\n      {currentTab === \"import\" && (\n        <ImportPage\n          isDesktop={isDesktop}\n          onChangeOHA={(newOHA, shouldViewChange) => {\n            onChangeOHA(newOHA)\n            if (shouldViewChange) {\n              changeTab(\"grid\")\n            }\n          }}\n          oha={oha}\n        />\n      )}\n      {currentTab === \"transform\" && (\n        <TransformPage\n          isDesktop={isDesktop}\n          oha={oha}\n          onChangeOHA={(oha, shouldViewChange) => {\n            onChangeOHA(oha)\n            if (shouldViewChange) {\n              changeTab(\"grid\")\n            }\n          }}\n        />\n      )}\n      {currentTab === \"grid\" && (\n        <SampleGrid\n          count={(oha.taskData || []).length}\n          taskData={oha.taskData || []}\n          completed={(oha.taskOutput || []).map(Boolean)}\n          onClick={(sampleIndex) => {\n            openSampleLabelEditor(sampleIndex)\n          }}\n        />\n      )}\n      {currentTab === \"table\" && (\n        <DataTable\n          title=\"Samples\"\n          expandableRowsComponent={<ExpandedRow />}\n          expandableRows\n          dense\n          columns={columns}\n          data={data}\n          pagination\n          paginationPerPage={10}\n          paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n        />\n      )}\n    </Container>\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"],\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an image, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multipleRegions: Boolean(\n        iface.multipleRegions || iface.multipleRegions === undefined\n      ),\n      multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n      regionTypesAllowed: iface.regionTypesAllowed,\n      availableLabels:\n        (iface.availableLabels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"allowMultiple\",\n      title: \"Allow multiple classifications per image?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      allowMultiple: false,\n      availableLabels:\n        (iface.availableLabels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"multiple\",\n      title: \"Allow Multiple Classifications\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        { cellType: \"text\", name: \"displayName\", title: \"Display Name\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multiple: false,\n      labels:\n        (iface.labels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, displayName: a, description: a } : a\n        ) || [],\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\n\nimport { styled } from \"@material-ui/core/styles\"\n\nexport const PaperContainer = styled(\"div\")({\n  margin: 16,\n  padding: 16,\n  border: \"1px solid #ccc\",\n  borderRadius: 4,\n  boxShadow: \"0px 2px 2px rgba(0,0,0,0.1)\",\n})\n\nexport default PaperContainer\n","import React from \"react\"\nimport Survey from \"material-survey/components/Survey\"\n\n// https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2021620\nconst languages = [\n  { value: \"ab\", text: \"Abkhazian\" },\n  { value: \"aa\", text: \"Afar\" },\n  { value: \"af\", text: \"Afrikaans\" },\n  { value: \"ak\", text: \"Akan\" },\n  { value: \"sq\", text: \"Albanian\" },\n  { value: \"am\", text: \"Amharic\" },\n  { value: \"ar\", text: \"Arabic\" },\n  { value: \"an\", text: \"Aragonese\" },\n  { value: \"hy\", text: \"Armenian\" },\n  { value: \"as\", text: \"Assamese\" },\n  { value: \"av\", text: \"Avaric\" },\n  { value: \"ae\", text: \"Avestan\" },\n  { value: \"ay\", text: \"Aymara\" },\n  { value: \"az\", text: \"Azerbaijani\" },\n  { value: \"bm\", text: \"Bambara\" },\n  { value: \"ba\", text: \"Bashkir\" },\n  { value: \"eu\", text: \"Basque\" },\n  { value: \"be\", text: \"Belarusian\" },\n  { value: \"bn\", text: \"Bengali\" },\n  { value: \"bh\", text: \"Bihari languages\" },\n  { value: \"bi\", text: \"Bislama\" },\n  { value: \"bs\", text: \"Bosnian\" },\n  { value: \"br\", text: \"Breton\" },\n  { value: \"bg\", text: \"Bulgarian\" },\n  { value: \"my\", text: \"Burmese\" },\n  { value: \"ca\", text: \"Catalan, Valencian\" },\n  { value: \"km\", text: \"Central Khmer\" },\n  { value: \"ch\", text: \"Chamorro\" },\n  { value: \"ce\", text: \"Chechen\" },\n  { value: \"ny\", text: \"Chichewa, Chewa, Nyanja\" },\n  { value: \"zh\", text: \"Chinese\" },\n  { value: \"cu\", text: \"Church Slavonic, Old Bulgarian, Old Church Slavonic\" },\n  { value: \"cv\", text: \"Chuvash\" },\n  { value: \"kw\", text: \"Cornish\" },\n  { value: \"co\", text: \"Corsican\" },\n  { value: \"cr\", text: \"Cree\" },\n  { value: \"hr\", text: \"Croatian\" },\n  { value: \"cs\", text: \"Czech\" },\n  { value: \"da\", text: \"Danish\" },\n  { value: \"dv\", text: \"Divehi, Dhivehi, Maldivian\" },\n  { value: \"nl\", text: \"Dutch, Flemish\" },\n  { value: \"dz\", text: \"Dzongkha\" },\n  { value: \"en\", text: \"English\" },\n  { value: \"eo\", text: \"Esperanto\" },\n  { value: \"et\", text: \"Estonian\" },\n  { value: \"ee\", text: \"Ewe\" },\n  { value: \"fo\", text: \"Faroese\" },\n  { value: \"fj\", text: \"Fijian\" },\n  { value: \"fi\", text: \"Finnish\" },\n  { value: \"fr\", text: \"French\" },\n  { value: \"ff\", text: \"Fulah\" },\n  { value: \"gd\", text: \"Gaelic, Scottish Gaelic\" },\n  { value: \"gl\", text: \"Galician\" },\n  { value: \"lg\", text: \"Ganda\" },\n  { value: \"ka\", text: \"Georgian\" },\n  { value: \"de\", text: \"German\" },\n  { value: \"ki\", text: \"Gikuyu, Kikuyu\" },\n  { value: \"el\", text: \"Greek (Modern)\" },\n  { value: \"kl\", text: \"Greenlandic, Kalaallisut\" },\n  { value: \"gn\", text: \"Guarani\" },\n  { value: \"gu\", text: \"Gujarati\" },\n  { value: \"ht\", text: \"Haitian, Haitian Creole\" },\n  { value: \"ha\", text: \"Hausa\" },\n  { value: \"he\", text: \"Hebrew\" },\n  { value: \"hz\", text: \"Herero\" },\n  { value: \"hi\", text: \"Hindi\" },\n  { value: \"ho\", text: \"Hiri Motu\" },\n  { value: \"hu\", text: \"Hungarian\" },\n  { value: \"is\", text: \"Icelandic\" },\n  { value: \"io\", text: \"Ido\" },\n  { value: \"ig\", text: \"Igbo\" },\n  { value: \"id\", text: \"Indonesian\" },\n  {\n    value: \"ia\",\n    text: \"Interlingua (International Auxiliary Language Association)\",\n  },\n  { value: \"ie\", text: \"Interlingue\" },\n  { value: \"iu\", text: \"Inuktitut\" },\n  { value: \"ik\", text: \"Inupiaq\" },\n  { value: \"ga\", text: \"Irish\" },\n  { value: \"it\", text: \"Italian\" },\n  { value: \"ja\", text: \"Japanese\" },\n  { value: \"jv\", text: \"Javanese\" },\n  { value: \"kn\", text: \"Kannada\" },\n  { value: \"kr\", text: \"Kanuri\" },\n  { value: \"ks\", text: \"Kashmiri\" },\n  { value: \"kk\", text: \"Kazakh\" },\n  { value: \"rw\", text: \"Kinyarwanda\" },\n  { value: \"kv\", text: \"Komi\" },\n  { value: \"kg\", text: \"Kongo\" },\n  { value: \"ko\", text: \"Korean\" },\n  { value: \"kj\", text: \"Kwanyama, Kuanyama\" },\n  { value: \"ku\", text: \"Kurdish\" },\n  { value: \"ky\", text: \"Kyrgyz\" },\n  { value: \"lo\", text: \"Lao\" },\n  { value: \"la\", text: \"Latin\" },\n  { value: \"lv\", text: \"Latvian\" },\n  { value: \"lb\", text: \"Letzeburgesch, Luxembourgish\" },\n  { value: \"li\", text: \"Limburgish, Limburgan, Limburger\" },\n  { value: \"ln\", text: \"Lingala\" },\n  { value: \"lt\", text: \"Lithuanian\" },\n  { value: \"lu\", text: \"Luba-Katanga\" },\n  { value: \"mk\", text: \"Macedonian\" },\n  { value: \"mg\", text: \"Malagasy\" },\n  { value: \"ms\", text: \"Malay\" },\n  { value: \"ml\", text: \"Malayalam\" },\n  { value: \"mt\", text: \"Maltese\" },\n  { value: \"gv\", text: \"Manx\" },\n  { value: \"mi\", text: \"Maori\" },\n  { value: \"mr\", text: \"Marathi\" },\n  { value: \"mh\", text: \"Marshallese\" },\n  { value: \"ro\", text: \"Moldovan, Moldavian, Romanian\" },\n  { value: \"mn\", text: \"Mongolian\" },\n  { value: \"na\", text: \"Nauru\" },\n  { value: \"nv\", text: \"Navajo, Navaho\" },\n  { value: \"nd\", text: \"Northern Ndebele\" },\n  { value: \"ng\", text: \"Ndonga\" },\n  { value: \"ne\", text: \"Nepali\" },\n  { value: \"se\", text: \"Northern Sami\" },\n  { value: \"no\", text: \"Norwegian\" },\n  { value: \"nb\", text: \"Norwegian Bokmål\" },\n  { value: \"nn\", text: \"Norwegian Nynorsk\" },\n  { value: \"ii\", text: \"Nuosu, Sichuan Yi\" },\n  { value: \"oc\", text: \"Occitan (post 1500)\" },\n  { value: \"oj\", text: \"Ojibwa\" },\n  { value: \"or\", text: \"Oriya\" },\n  { value: \"om\", text: \"Oromo\" },\n  { value: \"os\", text: \"Ossetian, Ossetic\" },\n  { value: \"pi\", text: \"Pali\" },\n  { value: \"pa\", text: \"Panjabi, Punjabi\" },\n  { value: \"ps\", text: \"Pashto, Pushto\" },\n  { value: \"fa\", text: \"Persian\" },\n  { value: \"pl\", text: \"Polish\" },\n  { value: \"pt\", text: \"Portuguese\" },\n  { value: \"qu\", text: \"Quechua\" },\n  { value: \"rm\", text: \"Romansh\" },\n  { value: \"rn\", text: \"Rundi\" },\n  { value: \"ru\", text: \"Russian\" },\n  { value: \"sm\", text: \"Samoan\" },\n  { value: \"sg\", text: \"Sango\" },\n  { value: \"sa\", text: \"Sanskrit\" },\n  { value: \"sc\", text: \"Sardinian\" },\n  { value: \"sr\", text: \"Serbian\" },\n  { value: \"sn\", text: \"Shona\" },\n  { value: \"sd\", text: \"Sindhi\" },\n  { value: \"si\", text: \"Sinhala, Sinhalese\" },\n  { value: \"sk\", text: \"Slovak\" },\n  { value: \"sl\", text: \"Slovenian\" },\n  { value: \"so\", text: \"Somali\" },\n  { value: \"st\", text: \"Sotho, Southern\" },\n  { value: \"nr\", text: \"South Ndebele\" },\n  { value: \"es\", text: \"Spanish, Castilian\" },\n  { value: \"su\", text: \"Sundanese\" },\n  { value: \"sw\", text: \"Swahili\" },\n  { value: \"ss\", text: \"Swati\" },\n  { value: \"sv\", text: \"Swedish\" },\n  { value: \"tl\", text: \"Tagalog\" },\n  { value: \"ty\", text: \"Tahitian\" },\n  { value: \"tg\", text: \"Tajik\" },\n  { value: \"ta\", text: \"Tamil\" },\n  { value: \"tt\", text: \"Tatar\" },\n  { value: \"te\", text: \"Telugu\" },\n  { value: \"th\", text: \"Thai\" },\n  { value: \"bo\", text: \"Tibetan\" },\n  { value: \"ti\", text: \"Tigrinya\" },\n  { value: \"to\", text: \"Tonga (Tonga Islands)\" },\n  { value: \"ts\", text: \"Tsonga\" },\n  { value: \"tn\", text: \"Tswana\" },\n  { value: \"tr\", text: \"Turkish\" },\n  { value: \"tk\", text: \"Turkmen\" },\n  { value: \"tw\", text: \"Twi\" },\n  { value: \"ug\", text: \"Uighur, Uyghur\" },\n  { value: \"uk\", text: \"Ukrainian\" },\n  { value: \"ur\", text: \"Urdu\" },\n  { value: \"uz\", text: \"Uzbek\" },\n  { value: \"ve\", text: \"Venda\" },\n  { value: \"vi\", text: \"Vietnamese\" },\n  { value: \"vo\", text: \"Volap_k\" },\n  { value: \"wa\", text: \"Walloon\" },\n  { value: \"cy\", text: \"Welsh\" },\n  { value: \"fy\", text: \"Western Frisian\" },\n  { value: \"wo\", text: \"Wolof\" },\n  { value: \"xh\", text: \"Xhosa\" },\n  { value: \"yi\", text: \"Yiddish\" },\n  { value: \"yo\", text: \"Yoruba\" },\n  { value: \"za\", text: \"Zhuang, Chuang\" },\n  { value: \"zu\", text: \"Zulu\" },\n]\n\nconst form = {\n  questions: [\n    {\n      name: \"transcriptionType\",\n      title: \"Transcription Type\",\n      type: \"dropdown\",\n      choices: [\"simple\", \"proper\"],\n    },\n    {\n      name: \"phraseBank\",\n      title: \"Phrase Bank\",\n      description: \"URL of single-column CSV or TXT file with allowed phrases\",\n      type: \"text\",\n    },\n    {\n      name: \"onlyUseWordsInPhraseBank\",\n      title: \"Only Use Words In Phrase Bank\",\n      type: \"boolean\",\n    },\n    {\n      name: \"language\",\n      title: \"Language\",\n      type: \"dropdown\",\n      // https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2858621\n      choices: languages,\n    },\n    {\n      name: \"description\",\n      title: \"Description\",\n      type: \"multiline-text\",\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        if (newValue.value) {\n          onChange({ ...iface, [questionId]: newValue.value })\n        } else {\n          onChange({ ...iface, [questionId]: newValue })\n        }\n      }}\n      form={form}\n    />\n  )\n}\n","import React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"description\",\n      title: \"Description\",\n      type: \"multiline-text\",\n    },\n    {\n      name: \"overlapAllowed\",\n      title: \"Overlap Allowed\",\n      type: \"boolean\",\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      type: \"matrixdynamic\",\n      hasOther: true,\n      columns: [\n        {\n          cellType: \"text\",\n          name: \"id\",\n          title: \"ID\",\n        },\n        {\n          cellType: \"text\",\n          name: \"displayName\",\n          title: \"Display Name\",\n        },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(() => ({\n    description: iface.description,\n    overlapAllowed: Boolean(\n      iface.overlapAllowed || iface.overlapAllowed === undefined\n    ),\n    labels: (iface.labels || []).map((column) =>\n      typeof column === \"string\"\n        ? {\n            id: column,\n            displayName: column,\n            description: column,\n          }\n        : column\n    ),\n  }))\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n      defaultAnswers={defaultAnswers}\n    />\n  )\n}\n","// @flow\n\nimport React, { useRef, useState } from \"react\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\"\nimport CancelIcon from \"@material-ui/icons/Cancel\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Survey from \"material-survey/components/Survey\"\nimport Grid from \"@material-ui/core/Grid\"\nimport { setIn } from \"seamless-immutable\"\n\nconst ButtonsContainer = styled(\"div\")({\n  textAlign: \"right\",\n})\nconst NoQuestions = styled(\"div\")({\n  fontSize: 18,\n  color: colors.grey[500],\n  fontWeight: \"bold\",\n  textAlign: \"center\",\n  padding: 16,\n})\n\nconst Question = styled(\"div\")({\n  position: \"relative\",\n  padding: 16,\n  margin: 16,\n  borderLeft: `4px solid ${colors.blue[400]}`,\n  // backgroundColor: colors.grey[50],\n  borderRadius: 4,\n  paddingRight: 64,\n  \"& .quitButton\": {\n    position: \"absolute\",\n    right: 4,\n    top: 4,\n  },\n  \"& > *\": {\n    margin: 8,\n  },\n})\nconst PreviewHeader = styled(\"div\")({\n  fontSize: 12,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  textTransform: \"uppercase\",\n  margin: 16,\n  marginBottom: 32,\n})\n\nconst StyledButton = styled(Button)({\n  position: \"relative\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n  },\n})\n\nexport default ({ iface, onChange }) => {\n  const anchorEl = useRef()\n  const [menuOpen, changeMenuOpen] = useState(false)\n  const { questions = [] } = iface.surveyjs || {}\n  return (\n    <div>\n      {questions.length === 0 ? (\n        <NoQuestions>No Inputs, Click Add Input Below</NoQuestions>\n      ) : (\n        questions.map((q, i) => (\n          <Question key={i}>\n            <div style={{ display: \"flex\" }}>\n              <TextField\n                variant=\"outlined\"\n                label=\"Name / Identifier\"\n                value={q.name || \"\"}\n                onChange={(e) => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"name\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n              <TextField\n                style={{ marginLeft: 8, flexGrow: 1 }}\n                variant=\"outlined\"\n                label=\"Title / Instruction\"\n                value={q.title || \"\"}\n                onChange={(e) => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"title\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n            </div>\n            <Grid container>\n              <Grid item xs={6}>\n                {q.choices && (\n                  <TextField\n                    style={{\n                      marginTop: 8,\n                      paddingRight: 8,\n                      boxSizing: \"border-box\",\n                    }}\n                    variant=\"outlined\"\n                    fullWidth\n                    label=\"Choices (One per Line)\"\n                    defaultValue={q.choices.join(\"\\n\") || \"\"}\n                    onChange={(e) => {\n                      onChange(\n                        setIn(\n                          iface,\n                          [\"surveyjs\", \"questions\", i, \"choices\"],\n                          e.target.value.split(\"\\n\")\n                        )\n                      )\n                    }}\n                    multiline\n                    rows={6}\n                  />\n                )}\n              </Grid>\n              <Grid item xs={6}>\n                <PreviewHeader>Preview</PreviewHeader>\n                <Survey\n                  noActions\n                  variant=\"flat\"\n                  key={q}\n                  form={{ questions: [q] }}\n                />\n              </Grid>\n            </Grid>\n            <IconButton\n              className=\"quitButton\"\n              onClick={() => {\n                onChange(\n                  setIn(\n                    iface,\n                    [\"surveyjs\", \"questions\"],\n                    [...questions.slice(0, i), ...questions.slice(i + 1)]\n                  )\n                )\n              }}\n            >\n              <CancelIcon />\n            </IconButton>\n          </Question>\n        ))\n      )}\n      <ButtonsContainer>\n        <StyledButton onClick={(e) => changeMenuOpen(true)} ref={anchorEl}>\n          <AddCircleIcon className=\"icon\" />\n          Add Input\n        </StyledButton>\n      </ButtonsContainer>\n      <Menu\n        anchorEl={anchorEl && anchorEl.current}\n        open={menuOpen}\n        onClose={() => changeMenuOpen(false)}\n      >\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"text\",\n                    title: \"New Text Input\",\n                  },\n                ])\n              )\n            )\n          }}\n        >\n          Text Input\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"radiogroup\",\n                  title: \"New Exclusive Choice Input\",\n                  choices: [\"Yes\", \"Maybe\", \"No\"],\n                })\n              )\n            )\n          }}\n        >\n          Exclusive Choice\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"checkbox\",\n                  title: \"New Checkbox Input\",\n                  choices: [\"A\", \"B\", \"C\"],\n                })\n              )\n            )\n          }}\n        >\n          Checkboxes\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat({\n                  name: \"input\" + questions.length,\n                  type: \"boolean\",\n                  title: \"New Boolean Input\",\n                })\n              )\n            )\n          }}\n        >\n          Boolean\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.questions || []).concat({\n                  name: \"input\" + questions.length,\n                  type: \"dropdown\",\n                  title: \"New Dropdown Input\",\n                  choices: [\"A\", \"B\", \"C\"],\n                })\n              )\n            )\n          }}\n        >\n          Dropdown / Autocomplete\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"multiple-dropdown\",\n                    title: \"New Multiple Dropdown Input\",\n                    choices: [\"A\", \"B\", \"C\"],\n                  },\n                ])\n              )\n            )\n          }}\n        >\n          Multiple Item Dropdown / Autocomplete\n        </MenuItem>\n      </Menu>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from \"react\"\nimport ConfigureInterface from \"../ConfigureInterface\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { setIn } from \"seamless-immutable\"\n\nconst Fields = styled(\"div\")({})\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  marginTop: 16,\n  border: \"2px solid #000\",\n})\nconst StyledButton = styled(Button)({\n  width: \"100%\",\n  margin: 16,\n  marginLeft: 0,\n})\n\nexport default ({ iface, onChange }) => {\n  return (\n    <React.Fragment>\n      <Fields>\n        {(iface.fields || []).map((f, fieldIndex) => (\n          <StyledExpansionPanel key={fieldIndex}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n              {f.fieldName}\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              <Box display=\"flex\" flexDirection=\"column\">\n                <TextField\n                  label=\"Field Name\"\n                  value={f.fieldName}\n                  onChange={(e) => {\n                    onChange(\n                      setIn(\n                        [\"fields\", fieldIndex, \"fieldName\"],\n                        e.target.value,\n                        iface\n                      )\n                    )\n                  }}\n                />\n                <ConfigureInterface\n                  iface={f.interface}\n                  onChange={(newFieldInterface) => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.map((field) =>\n                        field.fieldName === f.fieldName\n                          ? { ...f, interface: newFieldInterface }\n                          : field\n                      ),\n                    })\n                  }}\n                />\n                <Button\n                  onClick={() => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.filter(\n                        ({ fieldName }) => fieldName !== f.fieldName\n                      ),\n                    })\n                  }}\n                >\n                  Remove Field\n                </Button>\n              </Box>\n            </ExpansionPanelDetails>\n          </StyledExpansionPanel>\n        ))}\n        <StyledButton\n          onClick={() => {\n            onChange(\n              setIn(\n                iface,\n                [\"fields\"],\n                (iface.fields || []).concat({\n                  fieldOrder: (iface.fields || []).length,\n                  fieldName: \"New Field\",\n                  interface: {\n                    type: \"empty\",\n                  },\n                })\n              )\n            )\n          }}\n        >\n          Add New Field\n        </StyledButton>\n      </Fields>\n    </React.Fragment>\n  )\n}\n","import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst ExplanationTextHeader = styled(\"div\")({\n  textAlign: \"center\",\n  paddingTop: 30,\n  paddingBottom: 50,\n  userSelect: \"none\",\n})\n\nconst ExplanationText = styled(\"h3\")({\n  fontWeight: \"bold\",\n  color: colors.grey[500],\n})\n\nconst GithubLink = styled(\"a\")({\n  color: colors.blue[500],\n})\n\nconst Configure3D = () => {\n  return (\n    <ExplanationTextHeader>\n      <ExplanationText>\n        Hey, this isn't currently available, but if you'd like this\n        functionality please let us know by leaving a thumbs up on{\" \"}\n        <GithubLink\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/UniversalDataTool/universal-data-tool/issues/20\"\n        >\n          this\n        </GithubLink>{\" \"}\n        github issue.\n      </ExplanationText>\n    </ExplanationTextHeader>\n  )\n}\n\nexport default Configure3D\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"],\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\",\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an video frames, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\",\n        },\n      ],\n    },\n  ],\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multipleRegions: Boolean(\n        iface.multipleRegions || iface.multipleRegions === undefined\n      ),\n      multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n      regionTypesAllowed: iface.regionTypesAllowed,\n      availableLabels:\n        (iface.availableLabels || []).map((a) =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || [],\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport templates from \"../StartingPage/templates\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\nimport * as colors from \"@material-ui/core/colors\"\nimport ConfigureImageSegmentation from \"../ConfigureImageSegmentation\"\nimport ConfigureImageClassification from \"../ConfigureImageClassification\"\nimport ConfigureTextClassification from \"../ConfigureTextClassification\"\nimport PaperContainer from \"../PaperContainer\"\nimport ConfigureAudioTranscription from \"../ConfigureAudioTranscription\"\nimport ConfigureNLP from \"../ConfigureNLP\"\nimport ConfigureDataEntry from \"../ConfigureDataEntry\"\nimport ConfigureComposite from \"../ConfigureComposite\"\nimport Configure3D from \"../Configure3D\"\nimport ConfigureVideoSegmentation from \"../ConfigureVideoSegmentation\"\nimport { setIn } from \"seamless-immutable\"\n\nconst NoOptions = styled(\"div\")({\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n  color: colors.grey[500],\n  paddingTop: 30,\n  paddingBottom: 50,\n})\n\nconst TypeButton = styled(Button)({\n  margin: 8,\n  \"& .icon\": {\n    marginRight: 8,\n    color: \"#888\",\n  },\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  \"&.selected\": {\n    backgroundColor: colors.blue[500],\n    color: \"#fff\",\n    \"& .icon\": {\n      color: \"#fff\",\n    },\n  },\n})\n\nexport const Heading = styled(\"div\")({\n  fontWeight: \"bold\",\n  textTransform: \"uppercase\",\n  fontSize: 12,\n  paddingLeft: 8,\n  marginBottom: 8,\n  marginTop: 16,\n  color: colors.grey[700],\n})\n\nconst SelectType = ({ currentlySelected, onChange }) => {\n  return templates.map((t) => (\n    <TypeButton\n      key={t.oha.interface.type || \"empty\"}\n      className={currentlySelected === t.oha.interface.type ? \"selected\" : \"\"}\n      variant=\"outlined\"\n      onClick={() => {\n        if (currentlySelected !== t.oha.interface.type) {\n          onChange(t.oha.interface.type)\n        }\n      }}\n    >\n      <t.Icon className=\"icon\" />\n      {t.name}\n    </TypeButton>\n  ))\n}\n\nexport const ConfigureInterface = ({\n  iface = {},\n  onChange,\n  onClickEditJSON,\n}) => {\n  return (\n    <PaperContainer>\n      <SelectType\n        currentlySelected={iface.type}\n        onChange={(type) => {\n          onChange(setIn(iface, [\"type\"], type))\n        }}\n      />\n      <Heading>Options</Heading>\n      <Box paddingTop={2} />\n      {!iface.type && <NoOptions>Select a Type</NoOptions>}\n      {iface.type === \"image_segmentation\" && (\n        <ConfigureImageSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"image_classification\" && (\n        <ConfigureImageClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"composite\" && (\n        <ConfigureComposite iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"data_entry\" && (\n        <ConfigureDataEntry iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"audio_transcription\" && (\n        <ConfigureAudioTranscription iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_entity_recognition\" && (\n        <ConfigureNLP iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_classification\" && (\n        <ConfigureTextClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"video_segmentation\" && (\n        <ConfigureVideoSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"3d_bounding_box\" && (\n        <Configure3D iface={iface} onChange={onChange} />\n      )}\n    </PaperContainer>\n  )\n}\n\nexport default ConfigureInterface\n","// @flow weak\n\nimport React from \"react\"\nimport ConfigureInterface, { Heading } from \"../ConfigureInterface\"\nimport { useUpdate } from \"react-use\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport PaperContainer from \"../PaperContainer\"\nimport Box from \"@material-ui/core/Box\"\nimport Paper from \"@material-ui/core/Paper\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\n\nconst Button = styled(MuiButton)({\n  margin: 8,\n})\n\nexport default ({ oha, onChange, onClickEditJSON, onClearLabelData }) => {\n  const { interface: iface } = oha\n  const posthog = usePosthog()\n  const forceUpdate = useUpdate()\n  const isDesktop = useIsDesktop()\n\n  return (\n    <div>\n      <ConfigureInterface\n        iface={iface}\n        onChange={onChange}\n        onClickEditJSON={onClickEditJSON}\n      />\n      <PaperContainer>\n        <Heading>Advanced</Heading>\n        <Box padding={2}>\n          <Button onClick={onClickEditJSON} variant=\"outlined\">\n            Edit JSON\n          </Button>\n          <Button\n            onClick={() => {\n              if (\n                window.confirm(\n                  \"Are you sure you want to delete all your label data? Click OK to delete.\"\n                )\n              ) {\n                onClearLabelData()\n              }\n            }}\n            variant=\"outlined\"\n          >\n            Clear All Labels\n          </Button>\n          <Button\n            onClick={onClickEditJSON}\n            variant=\"outlined\"\n            onClick={() => {\n              if (posthog.has_opted_out_captureing()) {\n                posthog.opt_in_captureing()\n              } else {\n                posthog.opt_out_captureing()\n              }\n              forceUpdate()\n            }}\n          >\n            {posthog.has_opted_out_captureing() ? \"Enable\" : \"Disable\"}{\" \"}\n            Telemetry\n          </Button>\n        </Box>\n      </PaperContainer>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport AceEditor from \"react-ace\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nexport default ({ open, sampleIndex, sampleInput, onChange, onClose }) => {\n  const [text, changeText] = useState()\n  const [error, changeError] = useState()\n  useEffect(() => {\n    const newText = JSON.stringify(sampleInput, null, \"  \")\n    if (newText !== text) {\n      changeText(newText)\n      changeError(null)\n    }\n  }, [sampleIndex])\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title={`taskData[${sampleIndex}]`}\n    >\n      <AceEditor\n        theme=\"github\"\n        mode=\"javascript\"\n        width=\"100%\"\n        value={text}\n        editorProps={{ $blockScrolling: Infinity }}\n        onChange={(t) => {\n          changeText(t)\n          changeError(null)\n          try {\n            onChange(JSON.parse(t))\n          } catch (e) {\n            changeError(e.toString())\n          }\n        }}\n      />\n      <Box color=\"red\">{error}</Box>\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({})\nconst Stat = styled(\"div\")({\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  margin: 16,\n})\nconst Label = styled(\"div\")({\n  fontSize: 14,\n  fontWeight: \"bold\",\n  color: colors.grey[700],\n})\nconst Value = styled(\"div\")({\n  fontSize: 32,\n  marginTop: 8,\n})\n\nexport default ({ stats }) => {\n  return (\n    <Container>\n      {stats.map((s) => (\n        <Stat key={s.name}>\n          <Label>{s.name}</Label>\n          <Value>{s.value}</Value>\n        </Stat>\n      ))}\n    </Container>\n  )\n}\n","// @flow\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useReducer,\n} from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\nimport classNames from \"classnames\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"flex-start\",\n    pointerEvents: \"none\",\n  },\n  msgBox: {\n    display: \"flex\",\n    backgroundColor: colors.blue[700],\n    fontSize: 12,\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4,\n    boxShadow: \"0px 3px 8px rgba(0,0,0,0.5)\",\n    \"&.warning\": {\n      backgroundColor: colors.orange[700],\n    },\n    \"&.error\": {\n      backgroundColor: colors.red[700],\n    },\n  },\n})\n\nconst REFRESH_INTERVAL = 100\n\nconst ToastContext = createContext()\n\nexport const useToasts = () => {\n  const { addToast } = useContext(ToastContext)\n\n  return { addToast }\n}\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, changeToasts] = useReducer((state = [], action) => {\n    if (action.type === \"add\") {\n      const fullLife =\n        action.messageType === \"info\"\n          ? 2000\n          : action.messageType === \"warning\"\n          ? 5000\n          : 5000\n\n      return state.concat([\n        {\n          id: Math.random().toString().split(\".\")[1],\n          message: action.message,\n          type: action.messageType,\n          life: fullLife,\n          fullLife,\n        },\n      ])\n    } else if (action.type === \"tick\") {\n      return state\n        .map((msg) => ({\n          ...msg,\n          life: msg.life - REFRESH_INTERVAL,\n        }))\n        .filter((msg) => msg.life > 0)\n    }\n    return state\n  }, [])\n  const c = useStyles()\n\n  useEffect(() => {\n    if (toasts.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeToasts({ type: \"tick\" })\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [toasts])\n\n  const addToast = (message: string, messageType: string = \"info\") =>\n    changeToasts({ type: \"add\", message, messageType })\n\n  return (\n    <>\n      <ToastContext.Provider value={{ toasts, addToast }}>\n        {children}\n      </ToastContext.Provider>\n      <div className={c.root}>\n        {toasts.map((msg) => (\n          <Collapse key={msg.id} in={msg.life < msg.fullLife}>\n            <Fade in={msg.life > 600}>\n              <div className={classNames(c.msgBox, msg.type)}>\n                {msg.message}\n              </div>\n            </Fade>\n          </Collapse>\n        ))}\n      </div>\n    </>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useReducer } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nimport Grid from \"@material-ui/core/Grid\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Typography from \"@material-ui/core/Typography\"\nimport GithubIcon from \"../Header/GithubIcon.js\"\nimport Header from \"../Header\"\nimport brace from \"brace\"\nimport AceEditor from \"react-ace\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport SaveIcon from \"@material-ui/icons/Save\"\nimport defaultOHAObject from \"./default-oha-object\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport EditableTitleText from \"./EditableTitleText.js\"\nimport SamplesView from \"../SamplesView\"\nimport InterfacePage from \"../InterfacePage\"\nimport EditSampleDialog from \"../EditSampleDialog\"\nimport SampleGrid from \"../SampleGrid\"\nimport PaperContainer from \"../PaperContainer\"\nimport Stats from \"../Stats\"\nimport useElectron from \"../../utils/use-electron\"\nimport moment from \"moment\"\nimport duration from \"duration\"\nimport useTimeToCompleteSample from \"../../utils/use-time-to-complete-sample.js\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { useToasts } from \"../Toasts\"\nimport { setIn, without } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\n\nimport \"brace/mode/javascript\"\nimport \"brace/theme/github\"\n\nconst useStyles = makeStyles({\n  headerButton: {\n    color: \"#fff\",\n  },\n  saveIcon: {\n    marginRight: 4,\n  },\n  editIcon: {\n    marginLeft: 4,\n  },\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n})\n\nconst headerTabs = [\"Settings\", \"Samples\", \"Label\"]\n\nexport default ({\n  datasetName = \"Universal Data Tool\",\n  oha,\n  content,\n  inSession,\n  url,\n  fileName = \"unnamed\",\n  onChangeFileName,\n  onChangeOHA = () => null,\n  onFileDrop,\n  initialMode = \"settings\", //= \"samples\"\n  selectedBrush = \"complete\",\n}) => {\n  const c = useStyles()\n  const { addToast } = useToasts()\n  const [mode, changeMode] = useState(initialMode)\n  const [singleSampleOHA, changeSingleSampleOHA] = useState()\n  const [sampleInputEditor, changeSampleInputEditor] = useState({})\n  const [jsonText, changeJSONText] = useState()\n  const { remote, ipcRenderer } = useElectron() || {}\n\n  const [\n    timeToCompleteSample,\n    changeSampleTimeToComplete,\n  ] = useTimeToCompleteSample()\n\n  useEffect(() => {\n    if (!ipcRenderer) return\n    const onOpenSettingsPage = () => changeMode(\"settings\")\n    const onOpenSamplesPage = () => changeMode(\"samples\")\n    const onOpenLabelPage = () => changeMode(\"label\")\n    ipcRenderer.on(\"open-settings-page\", onOpenSettingsPage)\n    ipcRenderer.on(\"open-samples-page\", onOpenSamplesPage)\n    ipcRenderer.on(\"open-label-page\", onOpenLabelPage)\n    return () => {\n      ipcRenderer.removeListener(\"open-settings-page\", onOpenSettingsPage)\n      ipcRenderer.removeListener(\"open-samples-page\", onOpenSamplesPage)\n      ipcRenderer.removeListener(\"open-label-page\", onOpenLabelPage)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (mode === \"json\") {\n      changeJSONText(JSON.stringify(oha, null, \"  \"))\n    }\n  }, [mode])\n\n  useEffect(() => {\n    if (!jsonText || mode !== \"json\") return\n    try {\n      // TODO schema validation etc.\n      onChangeOHA(JSON.parse(jsonText))\n    } catch (e) {}\n  }, [jsonText])\n\n  const onChangeTab = useEventCallback((tab) => changeMode(tab.toLowerCase()))\n\n  let percentComplete = 0\n  if (\n    oha.taskOutput &&\n    oha.taskOutput.length > 0 &&\n    oha.taskData &&\n    oha.taskData.length > 0\n  ) {\n    percentComplete =\n      oha.taskOutput.filter(Boolean).length / oha.taskData.length\n  }\n\n  return (\n    <div className={c.container}>\n      <Header\n        title={\n          inSession ? (\n            <TextField\n              label=\"Share Link\"\n              value={url}\n              variant=\"outlined\"\n              size=\"small\"\n            />\n          ) : (\n            <EditableTitleText\n              label=\"File Name\"\n              onChange={onChangeFileName}\n              value={fileName || \"\"}\n            />\n          )\n        }\n        onChangeTab={onChangeTab}\n        currentTab={mode}\n        tabs={headerTabs}\n      />\n      <div style={{ overflowY: \"scroll\" }}>\n        {mode === \"json\" && (\n          <AceEditor\n            theme=\"github\"\n            mode=\"javascript\"\n            width=\"100%\"\n            value={jsonText || \"\"}\n            editorProps={{ $blockScrolling: Infinity }}\n            onChange={(t) => changeJSONText(t)}\n          />\n        )}\n        {mode === \"settings\" && (\n          <InterfacePage\n            onClickEditJSON={() => changeMode(\"json\")}\n            oha={oha}\n            onClearLabelData={() => {\n              onChangeOHA(without(oha, \"taskOutput\"))\n            }}\n            onChange={(iface) => {\n              if (\n                iface.type !== oha.interface.type &&\n                oha.interface.type !== \"empty\" &&\n                oha.taskOutput &&\n                oha.taskOutput.some(Boolean)\n              ) {\n                addToast(\n                  \"Warning: Changing label types can cause label data issues. You might want to clear all label data.\",\n                  \"error\"\n                )\n              }\n              onChangeOHA({\n                ...oha,\n                interface: iface,\n              })\n            }}\n          />\n        )}\n        {mode === \"samples\" && (\n          <SamplesView\n            oha={oha}\n            openSampleLabelEditor={(sampleIndex) => {\n              changeSingleSampleOHA({\n                ...oha,\n                taskData: [oha.taskData[sampleIndex]],\n                taskOutput: [(oha.taskOutput || [])[sampleIndex]],\n                sampleIndex,\n                annotationStartTime: Date.now(),\n              })\n              changeMode(\"label\")\n            }}\n            openSampleInputEditor={(sampleIndex) => {\n              changeSampleInputEditor({ open: true, sampleIndex })\n            }}\n            deleteSample={(sampleIndex) => {\n              const newTaskData = [...oha.taskData]\n              const newTaskOutput = oha.taskOutput\n                ? [...oha.taskOutput]\n                : undefined\n              newTaskData.splice(sampleIndex, 1)\n              if (newTaskOutput) {\n                newTaskOutput.splice(sampleIndex, 1)\n              }\n              onChangeOHA({\n                ...oha,\n                taskData: newTaskData,\n                taskOutput: newTaskOutput,\n              })\n            }}\n            onChangeOHA={onChangeOHA}\n          />\n        )}\n        {mode === \"label\" && singleSampleOHA ? (\n          <UniversalDataViewer\n            datasetName={`Sample ${singleSampleOHA.sampleIndex}`}\n            onSaveTaskOutputItem={(relativeIndex, output) => {\n              let newOHA = oha\n              if (!newOHA.taskOutput) {\n                newOHA = setIn(\n                  newOHA,\n                  [\"taskOutput\"],\n                  (newOHA.taskData || []).map((td) => null)\n                )\n              }\n              if (\n                newOHA.taskOutput.length < newOHA.taskData.length ||\n                newOHA.taskOutput.includes(undefined)\n              ) {\n                newOHA = setIn(\n                  newOHA,\n                  [\"taskOutput\"],\n                  newOHA.taskData.map((td, tdi) =>\n                    newOHA.taskOutput[tdi] === undefined\n                      ? null\n                      : newOHA.taskOutput[tdi]\n                  )\n                )\n              }\n              newOHA = setIn(\n                newOHA,\n                [\"taskOutput\", singleSampleOHA.sampleIndex],\n                output\n              )\n\n              if (\n                singleSampleOHA.taskData[0].brush !== selectedBrush &&\n                !(\n                  singleSampleOHA.taskData[0].brush === undefined &&\n                  selectedBrush === \"complete\"\n                )\n              ) {\n                newOHA = setIn(\n                  newOHA,\n                  [\"taskData\", singleSampleOHA.sampleIndex, \"brush\"],\n                  selectedBrush\n                )\n              }\n              changeSingleSampleOHA(\n                setIn(singleSampleOHA, [\"taskOutput\", relativeIndex], output)\n              )\n              onChangeOHA(newOHA)\n            }}\n            onExit={(nextAction = \"nothing\") => {\n              if (singleSampleOHA.startTime) {\n                changeSampleTimeToComplete(\n                  Date.now() - singleSampleOHA.startTime\n                )\n              }\n              const { sampleIndex } = singleSampleOHA\n              switch (nextAction) {\n                case \"go-to-next\":\n                  if (sampleIndex !== oha.taskData.length - 1) {\n                    changeSingleSampleOHA({\n                      ...oha,\n                      taskData: [oha.taskData[sampleIndex + 1]],\n                      taskOutput: [(oha.taskOutput || [])[sampleIndex + 1]],\n                      sampleIndex: sampleIndex + 1,\n                      startTime: Date.now(),\n                    })\n                    return\n                  }\n                  break\n                case \"go-to-previous\":\n                  if (sampleIndex !== 0) {\n                    changeSingleSampleOHA({\n                      ...oha,\n                      taskData: [oha.taskData[sampleIndex - 1]],\n                      taskOutput: [(oha.taskOutput || [])[sampleIndex - 1]],\n                      sampleIndex: sampleIndex - 1,\n                      startTime: Date.now(),\n                    })\n                    return\n                  }\n                  break\n              }\n              changeSingleSampleOHA(null)\n            }}\n            oha={singleSampleOHA}\n          />\n        ) : (\n          mode === \"label\" && (\n            <PaperContainer>\n              <Stats\n                stats={[\n                  {\n                    name: \"Percent Complete\",\n                    value: Math.floor(percentComplete * 100) + \"%\",\n                  },\n                  {\n                    name: \"Time per Sample\",\n                    value: duration(\n                      new Date(Date.now() - timeToCompleteSample)\n                    ).toString(1, 1),\n                  },\n                  {\n                    name: \"Estimated Remaining\",\n                    value: duration(\n                      new Date(\n                        Date.now() -\n                          timeToCompleteSample *\n                            (1 - percentComplete) *\n                            (oha.taskData || []).length\n                      )\n                    ).toString(1, 2),\n                  },\n                ]}\n              />\n              <SampleGrid\n                count={(oha.taskData || []).length}\n                taskData={oha.taskData || []}\n                completed={(oha.taskOutput || []).map(Boolean)}\n                onClick={(sampleIndex) => {\n                  changeSingleSampleOHA({\n                    ...oha,\n                    taskData: [oha.taskData[sampleIndex]],\n                    taskOutput: [(oha.taskOutput || [])[sampleIndex]],\n                    sampleIndex,\n                    startTime: Date.now(),\n                  })\n                }}\n              />\n            </PaperContainer>\n          )\n        )}\n      </div>\n      <EditSampleDialog\n        {...sampleInputEditor}\n        sampleInput={\n          sampleInputEditor.sampleIndex !== undefined\n            ? oha.taskData[sampleInputEditor.sampleIndex]\n            : null\n        }\n        onClose={() => {\n          changeSampleInputEditor({ open: false })\n        }}\n        onChange={(newInput) => {\n          onChangeOHA(\n            setIn(oha, [\"taskData\", sampleInputEditor.sampleIndex], newInput)\n          )\n        }}\n      />\n    </div>\n  )\n}\n","import { useReducer } from \"react\"\n\nexport default () => {\n  const [{ timeToCompleteSample }, changeSampleTimeToComplete] = useReducer(\n    (state, newTimeToComplete) => {\n      const newSamplesInWindow = state.samplesInWindow\n        .slice(-10)\n        .concat([newTimeToComplete])\n      return {\n        timeToCompleteSample:\n          newSamplesInWindow.reduce((acc, a) => acc + a, 0) /\n          newSamplesInWindow.length,\n        samplesInWindow: newSamplesInWindow,\n      }\n    },\n    { timeToCompleteSample: 0, samplesInWindow: [] }\n  )\n  return [timeToCompleteSample, changeSampleTimeToComplete]\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { red } from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"center\",\n    pointerEvents: \"none\",\n  },\n  errorBox: {\n    display: \"flex\",\n    backgroundColor: red[700],\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4,\n  },\n})\n\nexport default ({ errors }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      {errors.map((err) => (\n        <Collapse key={err.id} in={err.life < 5000}>\n          <Fade in={err.life > 500}>\n            <div className={c.errorBox}>{err.message}</div>\n          </Fade>\n        </Collapse>\n      ))}\n    </div>\n  )\n}\n","// @flow\n\nimport { useState, useEffect } from \"react\"\n\nconst REFRESH_INTERVAL = 100\n\nexport default () => {\n  const [errors, changeErrors] = useState([])\n  useEffect(() => {\n    if (errors.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeErrors(\n        errors\n          .map((err) => ({\n            ...err,\n            life: err.life - REFRESH_INTERVAL,\n          }))\n          .filter((err) => err.life > 0)\n      )\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [errors])\n\n  function addError(message: string) {\n    changeErrors(\n      errors.concat([\n        {\n          id: Math.random().toString().split(\".\")[1],\n          message,\n          life: 5000,\n        },\n      ])\n    )\n  }\n\n  return [errors, addError]\n}\n","/*\nThis doesn't handle a fair number of edge cases, for the full specification\nfor what it should implement, see https://tools.ietf.org/html/rfc6902\n\nWhen applySeamlessPatch is called, it usually is accompanied by a object hash\ncheck to make sure that the patch applied correctly, and if not, perform\na download of the latest version. Because of this, we can safely ignore the\ntricky edge cases.\n*/\n\nimport { setIn, getIn, updateIn, without } from \"seamless-immutable\"\n\nfunction addToArray(a, newValue) {\n  return a.concat([newValue])\n}\n\nfunction withoutIn(obj, path) {\n  if (path.length === 0) return without(obj, path[0])\n  const parentPath = path.slice(0, -1)\n  const key = path[path.length - 1]\n  const parentObj = getIn(obj, parentPath)\n  if (Array.isArray(parentObj)) {\n    const index = parseInt(key)\n    return setIn(obj, parentPath, [\n      ...parentObj.slice(0, index),\n      ...parentObj.slice(index + 1),\n    ])\n  } else {\n    return setIn(obj, parentPath, without(parentObj, key))\n  }\n}\n\nexport default (object, patches) => {\n  for (const patch of patches) {\n    let { op, path } = patch\n    path = path.split(\"/\").filter(Boolean)\n    if (path.length === 0) {\n      // this operation is on the root object, special handling should apply\n      if (op === \"replace\") {\n        object = patch.value\n        continue\n      }\n      throw new Error(\"Operation on root object not supported\")\n    }\n    switch (op) {\n      case \"replace\": {\n        object = setIn(object, path, patch.value)\n        continue\n      }\n      case \"copy\": {\n        object = setIn(object, path, getIn(object, patch.from.split(\"/\")))\n        continue\n      }\n      case \"add\": {\n        if (!isNaN(parseInt(path.slice(-1)[0]))) {\n          object = setIn(object, path, patch.value)\n        } else {\n          const arrayAtPath = Array.isArray(getIn(object, path))\n          if (arrayAtPath) {\n            object = updateIn(object, path, addToArray, patch.value)\n          } else {\n            object = setIn(object, path, patch.value)\n          }\n        }\n        continue\n      }\n      case \"move\": {\n        const from = patch.from.split(\"/\")\n        object = setIn(object, path, getIn(object, from))\n        object = withoutIn(object, from)\n        continue\n      }\n      case \"remove\": {\n        object = withoutIn(object, path)\n        continue\n      }\n    }\n  }\n  return object\n}\n","// @flow\n\nimport { useState, useEffect } from \"react\"\nimport bent from \"bent\"\nimport moment from \"moment\"\nimport * as rfc6902 from \"rfc6902\"\nimport objectHash from \"object-hash\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport isEqual from \"lodash/isEqual\"\nimport { useToasts } from \"../../../components/Toasts\"\nimport makeImmutable, { setIn } from \"seamless-immutable\"\nimport applySeamlessPatch from \"./apply-seamless-patch\"\n\nconst serverUrl = window.localStorage.useLocalCollaborationServer\n  ? \"http://localhost:3000\"\n  : \"https://udt-collaboration.workaround.now.sh\"\n\nconst getJSON = bent(\"json\", \"GET\", serverUrl)\nconst postJSON = bent(\"json\", \"POST\", serverUrl)\nconst patchJSON = bent(\"json\", \"PATCH\", serverUrl)\n\nconst hash = (o) => objectHash(JSON.parse(JSON.stringify(o)))\n\nexport const getLatestState = async (sessionId) => {\n  try {\n    const res = await getJSON(`/api/session/${encodeURIComponent(sessionId)}`)\n    return {\n      state: res.udt_json,\n      version: res.version,\n    }\n  } catch (e) {\n    console.log(`error getting session \"${sessionId}\"`)\n    return { state: null, version: null }\n  }\n}\n\nexport const convertToCollaborativeFile = async (file) => {\n  const response = await postJSON(\"/api/session\", { udt: file.content })\n  return {\n    id: response.short_id,\n    sessionId: response.short_id,\n    url: `${window.location.origin}?s=${response.short_id}`,\n    content: file.content,\n    lastSyncedVersion: response.version,\n    lastSyncedState: cloneDeep(file.content),\n    mode: \"server\",\n  }\n}\n\nexport default (file, changeFile) => {\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n\n    const checkForLatestPatch = async () => {\n      let patch, hashOfLatestState, latestVersion, changeLog\n      try {\n        ;({\n          patch,\n          hashOfLatestState,\n          latestVersion,\n          changeLog,\n        } = await getJSON(\n          `/api/session/${encodeURIComponent(file.sessionId)}/diffs?since=${\n            file.lastSyncedVersion\n          }`\n        ))\n      } catch (e) {\n        addToast(\n          \"There was an issue connecting to the server. Refresh to retry.\",\n          \"error\"\n        )\n        return\n      }\n      if (!timeout) return\n      for (const { userName, op, path } of changeLog) {\n        if (path.startsWith(\"/interface\")) {\n          addToast(`${userName} changed the project settings`, \"warning\")\n        } else if (path.startsWith(\"/taskOutput\")) {\n          const sampleMatch = path.match(/\\/taskOutput\\/([^\\/]+)/)\n          if (sampleMatch) {\n            addToast(`${userName} labeled sample ${sampleMatch[1]}`)\n          } else {\n            addToast(`${userName} changed many samples`, \"warning\")\n          }\n        } else if (path.startsWith(\"/taskData\")) {\n          addToast(`${userName} changed the sample data`, \"warning\")\n        } else {\n          addToast(`${userName} did a ${op} at ${path}`)\n        }\n      }\n      if (patch.length > 0) {\n        let patchFailed = false,\n          newFileContent\n        // try {\n        // Apply update (note: this violates immutability, but prevents rerenders\n        // so should be kept)\n        newFileContent = applySeamlessPatch(file.content, patch)\n        // patchResult = jsonpatch.applyPatch(file.content, patch, false, true)\n        // file.content = patchResult.newDocument\n        // } catch (e) {\n        //   patchFailed = true\n        // }\n        if (patchFailed || hash(newFileContent) !== hashOfLatestState) {\n          if (!patchFailed) {\n            console.log(\n              \"when getting diffs, hashes were not equal! getting latest version from server...\"\n            )\n          } else {\n            console.log(\n              \"when getting diffs, the patch failed! getting latest version from server...\"\n            )\n          }\n          const { state: latest, version } = await getLatestState(\n            file.sessionId\n          )\n          changeFile(\n            makeImmutable({\n              ...file,\n              content: latest,\n              lastSyncedState: latest,\n              lastSyncedVersion: version,\n            })\n          )\n        } else {\n          changeFile(\n            makeImmutable({\n              ...file,\n              content: newFileContent,\n              lastSyncedState: newFileContent,\n              lastSyncedVersion: latestVersion,\n            })\n          )\n        }\n      }\n      if (!timeout) return\n      timeout = setTimeout(checkForLatestPatch, 500)\n    }\n\n    let timeout = setTimeout(checkForLatestPatch, 500)\n\n    return () => {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }, [file])\n\n  // Update the Server State by Sending Patches\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n    async function sendPatchIfChanges() {\n      const patch = rfc6902.createPatch(file.lastSyncedState, file.content)\n      if (patch.length === 0) return\n      let userName = \"anonymous\"\n      try {\n        userName = JSON.parse(window.localStorage.userName)\n      } catch (e) {}\n\n      const {\n        hashOfLatestState,\n        latestVersion,\n      } = await patchJSON(\n        `/api/session/${encodeURIComponent(file.sessionId)}`,\n        { patch, userName }\n      )\n\n      if (hash(file.content) !== hashOfLatestState) {\n        console.log(\n          \"after patch, hashes were not equal! getting latest version from server...\"\n        )\n        const { state: latest, version } = await getLatestState(file.sessionId)\n        changeFile(\n          makeImmutable({\n            ...file,\n            content: latest,\n            lastSyncedState: latest,\n            lastSyncedVersion: version,\n          })\n        )\n      } else {\n        changeFile(\n          setIn(\n            setIn(file, [\"lastSyncedVersion\"], latestVersion),\n            [\"lastSyncedState\"],\n            file.content\n          )\n        )\n      }\n    }\n    sendPatchIfChanges()\n  }, [file && file.content])\n}\n","// @flow\n\nimport { useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport useElectron from \"../use-electron.js\"\nimport { useToasts } from \"../../components/Toasts\"\nimport templates from \"../../components/StartingPage/templates.js\"\nimport { setIn } from \"seamless-immutable\"\nimport useIsDesktop from \"../use-is-desktop\"\n\nconst webReturn = { saveFile: () => null }\n\nexport default (file, changeFile) => {\n  const isDesktop = useIsDesktop()\n  if (!isDesktop) return webReturn\n  const { addToast } = useToasts()\n  const { remote, ipcRenderer } = useElectron()\n  const saveFile = useEventCallback(({ saveAs = false } = {}) => {\n    if (!file) return\n    async function saveFileAsync() {\n      let filePath = file.filePath\n      if (!file.filePath || saveAs) {\n        const {\n          cancelled,\n          filePath: newFilePath,\n        } = await remote.dialog.showSaveDialog({\n          filters: [{ name: \".udt.json\", extensions: [\"udt.json\"] }],\n        })\n        filePath =\n          !newFilePath || newFilePath.endsWith(\".json\")\n            ? newFilePath\n            : `${newFilePath}.udt.json`\n        if (cancelled || !filePath) {\n          addToast(\"Could not save\")\n          return\n        }\n        changeFile({\n          ...file,\n          filePath,\n          fileName: filePath.split(\"/\").slice(-1)[0],\n        })\n      }\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(filePath, JSON.stringify(file.content, null, \"  \"))\n      addToast(\"File Saved!\")\n    }\n    saveFileAsync()\n  })\n\n  useEffect(() => {\n    if (!file || !file.filePath) return\n    if (file.fileName !== file.filePath.split(\"/\").slice(-1)[0]) {\n      changeFile(\n        setIn(\n          file,\n          [\"filePath\"],\n          file.filePath\n            .split(\"/\")\n            .slice(0, -1)\n            .concat([\n              file.fileName +\n                (file.fileName.endsWith(\".json\") ? \"\" : \".oha.json\"),\n            ])\n            .join(\"/\")\n        )\n      )\n    }\n  }, [file && file.fileName, file && file.fileName])\n\n  return { saveFile }\n}\n","// @flow weak\n\nimport { useEffect } from \"react\"\nimport usePosthog from \"../../utils/use-posthog\"\nconst posthog = usePosthog()\n\nexport default (udt) => {\n  useEffect(() => {\n    if (!udt || !udt.interface) return\n    posthog.capture(\"interface_type\", { interface_type: udt.interface.type })\n    posthog.people.set({ last_used_interface_type: udt.interface.type })\n  }, [udt && udt.interface && udt.interface.type])\n  useEffect(() => {\n    if (!udt || !udt.taskData) return\n    posthog.capture(\"dataset_size\", {\n      dataset_size: (udt.taskData || []).length,\n    })\n  }, [udt && (udt.taskData || []).length])\n  useEffect(() => {\n    if (!udt || !udt.taskOutput) return\n    const numCompleted = udt.taskOutput.filter(Boolean).length\n    posthog.capture(\"sample_completion\", {\n      dataset_size: (udt.taskData || []).length,\n      samples_completed: numCompleted,\n      percent_completed: numCompleted / (udt.taskData || []).length,\n    })\n  }, [\n    udt && (udt.taskData || []).length,\n    udt && udt.taskOutput && udt.taskOutput.filter(Boolean).length,\n  ])\n}\n","// @flow\n\nimport { useState, useMemo, useCallback, useEffect } from \"react\"\nimport useServer, {\n  getLatestState,\n  convertToCollaborativeFile,\n} from \"./use-server\"\nimport useFilesystem from \"./use-filesystem\"\nimport useLocalStorage from \"./use-local-storage\"\nimport { useToasts } from \"../../components/Toasts\"\nimport moment from \"moment\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport fromUDTCSV from \"../from-udt-csv.js\"\nimport useEventCallback from \"use-event-callback\"\nimport useFileTelemetry from \"./use-file-telemetry\"\n\nexport default () => {\n  const [file, changeFile] = useState()\n  const { addToast } = useToasts()\n\n  const { saveFile } = useFilesystem(file, changeFile)\n  const { recentItems, changeRecentItems } = useLocalStorage(file, changeFile)\n  useServer(file, changeFile)\n\n  // Telemetry\n  useFileTelemetry(file && file.content)\n\n  const openFile = useEventCallback((fsFile) => {\n    const { name: fileName, path: filePath } = fsFile\n\n    function handleLoadedFile(content) {\n      try {\n        let oha\n        if (fileName.endsWith(\"csv\")) {\n          oha = fromUDTCSV(content)\n        } else {\n          oha = JSON.parse(content)\n        }\n        // TODO validate OHA and prompt to open anyway if invalid\n        changeFile({\n          fileName,\n          filePath,\n          mode: filePath ? \"filesystem\" : \"local-storage\",\n          content: oha,\n          id: filePath,\n        })\n      } catch (e) {\n        console.log(e.toString())\n        addToast(\"Couldn't read file, see console for details\", \"error\")\n        // addError(`Could not read file \"${fsFile.name}\"`)\n      }\n    }\n\n    if (fsFile.content) {\n      handleLoadedFile(fsFile.content)\n    } else {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const content = e.target.result\n        handleLoadedFile(content)\n      }\n      reader.readAsText(fsFile)\n    }\n  })\n\n  const openUrl = useEventCallback(async (url) => {\n    const sessionId = decodeURIComponent(url.match(/[\\?&]s=([^&]+)/)[1])\n    if (!sessionId) return\n    const { state, version } = await getLatestState(sessionId)\n    if (!state) return\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/?s=${encodeURIComponent(sessionId)}`\n    )\n    changeFile({\n      url,\n      sessionId,\n      mode: \"server\",\n      id: sessionId,\n      content: state,\n      lastSyncedState: cloneDeep(state),\n      lastSyncedVersion: version,\n    })\n  })\n\n  useEffect(() => {\n    if (!file) return\n    if (file.mode === \"server\") return\n    window.history.replaceState({}, window.document.title, `/`)\n  }, [file && file.mode])\n\n  useEffect(() => {\n    if (window.location.search.match(/[\\?&]s=([a-zA-Z0-9]+)/)) {\n      openUrl(window.location.href)\n    }\n  }, [])\n\n  const makeSession = useEventCallback(async () => {\n    const newFile = await convertToCollaborativeFile(file)\n    changeFile(newFile)\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/?s=${encodeURIComponent(newFile.sessionId)}`\n    )\n  })\n\n  return useMemo(\n    () => ({\n      file,\n      changeFile,\n      openFile,\n      openUrl,\n      makeSession,\n      saveFile,\n      recentItems,\n      changeRecentItems,\n    }),\n    [file, changeFile, openFile, makeSession, recentItems]\n  )\n}\n","// @flow\n\nimport { useLocalStorage } from \"react-use\"\nimport { useEffect } from \"react\"\n\nexport default (file, changeFile) => {\n  let [recentItems, changeRecentItems] = useLocalStorage(\"recentItems\", [])\n\n  if (!recentItems) recentItems = []\n\n  useEffect(() => {\n    if (!file) return\n    if (!file.fileName || file.fileName === \"unnamed\") return\n    if (file.mode !== \"local-storage\" && file.mode !== \"filesystem\") return\n    if (recentItems.map((item) => item.id).includes(file.id)) {\n      changeRecentItems(\n        recentItems.map((ri) => (ri.id === file.id ? file : ri))\n      )\n    } else {\n      changeRecentItems([file].concat(recentItems).slice(0, 3))\n    }\n  }, [file])\n\n  return { recentItems, changeRecentItems }\n}\n","import JAC from \"jac-format\"\nimport range from \"lodash/range\"\nimport { flatten } from \"flat\"\n\nexport default (obj) => {\n  const samplesObj = {}\n\n  // Convert to single samples array\n  samplesObj.interface = obj.interface\n  samplesObj.samples = obj.taskData.map((td, i) => ({\n    ...td,\n    output: (obj.taskOutput || [])[i],\n  }))\n\n  // Find all possible sample keys\n  let sampleKeys = new Set()\n  for (const sample of samplesObj.samples) {\n    Object.keys(flatten(sample)).forEach((k) => sampleKeys.add(k))\n  }\n  sampleKeys = Array.from(sampleKeys).sort(\n    (a, b) => a.split(\".\").length - b.split(\".\").length\n  )\n\n  if (sampleKeys.some((k) => k.includes(\"output.keyframes\"))) {\n    sampleKeys = sampleKeys.filter((k) => k.includes(\"output.keyframes\"))\n    sampleKeys.push(\"output.keyframes\")\n  }\n\n  const options = {\n    rows: [\n      \"interface\",\n      ...range(samplesObj.samples.length).map((i) => `samples.${i}`),\n    ],\n    columns: [\".\", ...sampleKeys],\n  }\n\n  return JAC.toCSV(samplesObj, options)\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { detect } from \"detect-browser\"\nimport Button from \"@material-ui/core/Button\"\nimport LaunchIcon from \"@material-ui/icons/Launch\"\nimport * as Sentry from \"@sentry/browser\"\n\nSentry.init({\n  dsn: \"https://bc19fbac222243f08f0abaf6d66f2034@sentry.io/5182632\",\n})\n\nconst Container = styled(\"div\")({\n  width: \"100vw\",\n  minHeight: \"100vh\",\n  backgroundColor: colors.grey[900],\n  padding: 32,\n  \"& .title\": {\n    color: colors.grey[200],\n    fontSize: 24,\n    fontWeight: \"bold\",\n  },\n  \"& .subtitle\": {\n    color: colors.grey[300],\n    fontSize: 18,\n    marginTop: 8,\n  },\n  \"& .info\": {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    padding: 32,\n    \"& textarea\": {\n      width: \"calc(100% - 64px)\",\n      boxSizing: \"border-box\",\n      minHeight: 300,\n      fontSize: 12,\n    },\n  },\n})\nconst Buttons = styled(\"div\")({\n  padding: 8,\n})\nconst StyledButton = styled(Button)({\n  color: \"#fff\",\n  borderColor: \"rgba(255,255,255,0.5)\",\n  margin: 8,\n})\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      errorDetails: JSON.stringify(detect()) + \"\\n\\n\" + error.stack,\n    }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    Sentry.withScope((scope) => {\n      scope.setExtras(errorInfo)\n      const eventId = Sentry.captureException(error)\n      this.setState({ eventId })\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <Container>\n          <div className=\"title\">Something has gone amiss</div>\n          <div className=\"subtitle\">All the details are below:</div>\n          <div className=\"info\">\n            <textarea>{this.state.errorDetails}</textarea>\n          </div>\n          <Buttons>\n            <StyledButton\n              variant=\"outlined\"\n              target=\"_blank\"\n              href=\"https://github.com/Universal/universal-data-tool/issues\"\n            >\n              <LaunchIcon style={{ color: \"#fff\", marginRight: 8 }} /> View\n              Issues on Github\n            </StyledButton>\n            {/* <StyledButton\n              variant=\"outlined\"\n              onClick={this.props.revertLastChange}\n            >\n              Revert Last File Change\n            </StyledButton> */}\n            <StyledButton\n              variant=\"outlined\"\n              onClick={() => window.location.reload()}\n            >\n              Reload (unsaved progress will be lost)\n            </StyledButton>\n          </Buttons>\n        </Container>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","// @flow\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport OHAEditor from \"../OHAEditor\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useLocalStorage from \"../../utils/use-local-storage.js\"\nimport useFileHandler from \"../../utils/file-handlers\"\nimport download from \"in-browser-download\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\nimport { setIn } from \"seamless-immutable\"\nimport ErrorBoundary from \"../ErrorBoundary\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles({\n  empty: {\n    textAlign: \"center\",\n    padding: 100,\n    color: \"#666\",\n    fontSize: 28,\n  },\n})\n\nconst randomId = () => Math.random().toString().split(\".\")[1]\n\nexport default () => {\n  const c = useStyles()\n  const {\n    file,\n    changeFile,\n    openFile,\n    openUrl,\n    makeSession,\n    recentItems,\n    changeRecentItems,\n  } = useFileHandler()\n  const [errors, addError] = useErrors()\n\n  const [selectedBrush, setSelectedBrush] = useState(\"complete\")\n\n  const onCreateTemplate = useEventCallback((template) => {\n    changeFile({\n      fileName: \"unnamed\",\n      content: template.oha,\n      id: randomId(),\n      mode: \"local-storage\",\n    })\n  })\n\n  const openRecentItem = useEventCallback((item) => changeFile(item))\n  const onClickHome = useEventCallback(() => changeFile(null))\n  const onDownload = useEventCallback((format) => {\n    if (!file) return\n    const outputName = (file.sessionId || file.fileName) + \".udt.\" + format\n    if (format === \"json\") {\n      download(JSON.stringify(file.content), outputName)\n    } else if (format === \"csv\") {\n      download(toUDTCSV(file.content), outputName)\n    }\n  })\n\n  const inSession = file && file.mode === \"server\"\n  const [sessionBoxOpen, changeSessionBoxOpen] = useState(false)\n\n  const onJoinSession = useCallback(async (sessionName) => {\n    await openUrl(sessionName)\n  }, [])\n\n  const onLeaveSession = useEventCallback(() =>\n    changeFile({\n      ...file,\n      mode: \"local-storage\",\n      id: randomId(),\n      fileName: \"unnamed\",\n    })\n  )\n\n  return (\n    <>\n      <HeaderContext.Provider\n        value={{\n          title: file\n            ? file.mode === \"local-storage\"\n              ? file.fileName\n              : file.url\n            : \"unnamed\",\n          recentItems,\n          changeRecentItems,\n          onClickTemplate: onCreateTemplate,\n          onClickHome,\n          onOpenFile: openFile,\n          onOpenRecentItem: openRecentItem,\n          inSession,\n          sessionBoxOpen,\n          changeSessionBoxOpen,\n          onJoinSession,\n          onLeaveSession,\n          onCreateSession: makeSession,\n          fileOpen: Boolean(file),\n          onDownload,\n          onChangeSelectedBrush: setSelectedBrush,\n          selectedBrush,\n        }}\n      >\n        {!file ? (\n          <StartingPage\n            onFileDrop={openFile}\n            onOpenTemplate={onCreateTemplate}\n            recentItems={recentItems}\n            onOpenRecentItem={openRecentItem}\n            onClickOpenSession={() => changeSessionBoxOpen(true)}\n          />\n        ) : (\n          <ErrorBoundary>\n            <OHAEditor\n              key={file.id}\n              {...file}\n              selectedBrush={selectedBrush}\n              inSession={inSession}\n              oha={file.content}\n              onChangeFileName={(newName) => {\n                changeFile(setIn(file, [\"fileName\"], newName))\n              }}\n              onChangeOHA={(newOHA) => {\n                changeFile(setIn(file, [\"content\"], newOHA))\n              }}\n            />\n          </ErrorBoundary>\n        )}\n      </HeaderContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","// @flow\nimport React, { useState, useMemo, useEffect } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport OHAEditor from \"../OHAEditor\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport { useToasts } from \"../Toasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useLocalStorage from \"../../utils/use-local-storage.js\"\nimport useElectron from \"../../utils/use-electron.js\"\nimport templates from \"../StartingPage/templates\"\nimport useEventCallback from \"use-event-callback\"\nimport { setIn } from \"seamless-immutable\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\n\nimport useFileHandler from \"../../utils/file-handlers\"\n\nconst useStyles = makeStyles({\n  empty: {\n    textAlign: \"center\",\n    padding: 100,\n    color: \"#666\",\n    fontSize: 28,\n  },\n})\n\nconst randomId = () => Math.random().toString().split(\".\")[1]\n\nexport default () => {\n  const c = useStyles()\n  const {\n    file,\n    changeFile,\n    openFile,\n    openUrl,\n    makeSession,\n    saveFile,\n    recentItems,\n  } = useFileHandler()\n\n  const [selectedBrush, setSelectedBrush] = useState(\"complete\")\n  const [errors, addError] = useErrors()\n  const { addToast } = useToasts()\n\n  const { remote, ipcRenderer } = useElectron()\n\n  const onCreateTemplate = useEventCallback((template) => {\n    changeFile({\n      fileName: \"unnamed\",\n      content: template.oha,\n      id: randomId(),\n      mode: \"filesystem\",\n    })\n  })\n\n  const openRecentItem = useEventCallback((item) => changeFile(item))\n  const onClickHome = useEventCallback(() => changeFile(null))\n\n  useEffect(() => {\n    const onOpenWelcomePage = () => changeFile(null)\n    const onNewFile = (arg0, { templateName } = {}) => {\n      onCreateTemplate(\n        templates.find((t) => t.name === templateName) || templates[0]\n      )\n    }\n    const saveFileAs = () => saveFile({ saveAs: true })\n    const exportToCSV = async () => {\n      if (!file) return\n      let { cancelled, filePath } = await remote.dialog.showSaveDialog({\n        filters: [{ name: \".udt.csv\", extensions: [\"udt.csv\"] }],\n      })\n      filePath =\n        !filePath || filePath.endsWith(\".csv\")\n          ? filePath\n          : `${filePath}.udt.csv`\n\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(filePath, toUDTCSV(file.content))\n    }\n    const onOpenFileFromToolbar = (e, file) => (\n      console.log(file), openFile(file)\n    )\n\n    ipcRenderer.on(\"open-welcome-page\", onOpenWelcomePage)\n    ipcRenderer.on(\"new-file\", onNewFile)\n    ipcRenderer.on(\"open-file\", onOpenFileFromToolbar)\n    ipcRenderer.on(\"save-file\", saveFile)\n    ipcRenderer.on(\"save-file-as\", saveFileAs)\n    ipcRenderer.on(\"export-to-csv\", exportToCSV)\n    return () => {\n      ipcRenderer.removeListener(\"open-welcome-page\", onOpenWelcomePage)\n      ipcRenderer.removeListener(\"new-file\", onNewFile)\n      ipcRenderer.removeListener(\"open-file\", onOpenFileFromToolbar)\n      ipcRenderer.removeListener(\"save-file\", saveFile)\n      ipcRenderer.removeListener(\"save-file-as\", saveFileAs)\n      ipcRenderer.removeListener(\"export-to-csv\", exportToCSV)\n    }\n  }, [file])\n\n  return (\n    <>\n      <HeaderContext.Provider\n        value={{\n          recentItems,\n          onClickTemplate: onCreateTemplate,\n          onClickHome,\n          title: file ? file.fileName : null,\n          fileOpen: Boolean(file),\n          onOpenRecentItem: openRecentItem,\n          isDesktop: true,\n          onOpenFile: openFile,\n          selectedBrush,\n          onChangeSelectedBrush: setSelectedBrush,\n        }}\n      >\n        {!file ? (\n          <StartingPage\n            showDownloadLink={false}\n            onFileDrop={openFile}\n            onOpenTemplate={onCreateTemplate}\n            recentItems={recentItems}\n            onOpenRecentItem={openRecentItem}\n          />\n        ) : (\n          <OHAEditor\n            key={file.id}\n            {...file}\n            selectedBrush={selectedBrush}\n            oha={file.content}\n            onChangeFileName={(newName) => {\n              changeFile(setIn(file, [\"fileName\"], newName))\n            }}\n            onChangeOHA={(newOHA) => {\n              changeFile(setIn(file, [\"content\"], newOHA))\n            }}\n          />\n        )}\n      </HeaderContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","import React from \"react\"\nimport Theme from \"./components/Theme\"\nimport LocalStorageApp from \"./components/LocalStorageApp\"\nimport DesktopApp from \"./components/DesktopApp\"\nimport { ToastProvider } from \"./components/Toasts\"\nimport useElectron from \"./utils/use-electron.js\"\n\nexport const App = () => {\n  const electron = useElectron()\n  return (\n    <Theme>\n      <ToastProvider>\n        {Boolean(electron) ? <DesktopApp /> : <LocalStorageApp />}\n      </ToastProvider>\n    </Theme>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}