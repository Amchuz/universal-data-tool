(this["webpackJsonpuniversal-data-tool"]=this["webpackJsonpuniversal-data-tool"]||[]).push([[0],{1e3:function(e,t,n){},1001:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(35),i=n.n(r),l=n(498),c=n.n(l),s=n(1065),u=(n(619),n(160)),m=c()({palette:{primary:u.a,secondary:u.a},typography:{fontFamily:'"Inter", "Roboto", sans-serif',button:{textTransform:"none"}}}),p=function(e){var t=e.children;return o.a.createElement(s.a,{theme:m},t)},d=n(15),f=n(12),g=n.n(f),b=n(18),h=n(8),v=n(1086),E=n(1069),y=n(1107),x=n(1106),O=n(585),j=n(1078),w=n(502),k=n.n(w),C=n(120),S=n.n(C),I=n(38),T=n(114),N=n(492),D=n(407),A=n(1077),_=n(491),L=n(16),P=n.n(L),U=n(582),R=n(71),F=n(580),B=n(165),M=n(42),z=n(1104),H=n(48),W=[{id:"switch_to_label",description:"Go to Labels Tab",binding:"shift+3"},{id:"switch_to_setup",description:"Go to Setup Tab",binding:"shift+1"},{id:"switch_to_samples",description:"Go to Samples Tab",binding:"shift+2"},{id:"select_tool",description:"Switch to the Select Tool",binding:"escape"},{id:"zoom_tool",description:"Select the Zoom Tool",binding:"z"},{id:"create_point",description:"Create a point"},{id:"create_bounding_box",description:"Create a bounding box",binding:"b"},{id:"pan_tool",description:"Select the Pan Tool",binding:"p"},{id:"create_polygon",description:"Create a Polygon"},{id:"create_pixel",description:"Create a Pixel Mask"},{id:"save_and_previous_sample",description:"Save and go to previous sample",binding:"a"},{id:"save_and_next_sample",description:"Save and go to next sample",binding:"d"},{id:"save_and_exit_sample",description:"Save and exit current sample"},{id:"exit_sample",description:"Exit sample without saving"}],q=Object(a.createContext)({hotkeys:W,changeHotkey:function(e,t){return null}}),V=function(){return Object(a.useContext)(q)},J=function(e){var t=e.children,n=X(),r=n.fromConfig,i=n.setInConfig,l=Object(a.useMemo)((function(){return W.map((function(e){return r("hotkeys.".concat(e.id))?Object(d.a)({},e,{binding:r("hotkeys.".concat(e.id))}):e}))}),[r]),c=Object(a.useMemo)((function(){var e,t={},n=Object(H.a)(l);try{for(n.s();!(e=n.n()).done;){var a=e.value,o=a.id,r=a.binding;r&&(t[o]=r)}}catch(i){n.e(i)}finally{n.f()}return t}),[l]),s=Object(a.useMemo)((function(){return{hotkeys:l,keyMap:c,clearHotkeys:function(){var e,t=Object(H.a)(l);try{for(t.s();!(e=t.n()).done;){var n=e.value.id;i("hotkeys.".concat(n),null)}}catch(a){t.e(a)}finally{t.f()}},changeHotkey:function(e,t){return i("hotkeys.".concat(e),t)}}}),[i,l,c]);return o.a.createElement(q.Provider,{value:s},t)},G=["auth.provider","auth.cognito.identity_pool_id","auth.cognito.region","auth.cognito.user_pool_id","auth.cognito.user_pool_web_client_id","auth.cognito.mandatory_sign_in","auth.cognito.authentication_flow_type","auth.cognito.storage.aws_s3.bucket","auth.cognito.storage.aws_s3.region","labelhelp.disabled","labelhelp.apikey"].concat(Object(M.a)(W.map((function(e){var t=e.id;return"hotkeys.".concat(t)})))),K=Object(a.createContext)({appConfig:{},setAppConfig:function(e){},fromConfig:function(e){},setInConfig:function(e,t){}}),X=function(){return Object(a.useContext)(K)},Z=function(e){var t=e.children,n=Object(z.a)("app_config",{}),r=Object(h.a)(n,2),i=r[0],l=r[1],c=Object(a.useMemo)((function(){return{appConfig:i,setAppConfig:l,fromConfig:function(e){if(!G.includes(e))throw new Error('Unknown config key name "'.concat(e,'"'));return i[e]},setInConfig:function(e,t){if("string"!==typeof t&&"number"!==typeof t&&"boolean"!==typeof t&&void 0!==t&&null!==t)throw new Error('Config can only have boolean/strings/numbers/null/undefined, something tried to set appConfig["'.concat(e,'"] = ').concat(JSON.stringify(t)));if(!G.includes(e))throw new Error('Unknown config key name "'.concat(e,'"'));l(Object(d.a)({},i,Object(I.a)({},e,t)))}}}),[i,l]);return o.a.createElement(K.Provider,{value:c},t)},Y=n(78),Q=function e(t){var n=this;Object(Y.a)(this,e),this.authProvider="cognito",this.setUser=function(e){n.user=e,n.isLoggedIn=Boolean(e),n.hasChanged=!0},this.login=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.default.configure(n.authConfig),e.next=3,F.a.currentAuthenticatedUser();case 3:a=e.sent,n.user=a,n.hasChanged=!0;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){n.user=null,n.isLoggedIn=!1,n.hasChanged=!0,F.a.signOut()},this.getState=function(){return{user:n.user,isLoggedIn:n.isLoggedIn,authConfig:n.authConfig}},this.authConfig={Auth:{identityPoolId:t["auth.cognito.identity_pool_id"],region:t["auth.cognito.region"],userPoolId:t["auth.cognito.user_pool_id"],userPoolWebClientId:t["auth.cognito.user_pool_web_client_id"],mandatorySignIn:!0,authenticationFlowType:"USER_PASSWORD_AUTH"},Storage:{AWSS3:{bucket:t["auth.cognito.storage.aws_s3.bucket"],region:t["auth.cognito.storage.aws_s3.region"]}}},this.isLoggedIn=!1},$=n(1067),ee=Object(a.createContext)({authProvider:"none"}),te=function(e){var t=e.children,n=X(),r=n.appConfig,i=n.fromConfig,l=Object(a.useState)({authProvider:"none"}),c=Object(h.a)(l,2),s=c[0],u=c[1],m=i("auth.provider"),p=Object($.a)();Object(a.useEffect)((function(){s&&s.authProvider===m||"cognito"===m&&u(new Q(r))}),[m,r,s]),Object(a.useEffect)((function(){if(s){var e=setInterval((function(){s.hasChanged&&(p(),s.hasChanged=!1)}),1e3);return function(){clearInterval(e)}}}),[s,p]);var f=Object(a.useMemo)((function(){return Object(d.a)({authProvider:s.authProvider},s.getState?s.getState():{},{setUser:s.setUser,logout:s.logout,login:s.login})}),[s]);return o.a.createElement(ee.Provider,{value:f},t)},ne=function(){return Object(a.useContext)(ee)},ae=ne,oe=Object(U.a)("div")({padding:16,color:B.a[500]}),re=Object(E.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ie=function(e){var t=e.onUserChange,n=e.onRequireCompleteSignUp,r=e.onClose,i=ne(),l=i.authConfig,c=i.setUser,s=re(),u=Object(a.useState)(),m=Object(h.a)(u,2),p=m[0],f=m[1],v=Object(a.useState)({username:"",password:"",notAuthorizedException:!1}),E=Object(h.a)(v,2),y=E[0],x=E[1],O=function(e){e.persist(),x((function(t){var n;return Object(d.a)({},t,(n={},Object(I.a)(n,e.target.name,e.target.value),Object(I.a)(n,"notAuthorizedException",!1),n))}))};function j(){return(j=Object(b.a)(g.a.mark((function e(a,o){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),e.prev=1,e.next=4,R.default.configure(l);case 4:return e.next=6,F.a.signIn(a,o).then((function(e){return c(e),"NEW_PASSWORD_REQUIRED"===e.challengeName?n(e):(t(e),r()),e})).catch((function(e){return"UserNotConfirmedException"===e.code?console.log("Must confirm the account"):"PasswordResetRequiredException"===e.code?console.log("Password has been reset"):"NotAuthorizedException"===e.code?(console.log("Bad password message"),x(Object(d.a)({},y,{notAuthorizedException:!0,password:""}))):"UserNotFoundException"===e.code?console.log("User not found message"):(console.log("Error that we do not handle for"),console.log(e.code)),f(e.toString()),e}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f(e.t0.toString());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return o.a.createElement(a.Fragment,null,o.a.createElement(T.a,{component:"h1",variant:"h5"},"Sign in"),p&&o.a.createElement(oe,null,p),o.a.createElement("form",{className:s.form,noValidate:!0},o.a.createElement(N.a,{error:y.notAuthorizedException,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",helperText:y.notAuthorizedException?"The username or password is incorrect.":"",autoFocus:!0,onChange:O}),o.a.createElement(N.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:y.password,onChange:O}),o.a.createElement(A.a,{control:o.a.createElement(_.a,{value:"remember",color:"primary"}),label:"Remember me"}),o.a.createElement(D.a,{onClick:function(){P()(y.username)||P()(y.password)?x((function(e){return Object(d.a)({},e,{notAuthorizedException:!0})})):function(e,t){j.apply(this,arguments)}(y.username,y.password)},fullWidth:!0,variant:"contained",color:"primary",className:s.submit},"Sign In")))},le=Object(E.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ce=function(e){var t=e.requiredAttributes,n=e.onUserChange,r=e.onClose,i=ne().user,l={},c={};t.forEach((function(e){l[e]="",c[e]=!1}));var s=Object(a.useState)({newPassword:"",newPasswordNotValid:!1,newPasswordConfirmation:"",newPasswordNotEqualsConfirmation:!1,requiredAttributesDict:l,requiredAttributesErrorDict:c}),u=Object(h.a)(s,2),m=u[0],p=u[1],f=le(),g=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},b=function(e){p(Object(d.a)({},m,{requiredAttributesDict:Object(d.a)({},m.requiredAttributesDict,Object(I.a)({},e.target.name,e.target.value))}))},v=function(e){p(Object(d.a)({},m,Object(I.a)({newPasswordError:null,newPasswordNotValid:!1,newPasswordNotEqualsConfirmation:!1},e.target.name,e.target.value)))},E=function(){return m.newPassword===m.newPasswordConfirmation?(p(Object(d.a)({},m,{newPasswordNotEqualsConfirmation:!1})),!0):(p(Object(d.a)({},m,{newPasswordNotEqualsConfirmation:!0})),!1)},y=function(e){var n=!0;return"checkAll"===e?t.forEach((function(e){""===m.requiredAttributesDict[e]&&(p(Object(d.a)({},m,{requiredAttributesErrorDict:Object(d.a)({},m.requiredAttributesErrorDict,Object(I.a)({},e,!0))})),n=!1)})):""===e.target.value?p(Object(d.a)({},m,{requiredAttributesErrorDict:Object(d.a)({},m.requiredAttributesErrorDict,Object(I.a)({},e.target.name,!0))})):p(Object(d.a)({},m,{requiredAttributesErrorDict:Object(d.a)({},m.requiredAttributesErrorDict,Object(I.a)({},e.target.name,!1))})),n};return o.a.createElement(a.Fragment,null,o.a.createElement(T.a,{component:"h1",variant:"h5"},"Complete your Sign Up"),o.a.createElement("form",{className:f.form,noValidate:!0},o.a.createElement(N.a,{error:m.newPasswordNotValid,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New password",type:"password",id:"password",value:m.newPassword,onChange:v,helperText:m.newPasswordError||""}),o.a.createElement(N.a,{error:m.newPasswordNotEqualsConfirmation,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"newPasswordConfirmation",label:"Confirm new password",type:"password",id:"confirm-password",onChange:v,value:m.newPasswordConfirmation,onBlur:E,helperText:m.newPasswordNotEqualsConfirmation?"New password and confirmation password must be the same":""}),t.map((function(e){return o.a.createElement(N.a,{error:m.requiredAttributesErrorDict[e],variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:e.toString(),key:e.toString(),label:g(e.toString()),type:"text",id:e.toString(),onChange:b,value:m.requiredAttributesDict.requiredAttribute,onBlur:y,helperText:m.requiredAttributesErrorDict[e]?"".concat(g(e.toString())," can't be null"):""})})),o.a.createElement(D.a,{onClick:function(){E()&&y("checkAll")?F.a.completeNewPassword(i,m.newPassword,m.requiredAttributesDict).then((function(e){n(e),r()})).catch((function(e){p(Object(d.a)({},m,{newPasswordError:e.toString()}))})):console.log("Something missing")},fullWidth:!0,variant:"contained",color:"primary",className:f.submit},"Complete Sign Up")))},se=Object(E.a)((function(e){return{drawer:{width:500},root:{height:"100vh"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},close:{cursor:"pointer",color:e.palette.secondary.main},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),ue=function(e){var t=e.loginDrawerOpen,n=e.onClose,r=se(),i=Object(a.useState)({}),l=Object(h.a)(i,2),c=l[0],s=l[1],u=Object(a.useState)({signingIn:!0,completeSignUp:!1,user:""}),m=Object(h.a)(u,2),p=m[0],f=m[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{anchor:"right",open:t,onClose:n},o.a.createElement("div",{className:r.drawer,role:"presentation"},o.a.createElement(j.a,{container:!0,component:"main",className:r.root},o.a.createElement(j.a,{item:!0,xs:12,sm:12,md:12,component:O.a,elevation:6,square:!0},o.a.createElement("div",{className:r.paper},o.a.createElement(j.a,{container:!0},o.a.createElement(j.a,{item:!0,xs:!0},o.a.createElement(S.a,{onClick:n,className:r.close}))),o.a.createElement(x.a,{className:r.avatar},o.a.createElement(k.a,null)),p.signingIn&&o.a.createElement(ie,{onRequireCompleteSignUp:function(e){return function(e){f((function(t){return Object(d.a)({},t,{signingIn:!1,completeSignUp:!0,user:e,requiredAttributes:e.challengeParam.requiredAttributes})}))}(e)},onUserChange:function(e){s(e)},onClose:n}),p.completeSignUp&&o.a.createElement(ce,{requiredAttributes:p.requiredAttributes,user:c,onClose:n,onUserChange:function(e){s(e)}})))))))},me=n(1080),pe=n(1081),de=n(1102),fe=n(1082),ge=n(1083),be=n(170),he=n.n(be),ve=n(276),Ee=n.n(ve),ye=n(171),xe=n.n(ye),Oe=n(508),je=n.n(Oe),we=n(586),ke=n(503),Ce=n.n(ke),Se=n(162),Ie=n(1079),Te=n(504),Ne=n.n(Te),De=n(272),Ae=n.n(De),_e=n(408),Le=n(143),Pe=n.n(Le),Ue=function(){return window.require?window.require("electron"):null};window.posthogInitialized=!1;var Re=function(){var e=Boolean(Ue());if(!window.posthogInitialized){Pe.a.init("dSrx1PbFd02XsxlLd7qNbeTxKZwwao2sclVmapyYlT4",{api_host:"https://posthog.universaldatatool.com",autocapture:!1}),window.posthog=Pe.a;var t=e?"desktop":window.location.origin;Pe.a.capture("domain",{domain:t}),Pe.a.capture("is_desktop",{isDesktop:e}),Pe.a.people.set({is_desktop:e,domain:t}),window.posthogInitialized=!0}return Pe.a},Fe=Object(U.a)("div")({position:"relative",marginLeft:8}),Be=Se.a[500],Me={bottom:"100%",left:"25%",border:"solid transparent",content:'" "',height:0,width:0,position:"absolute",pointerEvents:"none"},ze=Object(U.a)("div")({position:"absolute",zIndex:10,top:45,padding:16,boxSizing:"border-box",borderRadius:4,left:-53,backgroundColor:"#fff",border:"1px solid ".concat(Be),width:300,minHeight:200,boxShadow:"0px 3px 12px rgba(0,0,0,0.3)","&:before":Object(d.a)({},Me,{borderColor:"rgba(0,0,0, 0)",borderBottomColor:Be,borderWidth:12,marginLeft:-12}),"&:after":Object(d.a)({},Me,{borderColor:"rgba(255,255,255, 0)",borderBottomColor:"#fff",borderWidth:10,marginLeft:-10}),"& h1":{fontSize:18,marginTop:0,color:u.a[800]},"& h2":{fontSize:14,color:Se.a[800]},opacity:1,transition:"opacity 200ms linear, transform 200ms ease","&.hidden":{opacity:0,transform:"translate(0, 10px)",pointerEvents:"none"}}),He=Object(U.a)("div")({color:B.a[500],padding:8,fontSize:14}),We=Object(U.a)(D.a)({marginTop:16,justifyContent:"flex-start",color:u.a[500],"& .icon":{marginRight:8,opacity:.7}}),qe=Object(U.a)(D.a)({marginTop:16,justifyContent:"flex-start","& .icon":{marginRight:8,opacity:.7,color:B.a[500]}}),Ve=function(e){var t=e.fileOpen,n=void 0!==t&&t,r=e.inSession,i=void 0!==r&&r,l=e.error,c=e.onJoinSession,s=e.onCreateSession,m=e.onLeaveSession,p=e.sessionBoxOpen,d=e.changeSessionBoxOpen,f=Object(a.useState)(!1),g=Object(h.a)(f,2),b=g[0],v=g[1],E=Object(a.useState)(""),y=Object(h.a)(E,2),x=y[0],O=y[1],j=Object(z.a)("userName","anonymous"),w=Object(h.a)(j,2),k=w[0],C=w[1],I=Re();return Object(a.useEffect)((function(){b&&setTimeout((function(){v(!1)}),1e4)}),[b]),o.a.createElement(Fe,{title:"collaborate-icon",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},o.a.createElement(we.a,{style:{color:i?u.a[500]:void 0}},o.a.createElement(Ce.a,null)),o.a.createElement(ze,{className:p?"":"hidden"},o.a.createElement("h1",null,"Collaborate"),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{style:{marginTop:12},variant:"outlined",label:"User Name",value:k,onChange:function(e){return C(e.target.value)}}),o.a.createElement(qe,{fullWidth:!0,onClick:m},o.a.createElement(Ae.a,{className:"icon"}),"Leave Session")):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Join a Session"),o.a.createElement(N.a,{variant:"outlined",label:"URL to Session",value:x,onChange:function(e){return O(e.target.value)},InputProps:{endAdornment:o.a.createElement(Ie.a,{position:"end"},o.a.createElement(we.a,{color:"primary",onClick:function(){I.capture("join_collaborative_session"),c(x)},disabled:!x},o.a.createElement(S.a,null)))}}),l&&o.a.createElement(He,null,l),o.a.createElement(We,{fullWidth:!0,disabled:!n||b||l,onClick:function(){I.capture("create_collaborative_session"),s(),v(!0)}},b?o.a.createElement(_e.a,{className:"icon",size:24}):o.a.createElement(Ne.a,{className:"icon"}),"Create New Session"))))},Je=n(137),Ge=n.n(Je),Ke=n(167),Xe=Se.a[500],Ze={bottom:"100%",left:"25%",border:"solid transparent",content:'" "',height:0,width:0,position:"absolute",pointerEvents:"none"},Ye=Object(U.a)("div")({position:"absolute",zIndex:10,top:45,padding:16,boxSizing:"border-box",borderRadius:4,left:-53,backgroundColor:"#fff",border:"1px solid ".concat(Xe),width:300,minHeight:200,boxShadow:"0px 3px 12px rgba(0,0,0,0.3)","&:before":Object(d.a)({},Ze,{borderColor:"rgba(0,0,0, 0)",borderBottomColor:Xe,borderWidth:12,marginLeft:-12}),"&:after":Object(d.a)({},Ze,{borderColor:"rgba(255,255,255, 0)",borderBottomColor:"#fff",borderWidth:10,marginLeft:-10}),"& h1":{fontSize:18,marginTop:0,color:u.a[800]},"& h2":{fontSize:14,color:Se.a[800]},opacity:1,transition:"opacity 200ms linear, transform 200ms ease","&.hidden":{opacity:0,transform:"translate(0, 10px)",pointerEvents:"none"}}),Qe=function(e){var t=e.open,n=e.children;return o.a.createElement(Ye,{className:t?"":"hidden"},n)},$e=Object(U.a)("div")({position:"relative"}),et=Object(U.a)(D.a)({justifyContent:"flex-start","& .fakeicon":{display:"inline",marginRight:8,padding:4,paddingTop:5,fontSize:11,fontWeight:"bold",color:"#fff",backgroundColor:Se.a[700],borderRadius:4,width:36,"&.blue":{backgroundColor:u.a[700]},"&.green":{backgroundColor:Ke.a[700]}}}),tt=function(e){var t=e.onDownload,n=Object(a.useState)(!1),r=Object(h.a)(n,2),i=r[0],l=r[1];return o.a.createElement($e,{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)}},o.a.createElement(we.a,null,o.a.createElement(Ge.a,null)),o.a.createElement(Qe,{open:i},o.a.createElement("h1",null,"Download"),o.a.createElement(et,{fullWidth:!0,onClick:function(){return t("csv")}},o.a.createElement("div",{className:"fakeicon green"},"CSV"),"Download CSV"),o.a.createElement(et,{fullWidth:!0,onClick:function(){return t("json")}},o.a.createElement("div",{className:"fakeicon blue"},"JSON"),"Download JSON")))},nt=n(269);var at=function(e){return o.a.createElement(nt.a,e,o.a.createElement("path",{d:"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z"}))},ot=n(273),rt=n(506),it=n.n(rt),lt=n(409),ct=n(410),st=n(164),ut=n(411),mt=n(166),pt=n(163),dt=n(24),ft=n(340),gt=n.n(ft),bt=n(505),ht=n.n(bt),vt=n(27),Et=Object(d.a)({},Se.a,{isFaded:!0}),yt=[u.a,lt.a,Ke.a,ct.a,st.a,ut.a,mt.a,pt.a],xt=Object(d.a)({},vt,{complete:u.a,incomplete:Et,faded:Et,review:lt.a}),Ot=function(e){return xt[e]||yt[ht()(e)*yt.length]},jt=Object(U.a)("div")({position:"relative"}),wt=Object(U.a)("div")((function(e){return{display:"inline",marginRight:8,backgroundColor:e.color[700],width:24,height:24,borderRadius:20}})),kt=Object(U.a)("div")({paddingTop:10,padding:4,display:"flex",flexWrap:"wrap"}),Ct=Object(U.a)(we.a)((function(e){var t=e.iconcolor,n=e.selected;return{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t[700],border:n?"4px solid ".concat(t.A200):"4px solid #fff",boxSizing:"content-box",margin:4,transition:"transform 200ms linear","&:hover":{backgroundColor:t[800],transform:"scale(1.2,1.2)"},"&:active":{transition:"transform 100ms linear",transform:"scale(1.4,1.4)"}}})),St=Object(U.a)(D.a)((function(e){var t=e.selected,n=e.iconcolor;return{justifyContent:"flex-start",marginTop:4,marginBottom:4,paddingTop:8,paddingBottom:8,backgroundColor:t?n[50]:"#fff",border:t?"2px solid ".concat(n[200]):"2px solid #fff","&:hover":{backgroundColor:t?n[100]:"none"}}})),It=function(e){var t=e.selectedBrush,n=e.onChangeSelectedBrush,r=Object(a.useState)(!1),i=Object(h.a)(r,2),l=i[0],c=i[1],s=Object(dt.a)((function(e){return gt()((function(){return n(e)}))}));return o.a.createElement(jt,{onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},o.a.createElement(we.a,null,o.a.createElement(it.a,{style:{color:Ot(t)[800]}})),o.a.createElement(Qe,{open:l},o.a.createElement("h1",null,"Sample Brushes"),o.a.createElement(St,{selected:"complete"===t||"blue"===t,iconcolor:u.a,fullWidth:!0,onClick:s("complete")},o.a.createElement(wt,{color:u.a}),"Complete"),o.a.createElement(St,{selected:"review"===t||"deepOrange"===t,iconcolor:lt.a,fullWidth:!0,onClick:s("review")},o.a.createElement(wt,{color:lt.a}),"Review"),o.a.createElement(kt,null,o.a.createElement(Ct,{onClick:s("green"),selected:"green"===t,iconcolor:Ke.a}),o.a.createElement(Ct,{onClick:s("purple"),selected:"purple"===t,iconcolor:ct.a}),o.a.createElement(Ct,{onClick:s("pink"),selected:"pink"===t,iconcolor:st.a}),o.a.createElement(Ct,{onClick:s("cyan"),selected:"cyan"===t,iconcolor:ut.a}),o.a.createElement(Ct,{onClick:s("orange"),selected:"orange"===t,iconcolor:mt.a}),o.a.createElement(Ct,{onClick:s("indigo"),selected:"indigo"===t,iconcolor:pt.a}))))},Tt=function(e){return o.a.createElement(nt.a,null,o.a.createElement("svg",{style:{width:32,height:32},viewBox:"50 60 160 160"},o.a.createElement("g",null,o.a.createElement("g",null,o.a.createElement("path",{d:"M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9s-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z"}),o.a.createElement("path",{d:"M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9 s-12.9-5.8-12.9-12.9C105.9,183.5,105.9,151.2,105.9,151.2z"})),o.a.createElement("g",null,o.a.createElement("path",{d:"M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9s5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z"}),o.a.createElement("path",{d:"M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9 s5.8-12.9,12.9-12.9C86.5,105.9,118.8,105.9,118.8,105.9z"})),o.a.createElement("g",null,o.a.createElement("path",{d:"M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z"}),o.a.createElement("path",{d:"M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9 c7.1,0,12.9,5.8,12.9,12.9V118.8z"})),o.a.createElement("g",null,o.a.createElement("path",{d:"M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z"}),o.a.createElement("path",{d:"M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9 c0,7.1-5.8,12.9-12.9,12.9H151.2z"})))))},Nt=n(507),Dt=Object(E.a)((function(e){return{headerButton:{marginLeft:16},grow:{flexGrow:1},list:{width:300},tab:{color:"#000","& .icon":{}},fullHeightTab:Object(d.a)({},e.mixins.toolbar,Object(I.a)({},e.breakpoints.down("sm"),{minWidth:20})),tabWrapper:{display:"flex",flexDirection:"row",alignItems:"center",textTransform:"none",color:"#000","&&& svg":{marginBottom:0,marginRight:8,width:18,height:18}}}})),At=function(e){switch(e){case"Setup":return o.a.createElement(he.a,{className:"icon"});case"Label":return o.a.createElement(xe.a,{className:"icon"});case"Samples":return o.a.createElement(Ee.a,{className:"icon"});default:return o.a.createElement("div",null)}},_t=Object(a.memo)((function(e){var t,n=e.tabs,a=e.currentTab,r=e.onChangeTab,i=e.additionalButtons,l=e.onOpenDrawer,c=e.title,s=void 0===c?"Universal Data Tool":c,u=e.isDesktop,m=e.fileOpen,p=e.sessionBoxOpen,d=e.changeSessionBoxOpen,f=e.inSession,g=e.onCreateSession,b=e.onLeaveSession,h=e.onJoinSession,v=e.onDownload,E=e.selectedBrush,y=e.onChangeSelectedBrush,x=e.isSmall,O=(e.authConfig,e.changeLoginDrawerOpen),j=e.collaborateError,w=e.isWelcomePage,k=Dt(),C=ae(),S=C.authProvider,I=C.isLoggedIn,T=C.logout;return o.a.createElement(me.a,{color:"default",position:"static"},o.a.createElement(pe.a,{variant:"dense"},!u&&o.a.createElement(we.a,{onClick:l,className:k.headerButton},o.a.createElement(je.a,null)),m?s:"Universal Data Tool v"+ot.version,o.a.createElement(Ve,{sessionBoxOpen:p,changeSessionBoxOpen:d,fileOpen:m,inSession:f,onCreateSession:g,onLeaveSession:b,onJoinSession:h,error:j}),m&&o.a.createElement(It,{selectedBrush:E,onChangeSelectedBrush:y}),!u&&m&&o.a.createElement(tt,{onDownload:v}),o.a.createElement("div",{className:k.grow}),i,n.length>0&&o.a.createElement(de.a,{onChange:function(e,t){return r(t.toLowerCase())},value:a},n.map((function(e){return o.a.createElement(fe.a,{key:e,classes:{root:k.fullHeightTab,wrapper:k.tabWrapper},className:k.tab,icon:At(e),label:x?"":e,value:e.toLowerCase()})}))),"none"!==S&&w&&!I&&o.a.createElement(D.a,{onClick:function(){O(!0)},className:k.headerButton},"Login with ",(t=S).charAt(0).toUpperCase()+t.slice(1)),I&&o.a.createElement(D.a,{onClick:T,className:k.headerButton},"Logout"),!x&&!w&&o.a.createElement(we.a,{href:"https://github.com/UniversalDataTool/universal-data-tool",className:k.headerButton},o.a.createElement(at,null)),!x&&w&&o.a.createElement(ge.a,{paddingTop:"4px",paddingLeft:"8px"},o.a.createElement(Nt.a,{href:"https://github.com/UniversalDataTool/universal-data-tool","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star UniversalDataTool/universal-data-tool on GitHub"},"Star")),!x&&w&&o.a.createElement(we.a,{href:"https://join.slack.com/t/universaldatatool/shared_invite/zt-d8teykwi-iOSOUfxugKR~M4AJN6VL3g",className:k.headerButton},o.a.createElement(Tt,null))))})),Lt=n(179),Pt=n(1076),Ut=n(1006),Rt=n(419),Ft=n(1084),Bt=n(1085),Mt=n(516),zt=n(513),Ht=n.n(zt),Wt=n(222),qt=n(355),Vt=n.n(qt),Jt=n(277),Gt=n.n(Jt),Kt=n(510),Xt=n.n(Kt),Zt=n(278),Yt=n.n(Zt),Qt=n(110),$t=n.n(Qt),en=n(279),tn=n.n(en),nn=n(512),an=n.n(nn),on=n(280),rn=n.n(on),ln=n(221),cn=n.n(ln),sn=n(511),un=n.n(sn),mn=[{name:"Empty",Icon:Xt.a,dataset:{interface:{},samples:[]}},{name:"Image Segmentation",Icon:Vt.a,dataset:{interface:{type:"image_segmentation",labels:["valid","invalid"],regionTypesAllowed:["bounding-box","polygon","point"]},samples:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}},{name:"Image Classification",Icon:Gt.a,dataset:{interface:{type:"image_classification",labels:["valid","invalid"]},samples:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}},{name:"Video Segmentation",Icon:cn.a,dataset:{interface:{type:"video_segmentation",labels:["valid","invalid"],regionTypesAllowed:["bounding-box","polygon","point"]},samples:[{videoUrl:"https://s3.amazonaws.com/asset.workaround.online/SampleVideo_1280x720_1mb.mp4"}]}},{name:"Data Entry",Icon:$t.a,dataset:{interface:{type:"data_entry",description:"# Markdown description here",surveyjs:{questions:[{type:"text",name:"document_title",title:"Title of Document"}]}},samples:[{pdfUrl:"https://arxiv.org/pdf/1906.01969.pdf"},{pdfUrl:"https://arxiv.org/pdf/1908.07069.pdf"}]}},{name:"Named Entity Recognition",Icon:Yt.a,dataset:{interface:{type:"text_entity_recognition",overlapAllowed:!1,labels:[{id:"food",displayName:"Food",description:"Edible item."},{id:"hat",displayName:"Hat",description:"Something worn on the head."}]},samples:[{document:"This strainer makes a great hat, I'll wear it while I serve spaghetti!"},{document:"Why are all these dumpings covered in butter?!"}]}},{name:"Text Classification",Icon:un.a,dataset:{interface:{type:"text_classification",labels:["positive_sentiment","negative_sentiment"]},samples:[{document:"Wow this is terrible. I hated it."},{document:"This has made me so happy. I love this."},{document:"At first I wasn't sure. Then I thought, oh it's not very good."}]}},{name:"Audio Transcription",Icon:tn.a,dataset:{interface:{type:"audio_transcription",description:"# Markdown description here"},samples:[{audioUrl:"https://html5tutorial.info/media/vincent.mp3"}]}},{name:"Composite",Icon:an.a,dataset:{description:"# Markdown description here",interface:{type:"composite",fields:[{fieldName:"textInfo",interface:{type:"data_entry",surveyjs:{questions:[{type:"text",name:"group_letter",title:"Letter of Group"}]}}},{fieldName:"segmentation",interface:{type:"image_segmentation",labels:["group text"],regionTypesAllowed:["bounding-box"]}}]},samples:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}},{name:"Pixel Segmentation",Icon:Vt.a,dataset:{interface:{type:"image_pixel_segmentation",labels:["hair","mouth","nose","eyes"],description:"These are AI-generated faces, not real people."},samples:[{imageUrl:"https://s3.amazonaws.com/datasets.workaround.online/faces/010041.jpg"},{imageUrl:"https://s3.amazonaws.com/datasets.workaround.online/faces/010026.jpg"},{imageUrl:"https://s3.amazonaws.com/datasets.workaround.online/faces/010025.jpg"}]}},{name:"3D Bounding Box",Icon:rn.a,dataset:{interface:{type:"3d_bounding_box",description:"3D Bounding Box"},samples:[{}]}}],pn=mn.reduce((function(e,t){return e[t.name]=t,e[t.dataset.interface.type]=t,e}),{}),dn=mn,fn=n(515),gn=n.n(fn),bn=n(514),hn=n.n(bn),vn=Object(E.a)({}),En=function(e){var t=e.recentItems,n=e.changeRecentItems,r=e.onClickHome,i=e.onCloseDrawer,l=e.drawerOpen,c=e.onOpenFile,s=e.onOpenRecentItem,u=e.onClickTemplate,m=vn(),p=Object(a.useCallback)((function(e){c(e[0])}),[c]);var d=Object(Lt.a)({onDrop:p}),f=d.getRootProps,g=d.getInputProps;return o.a.createElement(y.a,{open:l,onClose:i},o.a.createElement(Pt.a,{className:m.list},o.a.createElement(Ut.a,{onClick:r,button:!0},o.a.createElement(Ft.a,null,o.a.createElement(Ht.a,null)),o.a.createElement(Rt.a,null,"Home")),o.a.createElement(Ut.a,Object.assign({},f(),{button:!0}),o.a.createElement(Ft.a,null,o.a.createElement(hn.a,null)),o.a.createElement(Rt.a,null,"Open File"),o.a.createElement("input",g())),o.a.createElement(Bt.a,null,"Recent Files"),0===t.length?o.a.createElement(Ut.a,null,o.a.createElement(Rt.a,{style:{textAlign:"center",color:Se.a[500]}},"No Recent Items")):t.map((function(e,a){return o.a.createElement(Ut.a,{key:e.fileName,button:!0},o.a.createElement(Ft.a,{onClick:function(){s(e)}},o.a.createElement(gn.a,null)),o.a.createElement(Rt.a,{onClick:function(){s(e)}},e.fileName),o.a.createElement(Ft.a,{onClick:function(){var a;a=e.id,n(t.filter((function(e){return e.id!==a})))}},o.a.createElement(Wt.b,null)))})),o.a.createElement(Bt.a,null,"Create From Template"),dn.map((function(e){return o.a.createElement(Ut.a,{button:!0,key:e.name,onClick:function(){return u(e)}},o.a.createElement(Ft.a,null,o.a.createElement(e.Icon,null)),o.a.createElement(Rt.a,null,e.name))})),o.a.createElement(Bt.a,null,"Explore More"),o.a.createElement(Ut.a,{button:!0,onClick:function(){window.location.href="https://github.com/OpenHumanAnnotation/universal-data-tool/releases"}},o.a.createElement(Ft.a,null,o.a.createElement(Mt.a,null)),o.a.createElement(Rt.a,null,"Github"))))},yn=Object(a.createContext)({recentItems:[],changeRecentItems:function(){return null},onClickTemplate:function(){return null},onClickHome:function(){return null},onOpenFile:function(){return null},onOpenRecentItem:function(){return null},isDesktop:!1,inSession:!1,onJoinSession:function(){return null},onCreateSession:function(){return null},onLeaveSession:function(){return null},sessionBoxOpen:!1,changeSessionBoxOpen:function(){return null},fileOpen:!1,onDownload:function(){return null},authConfig:null,onUserChange:function(){return null},user:null,logoutUser:function(){return null}}),xn=[],On=function(e){var t=e.additionalButtons,n=void 0===t?xn:t,r=e.title,i=e.currentTab,l=e.onChangeTab,c=e.tabs,s=void 0===c?xn:c,u=Object(a.useState)(!1),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Object(a.useState)(!1),g=Object(h.a)(f,2),b=g[0],E=g[1],y=Object(a.useContext)(yn);y.recentItems||(y.recentItems=[]);var x=Object(v.a)("(max-width: 800px)"),O=Object(a.useCallback)((function(){return d(!0)}),[]),j=Object(a.useCallback)((function(){return d(!1)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(_t,Object.assign({tabs:s,currentTab:i,onChangeTab:l,additionalButtons:n,onOpenDrawer:O,isSmall:x},y,{changeLoginDrawerOpen:E,title:r})),o.a.createElement(En,{drawerOpen:p,onCloseDrawer:j,onClickHome:y.onClickHome,recentItems:y.recentItems,changeRecentItems:y.changeRecentItems,onOpenFile:y.onOpenFile,onClickTemplate:y.onClickTemplate,onOpenRecentItem:y.onOpenRecentItem}),o.a.createElement(ue,{authConfig:y.authConfig,loginDrawerOpen:b,onClose:function(){return E(!1)},onUserChange:y.onUserChange,logoutUser:y.logoutUser}))},jn=n(1090),wn=n(1089),kn=n(1088),Cn=n(1087),Sn=n(518),In=n.n(Sn),Tn=n(223),Nn=n.n(Tn),Dn=n(517),An=n.n(Dn),_n=n(172),Ln=n.n(_n),Pn=Object(U.a)(Cn.a)({backgroundColor:Se.a[100],borderBottom:"1px solid ".concat(Se.a[300]),paddingBottom:12,boxShadow:"0px 2px 3px rgba(0,0,0,0.05)"}),Un=Object(U.a)(kn.a)({paddingTop:16}),Rn=Object(U.a)(wn.a)({backgroundColor:Se.a[100],borderTop:"1px solid ".concat(Se.a[300])}),Fn=function(e){var t=e.open,n=void 0!==t&&t,r=e.title,i=e.children,l=e.markdownContent,c=e.onClose,s=e.red,m=e.noActionBar,p=void 0!==m&&m,d=e.actions,f=void 0===d?[]:d,g=Object(a.useState)(!1),b=Object(h.a)(g,2),v=b[0],E=b[1];return o.a.createElement(jn.a,{open:n,onClose:c,fullScreen:v},o.a.createElement(Pn,null,o.a.createElement(ge.a,{display:"flex",alignItems:"center"},o.a.createElement("span",{style:{color:s?B.a[700]:void 0}},r),o.a.createElement("div",{style:{flexGrow:1}}),o.a.createElement(we.a,{onClick:function(){return E(!v)}},v?o.a.createElement(An.a,null):o.a.createElement(Nn.a,null)),o.a.createElement(we.a,{onClick:c},o.a.createElement(In.a,null)))),o.a.createElement(Un,null,o.a.createElement(ge.a,{maxWidth:"90vw",minWidth:400,lineHeight:1.5},l?o.a.createElement(Ln.a,{source:l}):i)),!p&&o.a.createElement(Rn,null,o.a.createElement(D.a,{onClick:function(){return c()}},o.a.createElement("span",{style:{color:Se.a[700],fontWeight:500}},"Close")),f.map((function(e,t){return o.a.createElement(D.a,{disabled:e.disabled,key:t,onClick:e.onClick},o.a.createElement("span",{style:{color:s?B.a[700]:u.a[700],fontWeight:500}},e.text))}))))},Bn=Object(E.a)({bigButton:{padding:10,width:150,height:120,border:"1px solid #ccc",margin:10},bigIcon:{width:48,height:48}}),Mn=function(e){var t=e.open,n=e.onClose,a=e.onSelect,r=Bn();return o.a.createElement(Fn,{title:"Create from Template",open:t,onClose:n},dn.map((function(e){return o.a.createElement(D.a,{key:e.name,onClick:function(){return a(e)},className:r.bigButton},o.a.createElement("div",null,o.a.createElement("div",null,e.name),o.a.createElement("div",null,o.a.createElement(e.Icon,{className:r.bigIcon}))))})))},zn=[{name:"AWS - Cognito",provider:"cognito",Icon:function(e){return o.a.createElement(nt.a,Object.assign({},e,{viewBox:"0 0 75 75"}),o.a.createElement("g",{id:"Reference"},o.a.createElement("rect",{id:"Red_Light_BG","data-name":"Red Light BG",style:{fill:"#d6242d"},width:"75",height:"75"}),o.a.createElement("g",{id:"Product_Icon","data-name":"Product Icon"},o.a.createElement("path",{style:{fill:"#fff"},d:"M55,15H16.46a3.92,3.92,0,0,0-3.71,4.1v24.8A3.92,3.92,0,0,0,16.46,48H37.75V46H16.46a2,2,0,0,1-1.71-2.1V27h18V42a1,1,0,0,0,1,1h8V41H35.2V40.7a7.74,7.74,0,0,1,5.53-7.43,5.91,5.91,0,0,0,4.92,0,7.82,7.82,0,0,1,4.42,3.42l1.7-1v0a9.8,9.8,0,0,0-4.34-3.82,5.4,5.4,0,0,0,1.27-3.48,5.5,5.5,0,0,0-11,0A5.42,5.42,0,0,0,39,31.8a9.67,9.67,0,0,0-4.22,3.62V22h17v13.7h0V36h2V27h3V37h2l0-17.9A3.92,3.92,0,0,0,55,15ZM43.2,24.87a3.48,3.48,0,0,1,3.5,3.46,3.43,3.43,0,0,1-1.81,3,3.57,3.57,0,0,1-3.39,0,3.44,3.44,0,0,1-1.8-3A3.48,3.48,0,0,1,43.2,24.87ZM53.75,25V21a1,1,0,0,0-1-1h-19a1,1,0,0,0-1,1v4h-18v-5.9A2,2,0,0,1,16.46,17H55a2,2,0,0,1,1.73,2.1V25Z"}),o.a.createElement("rect",{style:{fill:"#fff"},x:"16.77",y:"31.95",width:"10.98",height:"2"}),o.a.createElement("rect",{style:{fill:"#fff"},x:"16.77",y:"36.95",width:"6.98",height:"2"}),o.a.createElement("rect",{style:{fill:"#fff"},x:"25.77",y:"36.95",width:"2.98",height:"2"}),o.a.createElement("path",{style:{fill:"#fff"},d:"M51.78,35.65h0v0Z"}),o.a.createElement("path",{style:{fill:"#fff"},d:"M52.14,60.05a10.11,10.11,0,1,1,1.22-20.14h0a10.12,10.12,0,0,1,6.46,16.61,10.47,10.47,0,0,1-3.37,2.57A10.19,10.19,0,0,1,52.14,60.05Zm0-18.22a8,8,0,0,0-3.69.9,8.11,8.11,0,0,0,7.16,14.55,8.2,8.2,0,0,0,2.71-2.07,8.11,8.11,0,0,0-5.19-13.32h0A8.22,8.22,0,0,0,52.12,41.83Z"}),o.a.createElement("path",{style:{fill:"#fff"},d:"M50.55,54.2h0a1,1,0,0,1-.71-.29l-3.23-3.23L48,49.27l2.52,2.52,5.7-5.71,1.42,1.42-6.42,6.41A1,1,0,0,1,50.55,54.2Z"}),o.a.createElement("path",{style:{fill:"#fff"},d:"M51.78,35.65h0v0Z"}))))},dataset:{interface:{},samples:[]}}],Hn=n(47),Wn=n.n(Hn),qn=n(1091),Vn=n(587),Jn=Object(E.a)({root:{position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,alignItems:"center",pointerEvents:"none"},errorBox:{display:"flex",backgroundColor:B.a[700],color:"#fff",padding:4,marginBottom:4}}),Gn=function(e){var t=e.errors,n=Jn();return o.a.createElement("div",{className:n.root},t.map((function(e){return o.a.createElement(qn.a,{key:e.id,in:e.life<5e3},o.a.createElement(Vn.a,{in:e.life>500},o.a.createElement("div",{className:n.errorBox},e.message)))})))},Kn=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){if(0===n.length)return function(){};var e=setInterval((function(){o(n.map((function(e){return Object(d.a)({},e,{life:e.life-100})})).filter((function(e){return e.life>0})))}),100);return function(){return clearInterval(e)}}),[n]),[n,function(e){o(n.concat([{id:Math.random().toString().split(".")[1],message:e,life:5e3}]))}]},Xn=Object(E.a)({bigButton:{padding:10,width:150,height:120,border:"1px solid #ccc",margin:10},bigIcon:{width:48,height:48},cognitoIcon:{width:48,height:48},howToSetupText:{padding:16,color:Se.a[600],"& a":{color:u.a[500],textDecoration:"none"}}}),Zn={cognito:{questions:[{name:"auth.cognito.identity_pool_id",title:"Amazon Cognito Identity Pool ID",placeholder:"XX-XXXX-X:XXXXXXXX-XXXX-1234-abcd-1234567890ab",type:"text",isRequired:!0},{name:"auth.cognito.region",title:"AWS Region",placeholder:"XX-XXXX-X",type:"text",isRequired:!0},{name:"auth.cognito.user_pool_id",title:"Amazon Cognito User Pool ID",placeholder:"XX-XXXX-X_12ab34cd9",type:"text",isRequired:!0},{name:"auth.cognito.user_pool_web_client_id",title:"Amazon Cognito Web Client ID",placeholder:"26-char alphanumeric string",type:"text",isRequired:!0},{name:"auth.cognito.storage.aws_s3.bucket",title:"Bucket AWS",placeholder:"Name of the bucket",type:"text",isRequired:!0},{name:"auth.cognito.storage.aws_s3.region",title:"Region of the bucket",placeholder:"XX-XXXX-X",type:"text",isRequired:!0}]}},Yn=function(e){var t=e.open,n=e.onClose,r=(e.onSelect,e.onFinish),i=(e.onAuthConfigured,Xn()),l=Object(a.useState)(null),c=Object(h.a)(l,2),s=c[0],u=c[1],m=Object(a.useState)("Add Authentication"),p=Object(h.a)(m,2),f=p[0],v=p[1],E=Kn(),y=Object(h.a)(E,2),x=y[0],O=y[1],j=X(),w=j.appConfig,k=j.setAppConfig,C=j.fromConfig,S=j.setInConfig,I=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("cognito"===t.provider){a={Auth:{identityPoolId:t["auth.cognito.identity_pool_id"],region:t["auth.cognito.region"],userPoolId:t["auth.cognito.user_pool_id"],userPoolWebClientId:t["auth.cognito.user_pool_web_client_id"],mandatorySignIn:!0,authenticationFlowType:"USER_PASSWORD_AUTH"},Storage:{AWSS3:{bucket:t["auth.cognito.storage.aws_s3.bucket"],region:t["auth.cognito.storage.aws_s3.region"]}}};try{R.default.configure(a)}catch(o){O("Invalid Cognito config: "+o.toString())}k(Object(d.a)({},w,{},t,{"auth.provider":t.provider})),n()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Fn,{title:f,open:t,onClose:function(){n()},onFinish:r},P()(s)&&zn.map((function(e,t){return o.a.createElement(D.a,{key:e.name,onClick:function(){u(e.provider),v("Add Authentication for ".concat(e.name))},className:i.bigButton},o.a.createElement("div",null,o.a.createElement("div",null,e.name),o.a.createElement("div",null,o.a.createElement(e.Icon,{className:i.cognitoIcon}))))})),"cognito"===s&&o.a.createElement("div",{className:i.howToSetupText},"Check this wiki"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/universal-data-tool/wiki/Cognito---Amplify-Authentication-Setup-Instructions"},"guide for setting up AWS Cognito with the Universal Data Tool"),"."),!P()(s)&&Zn[s]&&o.a.createElement(Wn.a,{variant:"flat",form:Zn[s],onQuestionChange:function(e,t){S(e,t)},onFinish:function(e){e.provider=s,I(e)},defaultAnswers:{"auth.cognito.identity_pool_id":C("auth.cognito.identity_pool_id"),"auth.cognito.region":C("auth.cognito.region"),"auth.cognito.user_pool_id":C("auth.cognito.user_pool_id"),"auth.cognito.user_pool_web_client_id":C("auth.cognito.user_pool_web_client_id"),"auth.cognito.storage.aws_s3.bucket":C("auth.cognito.storage.aws_s3.bucket"),"auth.cognito.storage.aws_s3.region":C("auth.cognito.storage.aws_s3.region"),"auth.provider":C("auth.provider")}}),o.a.createElement(Gn,{errors:x})))},Qn=Object(E.a)({container:{display:"flex",flexDirection:"column",backgroundColor:Se.a[900],height:"100vh"},headerButton:{fontSize:12,backgroundColor:"#fff"},downloadIcon:{marginTop:2,width:18,height:18,marginRight:4,marginLeft:-6,color:Se.a[700]}}),$n=Object(U.a)("div")((function(e){var t=e.theme;return Object(I.a)({display:"flex",justifyContent:"center",flexGrow:1,color:"#fff",overflowY:"scroll",padding:100},t.breakpoints.down("sm"),{padding:50})})),ea=Object(U.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",width:"calc(100% - 32px)",marginLeft:16,maxWidth:1e3}})),ta=Object(U.a)("div")({marginTop:20,fontSize:36,fontWeight:600,color:Se.a[300]}),na=Object(U.a)("div")({fontSize:18,marginTop:8,color:Se.a[500]}),aa=Object(U.a)("div")({marginTop:48}),oa=Object(U.a)("a")({display:"block",color:u.a[500],marginTop:4,cursor:"pointer",textDecoration:"none"}),ra=Object(U.a)("div")({fontSize:24,marginBottom:8,color:Se.a[500]}),ia=Object(U.a)("div")({color:Se.a[300],"& a":{cursor:"pointer",color:u.a[500],textDecoration:"none"}}),la=Object(U.a)("div")({color:Se.a[600],paddingTop:16}),ca=Object(U.a)("div")({height:100}),sa=function(e){var t=e.onFileDrop,n=e.onOpenTemplate,r=e.showDownloadLink,i=void 0===r||r,l=e.recentItems,c=void 0===l?[]:l,s=e.onOpenRecentItem,u=e.onClickOpenSession,m=Qn(),p=Re(),d=Object(a.useState)(!1),f=Object(h.a)(d,2),v=f[0],E=f[1];Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/package.json").then((function(e){return e.json()}));case 2:(t=e.sent).version!==ot.version&&E(t.version);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var y=Object(a.useState)(!1),x=Object(h.a)(y,2),O=x[0],w=x[1],k=Object(a.useState)(!1),C=Object(h.a)(k,2),S=C[0],I=C[1],T=Object(dt.a)((function(e){t(e[0])})),N=Object(Lt.a)({onDrop:T}),A=N.getRootProps,_=N.getInputProps;return o.a.createElement("div",{className:m.container},o.a.createElement(Mn,{open:O,onSelect:function(e){p.capture("template_clicked",{clicked_template:e.name}),n(e)},onClose:function(){return w(!1)}}),o.a.createElement(Yn,{open:S,onSelect:function(e){return n(e)},onClose:function(){return I(!1)}}),o.a.createElement(On,{additionalButtons:[v&&o.a.createElement(D.a,{variant:"outlined",key:"download-latest",className:m.headerButton,href:"https://github.com/OpenHumanAnnotation/universal-data-tool/releases"},o.a.createElement(Ge.a,{className:m.downloadIcon})," Download Version v",v),!v&&i&&o.a.createElement(D.a,{variant:"outlined",key:"download",href:"https://github.com/OpenHumanAnnotation/universal-data-tool/releases",className:m.headerButton},o.a.createElement(Ge.a,{className:m.downloadIcon})," Download")].filter(Boolean)}),o.a.createElement($n,null,o.a.createElement(ea,null,o.a.createElement(j.a,{container:!0},o.a.createElement(j.a,{xs:12,item:!0},o.a.createElement(ta,null,"Universal Data Tool"),o.a.createElement(na,null,"Open-Source Data Labeling")),o.a.createElement(j.a,{xs:6,item:!0},o.a.createElement(aa,null,o.a.createElement(ra,null,"Start"),o.a.createElement(oa,{onClick:function(){p.capture("template_clicked",{clicked_template:"empty"}),n(dn.find((function(e){return"Empty"===e.name})))}},"New File"),o.a.createElement(oa,{onClick:function(){return w(!0)}},"Start from Template"),o.a.createElement(oa,A(),o.a.createElement("input",_()),"Open File"),u&&o.a.createElement(oa,{onClick:u},"Open Collaborative Session"),o.a.createElement(oa,{onClick:function(){return I(!0)}},"Add Authentication")),o.a.createElement(aa,null,o.a.createElement(ra,null,"Recent"),0===c.length?o.a.createElement(la,null,"No Recent Files"):c.map((function(e,t){return o.a.createElement(oa,{key:t,onClick:function(){return s(e)}},e.fileName)}))),o.a.createElement(aa,null,o.a.createElement(ra,null,"Help"),o.a.createElement(oa,{href:"https://github.com/UniversalDataTool/universal-data-tool/releases"},"Downloading and Installing UDT"),o.a.createElement(oa,{href:"https://dev.to/seveibar/make-bounding-boxes-for-artificial-intelligence-with-udt-1kai"},"Labeling Images"),o.a.createElement(oa,{href:"https://github.com/UniversalDataTool/universal-data-tool"},"Github Repository"))),o.a.createElement(j.a,{xs:6,item:!0},o.a.createElement(aa,null,o.a.createElement(ra,null,"About"),o.a.createElement(ia,null,"The Universal Data Tool (UDT) is an open-source web or downloadable tool for labeling data for usage in machine learning or data processing systems.",o.a.createElement("br",null),o.a.createElement("br",null),"The Universal Data Tool supports Computer Vision, Natural Language Processing (including Named Entity Recognition and Audio Transcription) workflows.",o.a.createElement("br",null),o.a.createElement("br",null),"The UDT uses an"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/udt-format"},"open-source data format (.udt.json / .udt.csv)")," ","that can be easily read by programs as a ground-truth dataset for machine learning algorithms.",o.a.createElement("br",null),o.a.createElement("br",null))),o.a.createElement(aa,null,o.a.createElement(ra,null,"Instant Try Now"),o.a.createElement(ia,null,o.a.createElement(oa,{style:{display:"inline"},onClick:function(){return w(!0)}},"Open a template")," ","to see how the UDT could work for your data."))),o.a.createElement(j.a,{xs:12,item:!0},o.a.createElement(ca,null))))))},ua=n(285),ma=n.n(ua),pa=Object(E.a)({textField:{marginLeft:8}}),da=function(e){var t=e.value,n=e.onChange,r=pa(),i=Object(a.useState)({editing:!1,newValue:t||""}),l=Object(h.a)(i,2),c=l[0],s=c.editing,u=c.newValue,m=l[1];return Object(a.useEffect)((function(){P()(u)||"unnamed"===u?m({editing:s,newValue:t}):m({editing:s,newValue:u})}),[u,s,t]),Object(a.useEffect)((function(){if(s){var e=function(e){"Enter"===e.key&&(n(u),m({editing:!1}))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[s,u,n]),Object(a.useEffect)((function(){if(u){if(s){var e=setTimeout((function(){n(u),m({editing:!1})}),t===u?1e4:2e3);return function(){return clearTimeout(e)}}return function(){}}}),[s,u,t,n]),o.a.createElement(N.a,{className:r.textField,label:"File Name",variant:"outlined",size:"small",InputProps:{inputProps:{style:{color:"#000"}}},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.target.blur())},onKeyPress:function(e){e.stopPropagation()},onChange:function(e){m({editing:!0,newValue:e.target.value})},value:u||""})},fa=n(296),ga=n(190),ba=n.n(ga),ha=n(99),va=n.n(ha),Ea=n(112),ya=n.n(Ea),xa=n(36),Oa=n.n(xa),ja=n(1109),wa=Object(U.a)("div")({flexWrap:"wrap",height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column"}),ka=Object(U.a)("div")({fontSize:24,color:Se.a[500],padding:30,textAlign:"center"}),Ca=Object(U.a)("div")((function(e){var t=e.color;return{color:"#fff",fontVariantNumeric:"tabular-nums",margin:4,padding:4,backgroundColor:t[500],display:"inline-flex",fontSize:14,fontWeight:500,textAlign:"center",justifyContent:"center",minWidth:"3em",borderRadius:3,cursor:"pointer",userSelect:"none",transition:"box-shadow 200ms ease, transform 200ms ease, background-color 200ms ease","&:hover":{backgroundColor:t[700]},"&.selected":{backgroundColor:t[700],boxShadow:"0px 0px 2px 1px ".concat(t.A200),transform:"scale(1.05,1.05)"}}})),Sa=Object(a.memo)((function(e){var t=e.index,n=e.onClick,a=e.completed,r=e.selected,i=e.onMouseDown,l=e.onMouseUp,c=e.onMouseEnter,s=e.brush;return o.a.createElement(Ca,{className:Oa()({completed:a,selected:r}),onClick:function(){return n(t)},onMouseDown:function(){return i(t)},onMouseUp:function(){return l(t)},onMouseEnter:function(){return c(t)},color:Ot(s)},t)}),(function(e,t){return e.index===t.index&&e.completed===t.completed&&e.selected===t.selected&&e.brush===t.brush})),Ia=function(e){var t=e.count,n=e.completed,r=void 0===n?[]:n,i=e.samples,l=e.onClick,c=Object(z.a)("samplesPerPage",100),s=Object(h.a)(c,2),u=s[0],m=s[1],p=Object(z.a)("sampleOffset",0),d=Object(h.a)(p,2),f=d[0],g=d[1];Object(a.useEffect)((function(){f>t&&g(0)}),[g,f,t]);var b=Object(a.useReducer)((function(e,t){return null===t?null:"number"===typeof t?e?[Math.min(t,e[0]),Math.max(t+1,e[1])]:null:t}),null),v=Object(h.a)(b,2),E=v[0],y=v[1],x=Object(a.useCallback)((function(e){return y([e,e+1])}),[y]),O=Object(a.useCallback)((function(e){return y(e)}),[y]),j=Object(a.useCallback)((function(){}),[]),w=Object(a.useCallback)((function(e){1!==e.buttons&&y(null)}),[y]),k=Object(dt.a)(l);return o.a.createElement(wa,{onMouseUp:w,onMouseEnter:w},0===t&&o.a.createElement(ka,null,'No samples, try using "Import Toy Dataset" in Samples > Import'),o.a.createElement(ge.a,{flexGrow:1},ya()(f,Math.min(t,f+u)).map((function(e){return o.a.createElement(Sa,{onClick:k,key:e,index:e,completed:r[e],brush:r[e]?i[e].brush||"complete":"incomplete",selected:E&&e>=E[0]&&e<E[1],onMouseDown:x,onMouseEnter:O,onMouseUp:j})}))),o.a.createElement(ja.a,{rowsPerPageOptions:[100,250,500,1e3,2e3,1e4],component:"div",count:t,rowsPerPage:u,page:Math.floor(f/u),labelRowsPerPage:"Samples per Page:",onChangePage:function(e,t){return g(t*u)},onChangeRowsPerPage:function(e){return m(+e.target.value)}}))},Ta=n(546),Na=n.n(Ta),Da=n(545),Aa=n.n(Da),_a=n(547),La=n.n(_a),Pa=n(544),Ua=n.n(Pa),Ra=n(537),Fa=n.n(Ra),Ba=n(538),Ma=n.n(Ba),za=n(539),Ha=n.n(za),Wa=n(291),qa=n.n(Wa),Va=n(540),Ja=n.n(Va),Ga=n(85),Ka=Object(U.a)("div")({marginTop:8,marginBottom:16}),Xa=Object(U.a)("textarea")({width:"100%",minHeight:300}),Za=Object(U.a)("div")({color:B.a[600],padding:16}),Ya=[{label:"Auto Detect File Type",value:"auto_detect"},{label:"Image URLs",value:"images"}],Qa=function(e){var t=e.open,n=e.onClose,r=e.onAddSamples,i=Object(a.useState)(""),l=Object(h.a)(i,2),c=l[0],s=l[1],u=Object(a.useState)("auto_detect"),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Object(a.useState)(""),g=Object(h.a)(f,2),b=g[0],v=g[1];return o.a.createElement(Fn,{title:"Paste Urls",open:t,onClose:n,actions:[{text:"Add Samples",onClick:function(){try{r(c.split("\n").map((function(e){return e.trim()})).filter(Boolean).map((function(e){if("images"===p)return{imageUrl:e};var t=e.replace(/\?.*/g,"").split(".").slice(-1)[0];switch(e.includes("gstatic.com/images")&&(t="jpg"),t.toLowerCase()){case"png":case"jpg":case"gif":case"jpeg":case"bmp":return{imageUrl:e};case"pdf":return{pdfUrl:e};case"mp3":case"wav":return{audioUrl:e};default:throw new Error('extension not recognized: "'.concat(t,'" in "').concat(e,'"'))}})).filter(Boolean))}catch(e){v(e.toString())}}}]},o.a.createElement(Ka,null,o.a.createElement(Ga.default,{options:Ya,defaultValue:Ya[0],onChange:function(e){d(e.value)}})),b&&o.a.createElement(Za,null,b),o.a.createElement(Xa,{onChange:function(e,t){return s(e.target.value)},placeholder:"Paste URLs here\nOne URL per line"}))},$a=n(490),eo=n(1072),to=n(1073),no=n(1110),ao=n(451),oo=function(e){var t;return P()(e)||(P()(e.imageUrl)||(t=decodeURI(e.imageUrl).match(".*\\/(([^\\/\\\\&\\?]*)\\.([a-zA-Z0-9]*))(\\?|$)")),P()(e.videoUrl)||(t=decodeURI(e.videoUrl).match(".*\\/(([^\\/\\\\&\\?]*)\\.([a-zA-Z0-9]*))(\\?|$)")),P()(e.audioUrl)||(t=decodeURI(e.audioUrl).match(".*\\/(([^\\/\\\\&\\?]*)\\.([a-zA-Z0-9]*))(\\?|$)")),P()(e.pdfUrl)||(t=decodeURI(e.pdfUrl).match(".*\\/(([^\\/\\\\&\\?]*)\\.([a-zA-Z0-9]*))(\\?|$)"))),t},ro=function(e){var t="File",n=e.match("\\/?([^\\/\\\\&\\?]*\\.([a-zA-Z0-9]*))(\\?|$)");return P()(n)||(n=n[2].toLowerCase()),"jpg"!==n&&"jpeg"!==n&&"png"!==n&&"ico"!==n&&"jpe"!==n&&"gif"!==n||(t="Image"),"mp4"!==n&&"mkv"!==n||(t="Video"),"mp3"===n&&(t="Audio"),"pdf"===n&&(t="PDF"),"txt"===n&&(t="Texte"),t},io=n(9),lo=n.n(io),co=function(e){return P()(e.sampleName)?oo(e)[1]:e.sampleName},so=function(e){return e.imageUrl||e.videoUrl||e.audioUrl||e.pdfUrl||void 0},uo=function(e,t,n){var a=ro(t);return"Image"===a?{annotation:n,imageUrl:t,sampleName:e}:"Video"===a?{annotation:n,videoUrl:t,sampleName:e}:"Audio"===a?{annotation:n,audioUrl:t,sampleName:e}:"PDF"===a?{annotation:n,pdfUrl:t,sampleName:e}:void 0},mo=function(e,t){if(!e||!e.samples||!t)return null;for(var n=e.samples,a=0;a<n.length;a++)if(!P()(n[a])){var o=oo(n[a]);if("undefined"!==typeof n[a].sampleName&&(o[1]=n[a].sampleName),o[1]===t)return n[a]}return null},po=function(e){if(e&&e.samples){for(var t=0;t<e.samples.length;t++)if(!P()(e.samples[t])){var n,a=e.samples[t];P()(a.document)?(n=oo(a),n=fo(e.samples,a,n)):n=[a.document,"sample"+t.toString()+".txt","sample","txt"],a=Object(io.setIn)(a,["sampleName"],n[1]),e=Object(io.setIn)(e,["samples",t],a)}return e}},fo=function(e,t,n){for(var a=!0,o=1;a;){var r=mo(n[1],e);null!==r&&so(r)!==so(t)?(P()(n[2].match("(.*)\\([0-9]*\\)$"))?n[1]=n[2]+"("+o.toString()+")."+n[3]:n[1]=n[2].match("(.*)\\([0-9]*\\)$")[1]+"("+o.toString()+")NaN"+n[3],o++):a=!1}return n},go=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];P()(a.annotation)||(a=Object(io.setIn)(a,["annotation"],null)),t.push(a)}return t},bo=function(e,t){var n={fileName:!1,content:{interface:{type:!1,labels:!1,regionTypesAllowed:!1},samples:!1},id:!1,mode:!1,any:!1};return P()(t)?n:P()(e)?(n.fileName=!0,n.content.interface.type=!0,n.content.interface.labels=!0,n.content.interface.regionTypesAllowed=!0,n.content.samples=!0,n.id=!0,n.mode=!0,n.any=!0,n):(e===t||(n.any=!0,P()(t.id)||(P()(e.id)||t.id!==e.id)&&(n.id=!0),P()(t.content)||(P()(e.content)?(n.content.interface.type=!0,n.content.interface.labels=!0,n.content.interface.regionTypesAllowed=!0,n.content.samples=!0):t.content!==e.content&&(P()(t.content.interface)||(P()(e.content.interface)?(n.content.interface.type=!0,n.content.interface.labels=!0,n.content.interface.regionTypesAllowed=!0):t.content.interface!==e.content.interface&&(P()(t.content.interface.type)||(P()(e.content.interface.type)||t.content.interface.type!==e.content.interface.type)&&(n.content.interface.type=!0),P()(t.content.interface.labels)||(P()(e.content.interface.labels)||t.content.interface.labels!==e.content.interface.labels)&&(n.content.interface.labels=!0),P()(t.content.interface.regionTypesAllowed)||(P()(e.content.interface.regionTypesAllowed)||t.content.interface.regionTypesAllowed!==e.content.interface.regionTypesAllowed)&&(n.content.interface.regionTypesAllowed=!0))),P()(t.content.samples)||(P()(e.content.samples)||t.content.samples!==e.content.samples)&&(n.content.samples=!0))),P()(t.mode)||(P()(e.mode)||t.mode!==e.mode)&&(n.mode=!0),P()(t.fileName)||(P()(e.fileName)||t.fileName!==e.fileName)&&(n.fileName=!0)),n)};function ho(e,t){return e.find((function(e){return e.key==="".concat(t,"/annotations/annotations.json")}))}function vo(e,t){if(!P()(e.content.samples)){for(var n=[],a=0;a<e.content.samples.length;a++){var o,r=co(e.content.samples[a]),i=e.content.samples[a].annotation,l=mo(r,t);o=so(null===l?t:l),n.push(uo(r,o,i))}e.content.samples=n}}var Eo=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,o){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.default.configure(o),r=null,!ho(t,a)){e.next=5;break}return e.next=5,ao.a.get("".concat(a,"/annotations/annotations.json"),{expires:1728e5,level:"private"}).then(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().then(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t.content){e.next=2;break}return e.abrupt("return");case 2:vo(r=t,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error getting link for s3 image",e),null}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,o){return e.apply(this,arguments)}}();function yo(e,t){return xo.apply(this,arguments)}function xo(){return(xo=Object(b.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.loadProjectIsSelected){e.next=17;break}if("Image"!==ro(t)){e.next=5;break}return e.abrupt("return",{imageUrl:"".concat(t)});case 5:if("Video"!==ro(t)){e.next=9;break}return e.abrupt("return",{videoUrl:"".concat(t)});case 9:if("Audio"!==ro(t)){e.next=13;break}return e.abrupt("return",{audioUrl:"".concat(t)});case 13:if("PDF"!==ro(t)){e.next=15;break}return e.abrupt("return",{pdfUrl:"".concat(t)});case 15:e.next=38;break;case 17:if(ro(t)!==n.typeOfFileToLoad||"Image"!==n.typeOfFileToLoad){e.next=21;break}return e.abrupt("return",{imageUrl:"".concat(t)});case 21:if(ro(t)!==n.typeOfFileToLoad||"Video"!==n.typeOfFileToLoad){e.next=25;break}return e.abrupt("return",{videoUrl:"".concat(t)});case 25:if(ro(t)!==n.typeOfFileToLoad||"Audio"!==n.typeOfFileToLoad){e.next=29;break}return e.abrupt("return",{audioUrl:"".concat(t)});case 29:if(ro(t)!==n.typeOfFileToLoad||"PDF"!==n.typeOfFileToLoad){e.next=33;break}return e.abrupt("return",{pdfUrl:"".concat(t)});case 33:if(ro(t)!==n.typeOfFileToLoad||"Texte"!==n.typeOfFileToLoad){e.next=38;break}return e.next=36,Oo(t);case 36:return a=e.sent,e.abrupt("return",{document:"".concat(a)});case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e){return jo.apply(this,arguments)}function jo(){return(jo=Object(b.a)(g.a.mark((function e(t){var n,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/",a="https://cors-anywhere.herokuapp.com/"+t,e.next=4,fetch(a,{method:"GET"}).catch((function(e){console.log("Looks like there was a problem: \n",e)}));case 4:return n=e.sent,e.next=7,n.text();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}for(var wo=function(){var e=Object(b.a)(g.a.mark((function e(t,n,a,o){var r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.default.configure(o),r=[],i=0;case 3:if(!(i<t.length)){e.next=10;break}if(!t[i].key.match("(".concat(n,"/data).*(\\.).*"))){e.next=7;break}return e.next=7,ao.a.get(t[i].key,{expires:1728e5,level:"private"}).then(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,yo(t,a);case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error getting link for s3 image",e),null}));case 7:i++,e.next=3;break;case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,o){return e.apply(this,arguments)}}(),ko=function(e,t){var n,a,o=[null,null];return!P()(t)&&(o[0]="image_classification"===(n=t.content.interface.type)||"image_segmentation"===n||"composite"===n?"Image":"video_segmentation"===n?"Video":"audio_transcription"===n?"Audio":"data_entry"===n?"PDF":"text_entity_recognition"===n||"text_classification"===n?"Texte":P()(n)?"Empty":"File",o[1]=(a=t.content.samples,P()(a)||P()(a[0])?"Empty":P()(a[0].imageUrl)?P()(a[0].videoUrl)?P()(a[0].audioUrl)?P()(a[0].pdfUrl)?P()(a[0].document)?"File":"Texte":"PDF":"Audio":"Video":"Image"),!(!e.includes(o[0])||!e.includes(o[1])))},Co=function(e,t,n){var a=e.content;return a=Object(io.setIn)(a,["samples"],function(e,t,n){var a=e;"incoming"===n&&(a=go(e));var o=t;return"current"===n&&(o=go(t)),a.concat(o)}(e.content.samples,t.content.samples,n.annotationToKeep)),a=Object(io.setIn)(a,["interface"],t.content.interface),e=Object(io.setIn)(e,["content"],a),(P()(e.fileName)||"unnamed"===e.fileName)&&(e=Object(io.setIn)(e,["fileName"],t.fileName)),e},So={color:"DodgerBlue"},Io={marginLeft:"auto",marginRight:"auto",width:"100%"},To=[{name:"Data",selector:"data",sortable:!0},{name:"Last Modified",selector:"lastModified",sortable:!0}],No=[{name:"Annotations",selector:"annotation"},{name:"Last Modified",selector:"lastModified",sortable:!0}],Do=[{name:"Projects",selector:"folder",sortable:!0}],Ao={headCells:{style:{paddingLeft:"10px","font-weight":"bold"}},cells:{style:{paddingLeft:"25px"}}},_o=function(e){var t=e.data,n=t.rowData,a=t.rowAnnotations;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ba.a,{style:{boxSizing:"border-box",paddingLeft:"50px",paddingRight:"10px"},dense:!0,striped:!0,noHeader:!0,columns:No,data:a,noDataComponent:'Make sure the project has "annotations" folder',pagination:n.length>10,paginationPerPage:10,paginationRowsPerPageOptions:[10,20,25,50,100,200],customStyles:Ao}),o.a.createElement(ba.a,{style:{boxSizing:"border-box",paddingLeft:"50px",paddingRight:"10px"},dense:!0,striped:!0,noHeader:!0,columns:To,data:n,noDataComponent:'Make sure the project has "data" folder',pagination:n.length>10,paginationPerPage:10,paginationRowsPerPageOptions:[10,20,25,50,100,200],customStyles:Ao}))},Lo=function(e){var t=e.file,n=e.open,r=e.onClose,i=e.onAddSamples,l=e.onChangeFile,c=ae(),s=c.authProvider,u=c.user,m=c.authConfig,p=Object(a.useState)("Add Samples"),f=Object(h.a)(p,2),v=f[0],E=f[1],y=Object(a.useState)(null),x=Object(h.a)(y,2),O=x[0],j=x[1],w=Object(a.useState)(null),k=Object(h.a)(w,2),C=k[0],S=k[1],I=Object(a.useState)(""),T=Object(h.a)(I,2),N=T[0],_=T[1],L=Object(z.a)("configImport",function(e){return{annotationToKeep:"both",typeOfFileToLoad:ko(["Image","Empty"],e)?"Image":ko(["Video","Empty"],e)?"Video":ko(["Audio","Empty"],e)?"Audio":ko(["PDF","Empty"],e)?"PDF":ko(["Texte","Empty"],e)?"Texte":"None",typeOfFileToDisable:{Image:!ko(["Image","Empty"],e),Video:!ko(["Video","Empty"],e),Audio:!ko(["Audio","Empty"],e),PDF:!ko(["PDF","Empty"],e),Texte:!ko(["Texte","Empty"],e)},loadProjectIsSelected:!0,contentDialogBoxIsSetting:!1,projectStarted:!1}}(t)),U=Object(h.a)(L,2),R=U[0],F=U[1],B=Object(a.useRef)({}),M=Object(a.useCallback)((function(){if("cognito"===s)return!(P()(t)||P()(t.content)||P()(t.content.interface)&&P()(t.content.samples))}),[t,s]);Object(a.useEffect)((function(){if("cognito"===s&&t!==B.current){var e=R,n=bo(B.current,t);(n.content.interface.type||n.content.samples)&&B.current!=={}&&(e=function(e,t){return Object(d.a)({},e,{typeOfFileToLoad:P()(e)||P()(e.typeOfFileToLoad)||!ko([e.typeOfFileToLoad,"Empty"],t)?ko(["Image","Empty"],t)?"Image":ko(["Video","Empty"],t)?"Video":ko(["Audio","Empty"],t)?"Audio":ko(["PDF","Empty"],t)?"PDF":ko(["Texte","Empty"],t)?"Texte":"None":e.typeOfFileToLoad,typeOfFileToDisable:{Image:!ko(["Image","Empty"],t),Video:!ko(["Video","Empty"],t),Audio:!ko(["Audio","Empty"],t),PDF:!ko(["PDF","Empty"],t),Texte:!ko(["Texte","Empty"],t)}})}(e,t)),F(Object(d.a)({},e,{projectStarted:M(),loadProjectIsSelected:!M()&&F.loadProjectIsSelected})),B.current=t}}),[t,R,F,M,s]);var H=function(){var e=Object(b.a)(g.a.mark((function e(){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(O,N,R,m);case 2:if(n=e.sent,a=null,!R.loadProjectIsSelected){e.next=8;break}return e.next=7,Eo(O,n,N,m);case 7:a=e.sent;case 8:P()(a)||P()(a.content)||P()(a.content.samples)||P()(a.fileName)?i(n):(t=Co(t,a,R),l(t,!0),i([]));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function W(){F(Object(d.a)({},R,{loadProjectIsSelected:!R.loadProjectIsSelected}))}return Object(a.useEffect)((function(){var e=function(e,t,n){var a,o=0,r="";if(!P()(n)){for(var i=0;i<n.length;i++)if(n[i].isSelected&&(a=n[i].folder,!P()(n[i].rowData)))for(var l=0;l<n[i].rowData.length;l++)ro(n[i].rowData[l].data)===t&&o++;r=e?"Load "+a:"Add "+o+" "+t}return r}(R.loadProjectIsSelected,R.typeOfFileToLoad,C);E(e)}),[R.loadProjectIsSelected,R.typeOfFileToLoad,C]),Object(a.useEffect)((function(){P()(u)?j(null):P()(m)||ao.a.list("",{level:"private"}).then((function(e){j(e);var t=e.filter((function(e){return e.key.endsWith("/")&2===e.key.split("/").length})).map((function(t,n){var a=t.key.split("/")[0],o=e.filter((function(e){return e.key.startsWith("".concat(a,"/data/"))&!e.key.endsWith("/")})).map((function(e){return{data:e.key.split("/data/")[1],lastModified:e.lastModified.toDateString()}})),r=e.filter((function(e){return e.key.startsWith("".concat(a,"/annotations/"))&!e.key.endsWith("/")})).map((function(e){return{annotation:e.key.split("/annotations/")[1],lastModified:e.lastModified.toDateString()}}));return{id:"".concat(n),folder:a,rowData:o,rowAnnotations:r,isSelected:!0}}));S(t)})).catch((function(e){return console.log(e)}))}),[u,m]),o.a.createElement(Fn,{title:"Select Project",open:n,onClose:r,actions:[{text:v,onClick:function(){H()},disabled:R.contentDialogBoxIsSetting}]},o.a.createElement("table",{style:Io},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,R.loadProjectIsSelected?o.a.createElement(D.a,{style:So,onClick:W,disabled:!0},"Load Project"):o.a.createElement(D.a,{onClick:W,disabled:R.projectStarted},"Load Project"),R.loadProjectIsSelected?o.a.createElement(D.a,{onClick:W},"Load Samples"):o.a.createElement(D.a,{style:So,onClick:W,disabled:!0},"Load Samples"),o.a.createElement(we.a,{onClick:function(){F(Object(d.a)({},R,{contentDialogBoxIsSetting:!R.contentDialogBoxIsSetting}))}},R.contentDialogBoxIsSetting?o.a.createElement(Ee.a,null):o.a.createElement(he.a,null)))),R.contentDialogBoxIsSetting?o.a.createElement("tr",null,o.a.createElement("th",null,R.loadProjectIsSelected?o.a.createElement(eo.a,{component:"fieldset"},o.a.createElement(to.a,{component:"legend"},"Annotation processing"),o.a.createElement(no.a,{"aria-label":"option1",onChange:function(e){F(Object(d.a)({},R,{annotationToKeep:e.target.value}))}},o.a.createElement(A.a,{value:"both",control:o.a.createElement($a.a,null),label:"Keep both annotations",checked:"both"===R.annotationToKeep}),o.a.createElement(A.a,{value:"incoming",control:o.a.createElement($a.a,null),label:"Keep incoming annotations",checked:"incoming"===R.annotationToKeep}),o.a.createElement(A.a,{value:"current",control:o.a.createElement($a.a,null),label:"Keep current annotations",checked:"current"===R.annotationToKeep}))):o.a.createElement(eo.a,{component:"fieldset"},o.a.createElement(to.a,{component:"legend"},"Choose file type"),o.a.createElement(no.a,{"aria-label":"option2",onChange:function(e){F(Object(d.a)({},R,{typeOfFileToLoad:e.target.value}))}},o.a.createElement(A.a,{value:"Image",control:o.a.createElement($a.a,null),label:"Load image file",disabled:R.typeOfFileToDisable.Image,checked:"Image"===R.typeOfFileToLoad}),o.a.createElement(A.a,{value:"Video",control:o.a.createElement($a.a,null),label:"Load video file",disabled:R.typeOfFileToDisable.Video,checked:"Video"===R.typeOfFileToLoad}),o.a.createElement(A.a,{value:"Audio",control:o.a.createElement($a.a,null),label:"Load audio file",disabled:R.typeOfFileToDisable.Audio,checked:"Audio"===R.typeOfFileToLoad}),o.a.createElement(A.a,{value:"PDF",control:o.a.createElement($a.a,null),label:"Load PDF file",disabled:R.typeOfFileToDisable.PDF,checked:"PDF"===R.typeOfFileToLoad}),o.a.createElement(A.a,{value:"Texte",control:o.a.createElement($a.a,null),label:"Load texte file",disabled:R.typeOfFileToDisable.Texte,checked:"Texte"===R.typeOfFileToLoad}))))):!P()(C)&&o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(ba.a,{expandableRows:!0,expandableRowsComponent:o.a.createElement(_o,null),selectableRows:!0,selectableRowsHighlight:!0,selectableRowsNoSelectAll:!0,selectableRowsComponent:$a.a,dense:!0,noHeader:!0,noTableHead:!0,columns:Do,onSelectedRowsChange:function(e){P()(e.selectedRows[0])?(_(null),S((function(e){return e.map((function(e){return e.isSelected=!1,e}))}))):(_(e.selectedRows[0].folder),S((function(t){return t.map((function(t){return e.selectedRows[0].id===t.id?t.isSelected=!0:t.isSelected=!1,t}))})))},selectableRowSelected:function(e){return e.isSelected},data:C,pagination:C.length>10,paginationPerPage:10,paginationRowsPerPageOptions:[10,20,25,50,100,200]}))))))},Po=Object(U.a)("textarea")({width:"100%",minHeight:300}),Uo=Object(U.a)("div")({fontSize:24,color:Se.a[600],textAlign:"center",padding:48}),Ro=function(){return null},Fo=function(e){var t=e.content,n=e.onChangeContent,r=e.placeholder,i=Object(dt.a)((function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result;n(t)},t.readAsText(e[0])})),l=Object(a.useState)(0),c=Object(h.a)(l,2),s=c[0],u=c[1],m=Object(dt.a)((function(e){Date.now()-s<400&&d().onClick(e),u(Date.now())})),p=Object(Lt.a)({onDrop:i}),d=p.getRootProps,f=p.getInputProps,g=p.isDragActive;return o.a.createElement("div",Object.assign({},d(),{onClick:Ro}),o.a.createElement("input",f()),g?o.a.createElement(Uo,null,"Drop the text or csv file here."):o.a.createElement(Po,{value:t,onChange:function(e,t){return n(e.target.value)},onClick:m,placeholder:r}))},Bo=function(e){var t=e.open,n=e.onClose,r=e.onAddSamples,i=Object(a.useState)(""),l=Object(h.a)(i,2),c=l[0],s=l[1];return o.a.createElement(Fn,{open:t,onClose:n,title:"Import Text Snippets",actions:[{text:"Add Samples",onClick:function(){r(c.split("\n").map((function(e){return e.trim()})).filter(Boolean).map((function(e){return{document:e}})))}}]},o.a.createElement(Fo,{content:c,onChangeContent:s,placeholder:"Paste Snippets here\nOne snippet per line.\n\nYou can also drag a text or csv file here (double click to open file dialog)"}))},Mo=function(e){return o.a.createElement(nt.a,Object.assign({},e,{viewBox:"0 0 50 50"}),o.a.createElement("g",{id:"Working"},o.a.createElement("path",{style:e.color,d:"M21.17,42.88H13.76a1,1,0,0,1-1-1v-7.5a1,1,0,0,1,1-1h7.41a1,1,0,0,1,1,1v7.5A1,1,0,0,1,21.17,42.88Zm-6.41-2h5.41v-5.5H14.76Z"}),o.a.createElement("path",{style:e.color,d:"M31,39.17a5.24,5.24,0,1,1,5.22-5.24A5.23,5.23,0,0,1,31,39.17Zm0-8.48a3.24,3.24,0,1,0,3.22,3.24A3.23,3.23,0,0,0,31,30.69Z"}),o.a.createElement("path",{style:e.color,d:"M20.22,29.75H10.85a1,1,0,0,1-.87-.51,1,1,0,0,1,0-1l4.69-7.82a1,1,0,0,1,1.71,0l4.69,7.82a1,1,0,0,1,0,1A1,1,0,0,1,20.22,29.75Zm-7.61-2h5.85l-2.92-4.87Z"}),o.a.createElement("path",{style:e.color,d:"M23.67,48.5c-6.39,0-16.5-1.45-16.63-5.34L2.51,9.55a1,1,0,0,1,2-.39c.5,1.93,8.05,4.63,19.2,4.63s18.69-2.7,19.19-4.63a1,1,0,0,1,2,.39L40.29,43.16c0,1.32-1.22,2.45-3.51,3.36a22.87,22.87,0,0,1-3.12.94A46,46,0,0,1,23.67,48.5ZM4.9,12.27,9,43s0,.09,0,.13c0,1.18,5.69,3.42,14.63,3.42a43.75,43.75,0,0,0,9.54-1A21,21,0,0,0,36,44.66c1.85-.73,2.26-1.39,2.26-1.58V43l4.14-30.68c-3.86,2.3-11.64,3.52-18.77,3.52S8.75,14.57,4.9,12.27Z"}),o.a.createElement("path",{style:e.color,d:"M23.67,15.79c-9.47,0-20.1-2.15-21.14-6.12,0-.05,0-.09,0-.13l0-.41a.62.62,0,0,1,0-.13c0-4.42,11.18-7.5,21.22-7.5S44.88,4.58,44.88,9v.13l-.06.41a.69.69,0,0,1,0,.13C43.76,13.64,33.13,15.79,23.67,15.79ZM4.48,9.21c.62,1.93,8.14,4.58,19.19,4.58s18.56-2.65,19.18-4.58l0-.27C42.75,7,34.86,3.5,23.67,3.5S4.59,7,4.45,8.94Z"}),o.a.createElement("path",{style:e.color,d:"M44.93,29.62c-4.76,0-15.18-4.71-21.7-7.91l.88-1.8c9,4.42,19.6,8.52,21.41,7.75-.14-.29-.81-1.19-4-2.92l-.16-.1,1-1.74.15.09c3.21,1.77,4.74,3.13,5,4.41a1.82,1.82,0,0,1-.4,1.52A2.77,2.77,0,0,1,44.93,29.62Z"}),o.a.createElement("path",{style:e.color,d:"M23.67,23a2.17,2.17,0,1,1,2.17-2.17A2.18,2.18,0,0,1,23.67,23Zm0-2.34a.17.17,0,0,0-.18.17c0,.19.35.19.35,0A.17.17,0,0,0,23.67,20.64Z"})))},zo=Object(U.a)("div")({marginTop:8,marginBottom:8}),Ho=Object(U.a)("img")({width:"100%",boxSizing:"border-box"}),Wo={web:{client_id:"856114516731-rndo792s25bjjno28jltd70ipajlb917.apps.googleusercontent.com",app_id:"856114516731",developer_key:"AIzaSyD7hdWRB_uz-RE-xDJEew-jFYjIv3lO4Qc"}},qo=function(e){var t=e.open,n=e.onClose,r=e.onAddSamples,i=Object(a.useState)(!1),l=Object(h.a)(i,2),c=l[0],s=l[1],u=Object(a.useState)(!1),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Object(a.useState)(null),g=Object(h.a)(f,2),b=g[0],v=g[1],E=Object(a.useState)([]),y=Object(h.a)(E,2),x=y[0],O=y[1],j=Object(a.useState)(!1),w=Object(h.a)(j,2),k=w[0],C=w[1];Object(a.useEffect)((function(){var e=document.createElement("script");return e.src="https://apis.google.com/js/api.js",e.async=!0,e.onload=function(){s(!0)},document.body.appendChild(e),function(){e.remove()}}),[]);var S=Object(a.useCallback)((function(e){e.action===window.google.picker.Action.PICKED?(O(e.docs.map((function(e){return{url:e.url,mimeType:e.mimeType,name:e.name,id:e.id}}))),C(!1)):"cancel"===e.action&&n()}),[n]),I=Object(a.useCallback)((function(){if(p&&b){var e=new window.google.picker.View(window.google.picker.ViewId.Docs);e.setMimeTypes("image/png","image/jpeg","image/jpg","image/gif","video/mp4","video/mpeg"),(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED).setAppId(Wo.web.app_id).setOAuthToken(b).addView(e).addView(window.google.picker.ViewId.DOCS).setDeveloperKey(Wo.web.developer_key).setCallback(S).build().setVisible(!0),C(!0)}}),[S,b,p]);Object(a.useEffect)((function(){I()}),[p,b,I]);var T=Object(a.useCallback)((function(e){e&&!e.error&&(v(e.access_token),I())}),[I]),N=Object(a.useCallback)((function(){window.gapi.auth.authorize({client_id:Wo.web.client_id,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},T)}),[T]),A=Object(a.useCallback)((function(){d(!0),I()}),[I]),_=Object(a.useCallback)((function(){!0===c&&(window.gapi.load("auth",{callback:N}),window.gapi.load("picker",{callback:A}))}),[c,N,A]);return Object(a.useEffect)((function(){t&&_()}),[t,c,_]),o.a.createElement(Fn,{open:t&&!k,onClose:n,title:"Import from Google Drive",actions:[x&&x.length>0&&{text:"Add ".concat(x.length," Samples"),onClick:function(){var e,t=[],n=Object(H.a)(x);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.mimeType.includes("image/")?t.push({imageUrl:"https://drive.google.com/uc?id=".concat(a.id)}):a.mimeType.includes("video/")&&t.push({videoUrl:"https://drive.google.com/uc?id=".concat(a.id)})}}catch(o){n.e(o)}finally{n.f()}r(t)}}].filter(Boolean)},o.a.createElement(D.a,{variant:"outlined",onClick:_},"Reopen Google Drive Picker"),o.a.createElement(zo,null,"Make sure your Google Drive files are available via a link."," ",o.a.createElement("b",null,"If you don't, the files will not appear when you're labeling!")),o.a.createElement(Ho,{src:"https://s3.amazonaws.com/asset.workaround.online/google-share-screenshot.png"}))},Vo=n(289),Jo=n.n(Vo),Go={},Ko=0,Xo=Object.entries({imageUrl:["image_url","image_urls","image","image_src","img_url","img","img_src"],document:["text"]});Ko<Xo.length;Ko++){var Zo,Yo=Object(h.a)(Xo[Ko],2),Qo=Yo[0],$o=Yo[1],er=Object(H.a)($o);try{for(er.s();!(Zo=er.n()).done;){var tr=Zo.value;Go[tr]=Qo}}catch(wu){er.e(wu)}finally{er.f()}}var nr=function(e){for(var t in e){var n=t.toLowerCase().replace(/ /g,"_"),a=Go[n];a&&(e[a]=e[t],delete e[t])}return e},ar=function(e){var t=Jo.a.fromCSV(e,{derivePath:function(){return"samples.*"}});if(!t.samples)throw new Error("No samples");return{interface:t.interface,taskOutput:t.samples.map((function(e){return e.output})),samples:t.samples.map(nr).map((function(e){return delete e.output,e}))}},or=Object(U.a)("div")({fontFamily:"Inter",marginBottom:20,"& a":{color:u.a[500]}}),rr=Object(U.a)("div")({color:B.a[500],whiteSpace:"pre-wrap",marginBottom:20}),ir=function(e){var t=e.open,n=e.onClose,r=e.onAddSamples,i=Object(a.useState)(null),l=Object(h.a)(i,2),c=l[0],s=l[1],u=Object(a.useState)(""),m=Object(h.a)(u,2),p=m[0],d=m[1];return o.a.createElement(Fn,{open:t,onClose:n,title:"Import JSON/CSV Samples",actions:[{text:"Add Samples",onClick:function(){var e,t;s(null);try{var n=Object(h.a)(JSON.parse(p).samples,2);e=n[0],t=n[1]}catch(o){try{var a=ar(p);e=a.samples,t=a.taskOutput}catch(i){return console.log({message:"CSV/JSON Error Stacks",jsonError:o.stack,csvError:i.stack}),void s("JSON did not parse. CSV did not parse.\n\nJSON Error: ".concat(o.toString(),"\nCSV Error: ").concat(i.toString()))}}e&&0!==e.length?r(e,t):s("No task data found")}}]},o.a.createElement(or,null,"See the"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/udt-format"},"UDT JSON format")," ","or the"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/udt-format"},"UDT CSV format")," ","for formatting details. Or take a look at a"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.json"},"sample JSON")," ","or"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.csv"},"sample CSV")," ","file."),o.a.createElement(rr,null,c),o.a.createElement(Fo,{content:p,onChangeContent:d,placeholder:"Paste CSV/JSON here. The file should be in the UDT JSON/CSV format.\n\nYou can also drag a json or csv file here (double click to open file dialog)"}))},lr=n(1094),cr=n(1097),sr=n(1092),ur=n(1093),mr=n(1095),pr=n(1096),dr=[{name:"Elon Musk Tweets",type:"text",size:2800},{name:"Cats",type:"image",size:360},{name:"VR Hand Pinching",type:"image",size:20517},{name:"AI Generated Faces",type:"image",size:1999},{name:"Text to Speech Audio",type:"audio",size:200}];function fr(e){return gr.apply(this,arguments)}function gr(){return(gr=Object(b.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name.toLowerCase().replace(/ /g,"_")+".udt.json",a="https://s3.amazonaws.com/datasets.workaround.online/".concat(n),e.next=4,fetch(a).then((function(e){return e.json()})).then((function(e){return e.samples||e.taskData}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var br=Object(U.a)(D.a)({}),hr=function(e){var t=e.onClose,n=e.onAddSamples,a=e.open;return o.a.createElement(Fn,{onClose:t,open:a,title:"Import Toy Dataset"},o.a.createElement(ur.a,null,o.a.createElement(lr.a,null,o.a.createElement(mr.a,null,o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Name"),o.a.createElement(sr.a,null,"Type"),o.a.createElement(sr.a,null,"Size"),o.a.createElement(sr.a,null,"Actions"))),o.a.createElement(cr.a,null,dr.map((function(e){return o.a.createElement(pr.a,{key:e.name},o.a.createElement(sr.a,null,e.name),o.a.createElement(sr.a,null,e.type),o.a.createElement(sr.a,null,e.size),o.a.createElement(sr.a,null,o.a.createElement(br,{"data-import-toy-dataset-name":e.name,onClick:Object(b.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,fr(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)}))),variant:"outlined"},"Import")))}))))))},vr=function(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_")},Er=function(e){var t=e.youtubeUrl,n=e.title,a=e.remote,o=e.videoQuality,r=e.downloadPath,i=e.onProgress,l=e.onComplete,c=e.onChangeOverallProgress,s=a.require("ytdl-core"),u=a.require("path"),m=o.includes("audio")?"".concat(vr(n)+".mp3"):"".concat(vr(n)+".mp4"),p=u.join(r,m),d=a.require("fs").createWriteStream(p),f=s(t,{format:m.endsWith(".mp3")?"audio/mp3":"video/mp4",quality:null!==o?o:"highest"});return f.pipe(d),f.on("progress",(function(e,t,n){var a=t/n;i({progress:100*a}),c(100*a)})),f.on("end",(function(){return l(p)})),{cancel:function(){f.destroy()}}},yr=Object(U.a)("div")({height:36,width:"100%",boxSizing:"border-box",position:"relative",marginTop:8,marginBottom:8,backgroundColor:u.a[50]}),xr=Object(U.a)("div")({position:"absolute",left:0,right:0,top:0,bottom:0,paddingTop:4,fontSize:18,textAlign:"center",fontWeight:"bold"}),Or=Object(U.a)("div")({position:"absolute",left:0,bottom:0,top:0,backgroundColor:u.a[300]}),jr=function(e){var t=e.progress;return o.a.createElement(yr,null,o.a.createElement(Or,{style:{right:100-t+"%"}}),o.a.createElement(xr,null,Math.floor(t),"%"))},wr=n(1111),kr=n(174),Cr=n.n(kr),Sr=n(1098),Ir=n(1099),Tr=Object(U.a)("div")({width:"100%",height:"100%"}),Nr=Object(U.a)("div")({flexDirection:"row",width:"100%",display:"flex",justifyContent:"space-between"}),Dr=function(e){var t=e.unitProgress,n=e.overallProgress,a=e.completedVideoTitles;return o.a.createElement(Tr,null,o.a.createElement(jr,{progress:n}),o.a.createElement(jr,{progress:t.progress}),o.a.createElement("h3",null,"Downloading: ",t.title),o.a.createElement(wr.a,null,o.a.createElement(Sr.a,{expandIcon:o.a.createElement(Cr.a,null)},o.a.createElement(Nr,null,o.a.createElement("h3",null,"Downloaded Video Titles"))),o.a.createElement(Ir.a,null,o.a.createElement("ul",null,a&&a.length>0?a:null))))},Ar=function(){var e=Object(b.a)(g.a.mark((function e(t,n){var a,o,r,i,l,c=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>2&&void 0!==c[2]?c[2]:function(){return null},o=t.require("ytdl-core"),r=[],!(n.length>0)){e.next=11;break}i=g.a.mark((function e(t){var i,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n[t],e.next=3,new Promise((function(e,t){o.getBasicInfo(i,(function(n,a){if(a&&!n)e({url:i,title:a.title});else{var o='Error with video at "'.concat(i,'"\n\n').concat(n.toString());t(new Error(o))}}))}));case 3:l=e.sent,r.push(l),a({progress:t/(n.length-1)*100,text:"Inspecting Video Information..."});case 6:case"end":return e.stop()}}),e)})),l=0;case 6:if(!(l<n.length)){e.next=11;break}return e.delegateYield(i(l),"t0",8);case 8:l++,e.next=6;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_r=function(e){var t,n=[],a=e.split("\n"),o=Object(H.a)(a);try{for(o.s();!(t=o.n()).done;){var r=t.value;r.includes("https://")&&n.push(r)}}catch(wu){o.e(wu)}finally{o.f()}return n},Lr=Object(U.a)("textarea")({width:"100%",minHeight:300}),Pr=Object(U.a)("h3")({lineHeight:0,textAlign:"center"}),Ur=Object(U.a)("div")({width:"100%",marginBottom:8,paddingBottom:4}),Rr=Object(U.a)("pre")({whiteSpace:"pre-wrap",color:"#f00"}),Fr=Object(U.a)("h2")({width:"100%",height:"100%",margin:"auto auto",textAlign:"center"}),Br=Object(U.a)("h3")({textDecoration:"line-through",lineHeight:0}),Mr=[{value:"136",label:"720p"},{value:"135",label:"480p"},{value:"lowestvideo",label:"Lowest Video Only"},{value:"highestvideo",label:"Highest Video Only"},{value:"lowestaudio",label:"Lowest Audio Only"},{value:"highestaudio",label:"Highest Audio Only"}],zr=function(e){var t=e.open,n=e.onClose,r=e.onAddSamples,i=(Ue()||{}).remote,l=Object(a.useState)([]),c=Object(h.a)(l,2),s=c[0],u=c[1],m=Object(a.useState)(Mr[0].value),p=Object(h.a)(m,2),d=p[0],f=p[1],v=Object(a.useState)(null),E=Object(h.a)(v,2),y=E[0],x=E[1],O=Object(a.useState)({progress:0}),j=Object(h.a)(O,2),w=j[0],k=j[1],C=Object(a.useState)(0),S=Object(h.a)(C,2),I=S[0],T=S[1],N=Object(a.useState)(!1),D=Object(h.a)(N,2),A=D[0],_=D[1],L=Object(a.useState)(null),P=Object(h.a)(L,2),U=P[0],R=P[1],F=Object(a.useRef)(),B=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k({progress:0,title:""}),T(0),_(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(Fn,{open:t,onClose:M,title:"Import from Youtube URLs",actions:[{text:"Cancel Downloads",disabled:!A,onClick:function(){F.current(),_(!1)}},{text:"Download Youtube URLs",onClick:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,a,l,c,u,m,p,f,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,i.dialog.showOpenDialog({title:"Directory to download files to",buttonLabel:"Download Files Here",properties:["createDirectory","openDirectory","promptToCreate"]});case 3:if(t=e.sent,n=t.canceled,a=t.filePaths,!n&&a){e.next=8;break}return e.abrupt("return",_(!1));case 8:return l=a[0],e.next=11,Ar(i,s,(function(e){var t=e.progress;e.text;k({progress:t})})).catch((function(e){return console.error(e.stack),x(e.toString()),null}));case 11:if(c=e.sent){e.next=14;break}return e.abrupt("return",_(!1));case 14:u=[],m=[],p=c.length,f=g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c[t],e.next=3,new Promise((function(e,t){var a=Er({remote:i,downloadPath:l,youtubeUrl:n.url,title:n.title,videoQuality:d,onChangeOverallProgress:function(e){return T((100*m.length+e)/(100*p)*100)},onProgress:function(e){var t=e.progress,a=e.text;return k({progress:t,title:n.title,progressText:a})},onComplete:function(t){return e(t)}}).cancel;F.current=a}));case 3:a=e.sent,m.push(o.a.createElement("li",{key:t+n.title},o.a.createElement(Br,null,n.title))),R(m),u.push(a);case 7:case"end":return e.stop()}}),e)})),b=0;case 19:if(!(b<p)){e.next=24;break}return e.delegateYield(f(b),"t0",21);case 21:b++,e.next=19;break;case 24:r(u.map((function(e){return{videoUrl:"file://".concat(e)}}))),_(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),disabled:A}]},y&&o.a.createElement(Rr,null,y),A&&(w&&w.progress&&w.progress>0||U&&!0===Array.isArray(U)&&U.length>0)?o.a.createElement(Dr,{unitProgress:w,completedVideoTitles:U,overallProgress:I}):!0===A?o.a.createElement(Fr,null,"Information is Loading"):null,!A&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ur,null,o.a.createElement(Pr,null,"Select Video Quality"),o.a.createElement(Ga.default,{defaultValue:Mr[0],options:Mr,onChange:function(e){var t=e.value;return f(t)}})),o.a.createElement(Lr,{onChange:function(e,t){u(_r(e.target.value))},placeholder:"Paste Youtube URLs here\nOne URL per line"})))},Hr=function(e){var t=e.split(".").slice(-1)[0].toLowerCase();return["png","jpg","jpeg"].includes(t)?{imageUrl:"file://".concat(e)}:["pdf"].includes(t)?{pdfUrl:"file://".concat(e)}:["mp4","webm","mkv"].includes(t)?{videoUrl:"file://".concat(e)}:null};function Wr(){return(Wr=Object(b.a)(g.a.mark((function e(t){var n,a,o,r,i,l,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.electron,e.next=3,n.remote.dialog.showOpenDialog({title:"Select Directory to Import Files",properties:["openDirectory"]});case 3:if(a=e.sent,o=a.canceled,r=a.filePaths,!o){e.next=8;break}return e.abrupt("return");case 8:return i=r[0],l=n.remote.require("fs"),c=n.remote.require("path"),e.next=13,l.promises.readdir(i);case 13:return e.abrupt("return",e.sent.filter((function(e){return e.includes(".")})).map((function(e){return c.join(i,e)})).map(Hr).filter(Boolean));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qr=function(e){return Wr.apply(this,arguments)},Vr=Object(U.a)(D.a)({width:240,height:140,display:"inline-flex",flexDirection:"column","&.disabled":{backgroundColor:Se.a[200]},margin:8,"& .icon":{width:48,height:48,color:Se.a[600],"&.disabled":{color:Se.a[400]}}}),Jr=Object(U.a)("div")({fontSize:11,fontWeight:"bold",color:Se.a[600],"&.disabled":{color:Se.a[500]}}),Gr=Object(a.createContext)(),Kr=function(e){var t=e.Icon,n=e.desktopOnly,a=e.isDesktop,r=e.children,i=e.dialog,l=e.authConfiguredOnly,c=e.authConfig,s=e.signedInOnly,u=e.user,m=Re(),p=n?!a:!!l&&(s?P()(u):P()(c));return o.a.createElement(Gr.Consumer,null,(function(e){var a=e.onChangeDialog;return o.a.createElement(Vr,{onClick:function(){m.capture("import_button_clicked",{import_button:i}),a(i)},className:Oa()({disabled:p}),variant:"outlined",disabled:p},o.a.createElement("div",null,o.a.createElement(t,{className:Oa()("icon",{disabled:p})}),o.a.createElement("div",null,r),n&&o.a.createElement(Jr,{className:Oa()({disabled:p})},"DESKTOP ONLY"),l&&P()(c)&&o.a.createElement(Jr,{className:Oa()({disabled:p})},"AUTH MUST BE CONFIGURED"),s&&P()(u)&&o.a.createElement(Jr,{className:Oa()({disabled:p})},"MUST BE SIGNED IN")))}))},Xr=function(e){var t=e.file,n=e.onChangeFile,r=e.dataset,i=e.onChangeDataset,l=e.isDesktop,c=e.authConfig,s=e.user,u=Object(a.useState)(),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Ue(),v=function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="upload-directory"===e.t0?3:10;break;case 3:if(f){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,qr({electron:f});case 7:return n=e.sent,i(Object(io.setIn)(r,["samples"],(r.samples||[]).concat(n)),!0),e.abrupt("return");case 10:return e.abrupt("return",d(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){return d(null)},y=Object(dt.a)(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(Object(io.setIn)(r,["samples"],(r.samples||[]).concat(t))),E();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return o.a.createElement(Gr.Provider,{value:{onChangeDialog:v}},o.a.createElement("div",null,o.a.createElement(Kr,{isDesktop:l,dialog:"paste-image-urls",Icon:Fa.a,authConfig:c,signedInOnly:!1,user:s},"Paste URLs"),o.a.createElement(Kr,{desktopOnly:!0,isDesktop:l,dialog:"upload-directory",Icon:Ma.a,authConfig:c,signedInOnly:!1,user:s},"Files from Directory"),o.a.createElement(Kr,{dialog:"import-text-snippets",Icon:Ha.a},"Import Text Snippets"),o.a.createElement(Kr,{isDesktop:l,dialog:"import-toy-dataset",Icon:Ja.a},"Import Toy Dataset"),o.a.createElement(Kr,{isDesktop:l,dialog:"youtube-urls",Icon:Wt.c,desktopOnly:!0},"Import from Youtube URLs"),t&&o.a.createElement(Kr,{isDesktop:l,dialog:"import-from-s3",Icon:Mo,authConfiguredOnly:!0,authConfig:c,signedInOnly:!0,user:s},"Import from S3"),o.a.createElement(Kr,{isDesktop:l,dialog:"google-drive-file-picker",Icon:Wt.a,onAddSamples:y},"Import from Google Drive"),o.a.createElement(Kr,{dialog:"import-csv-json",Icon:qa.a},"Import from CSV / JSON"),o.a.createElement(Bo,{open:"import-text-snippets"===p,onClose:E,onAddSamples:y}),o.a.createElement(Qa,{open:"paste-image-urls"===p,onClose:E,onAddSamples:y}),t&&o.a.createElement(Lo,{file:t,authConfig:c,open:"import-from-s3"===p,onChangeFile:n,onClose:E,user:s,onAddSamples:y}),o.a.createElement(qo,{open:"google-drive-file-picker"===p,onClose:E,onAddSamples:y}),o.a.createElement(hr,{open:"import-toy-dataset"===p,onClose:E,onAddSamples:y}),o.a.createElement(zr,{open:"youtube-urls"===p,onClose:E,onAddSamples:y}),o.a.createElement(ir,{open:"import-csv-json"===p,onClose:E,onAddSamples:y})))},Zr=function(){return!!window.require&&Boolean(window.require("electron"))},Yr=Object(U.a)("pre")({fontSize:8}),Qr=Object(U.a)(wr.a)({backgroundColor:Se.a[100],border:"1px solid ".concat(Se.a[500]),marginTop:16,marginBottom:16}),$r=Object(U.a)(Sr.a)({fontWeight:"bold"}),ei=function(e){var t=e.open,n=e.onChangeDataset,a=e.onClose,r=e.dataset;return o.a.createElement(Fn,{open:t,onClose:a,title:"Transform Video Keyframes",actions:[{text:"Transform Video Keyframes",disabled:!r.samples,onClick:function(){var e=r.samples.flatMap((function(e,t){if(!e.videoUrl)return{data:e,output:e.annotation};if(e.videoUrl&&!e.videoFrameAt){if(!e.annotation)return[];if(!e.annotation.keyframes)return[];var n=e[t].annotation.keyframes;return Object.keys(n).map((function(t){return{videoUrl:e.videoUrl,videoFrameAt:parseInt(t),annotation:n[t].regions||[]}}))}}));n(lo()(r).setIn(["samples"],e.map((function(e){return e.data}))).setIn(["interface","type"],"image_segmentation"))}}]},'This operation will convert keyframes set on a video into individual image segmentation frames. Your interface type will change from "video_segmentation" into "image_segmentation". This is sometimes helpful when preparing video data for a computer vision model.',!r.samples&&o.a.createElement("b",null,o.a.createElement("br",null),o.a.createElement("br",null),"You need to label some keyframes to use this."),o.a.createElement(Qr,null,o.a.createElement($r,null,"Details"),o.a.createElement(Ir.a,null,o.a.createElement(ge.a,{display:"flex"},o.a.createElement(ge.a,null,o.a.createElement(Yr,null,'{\n  "interface": { "type": "video_segmentation" },\n  samples: [\n    {\n      videoUrl: "https://example.com/video1.mp4"\n    }\n  ],\n  taskOutput: [\n    {\n      keyframes: {\n        "0": { /* labels */ },\n        "1000": { /* labels */ },\n        "2000": { /* labels */ }\n      }\n    }\n  ]\n}')),o.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(S.a,{style:{color:Se.a[500],width:48,height:48}})),o.a.createElement(ge.a,null,o.a.createElement(Yr,null,'{\n  "interface": { "type": "image_segmentation" },\n  samples: [\n    {\n      videoUrl: "https://example.com/vid1.mp4",\n      videoFrameAt: 0\n    },\n    {\n      videoUrl: "https://example.com/vid1.mp4",\n      videoFrameAt: 1000\n    },\n    {\n      videoUrl: "https://example.com/vid1.mp4",\n      videoFrameAt: 2000\n    }\n  ],\n  taskOutput: [\n    { /* labels */ },\n    { /* labels */ },\n    { /* labels */ }\n  ]\n}'))))))},ti=n(541),ni=n.n(ti),ai=n(251),oi=n.n(ai),ri=Object(U.a)("pre")({color:"red",whiteSpace:"prewrap",fontSize:11});function ii(e,t,n){var a="sample_".concat(ni()(e).slice(0,6),"__").concat(e.split("/").slice(-1)[0].replace(/[^a-zA-Z0-9_\-.]/g,"")),o=oi.a.join(t,a);return n.require("fs").existsSync(o)?o:new Promise((function(r,i){n.require("download-file")(e,{directory:t,filename:a},(function(e){return e?i(e):r(o)}))}))}var li=function(e){var t=e.open,n=e.onChangeDataset,r=e.onClose,i=e.dataset,l=(Ue()||{}).remote,c=Object(a.useState)(null),s=Object(h.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(""),f=Object(h.a)(p,2),v=f[0],E=f[1];return o.a.createElement(Fn,{open:t,onClose:r,title:"Download URLs",actions:[{text:"Download URLs",disabled:null!==u,onClick:function(){var e=Object(b.a)(g.a.mark((function e(){var t,a,o,r,c,s,u,p,f,b,v,y;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(0),e.next=3,l.dialog.showOpenDialog({title:"Directory to download files to",buttonLabel:"Download Files Here",properties:["createDirectory","openDirectory","promptToCreate"]});case 3:if(t=e.sent,a=t.cancelled,o=void 0===(o=t.filePaths)?[null]:o,r=Object(h.a)(o,1),c=r[0],!a&&c){e.next=11;break}return m(null),e.abrupt("return");case 11:s=Object(M.a)(i.samples),u="",p=0;case 14:if(!(p<i.samples.length)){e.next=36;break}if(f=i.samples[p],b=void 0,f.imageUrl&&(b="imageUrl"),f.videoUrl&&(b="videoUrl"),b&&f[b].startsWith("http")){e.next=21;break}return e.abrupt("continue",33);case 21:return v=f[b],e.prev=22,e.next=25,ii(v,c,l);case 25:y=e.sent,s[p]=Object(d.a)({},f,Object(I.a)({},b,"file://".concat(y))),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(22),u+="Skipping sample, error downloading samples[".concat(p,"] (").concat(v,"): ").concat(e.t0.toString()," \n");case 32:m(p/i.samples.length*100);case 33:p++,e.next=14;break;case 36:n(Object(io.setIn)(i,["samples"],s)),E(u),m(100);case 39:case"end":return e.stop()}}),e,null,[[22,29]])})));return function(){return e.apply(this,arguments)}}()}]},"This transformation will download all the urls from your samples to your computer, and change the paths to filenames. This is usually not a good idea if you're collaborating with others, but is very useful if you're about to build a model.",o.a.createElement(jr,{progress:u||0}),v&&o.a.createElement(ri,null,v))},ci=n(292),si=n.n(ci),ui=Object(U.a)("pre")({color:"red",whiteSpace:"prewrap",fontSize:11}),mi=function(e){var t=Math.floor(e/10)%100,n=Math.floor(e/1e3)%60,a=Math.floor(e/1e3/60)%60;return[Math.floor(e/1e3/60/60),":",a,":",n,".",t].map((function(e){return"number"===typeof e?e.toString().padStart(2,"0"):e})).join("")},pi=function(e){var t=e.open,n=e.onChangeDataset,r=e.onClose,i=e.dataset,l=(Ue()||{}).remote,c=Object(a.useState)(null),s=Object(h.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(""),f=Object(h.a)(p,2),v=f[0],E=f[1];return o.a.createElement(Fn,{open:t,onClose:r,title:"Convert Video Frames to Images",actions:[{text:"Convert Video Frames to Images",disabled:null!==u,onClick:function(){var e=Object(b.a)(g.a.mark((function e(){var t,a,o,r,c,s,u,p,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(0),t="",(a=l.require("ffmpeg-static"))||E("There was an issue using ffmpeg. Please create an issue on the github repository."),o=l.require("any-shell-escape"),r=l.require("child_process"),c=r.exec,s=Object(M.a)(i.samples),u=0,p=0;case 9:if(!(p<i.samples.length)){e.next=20;break}if(!(f=i.samples[p]).videoUrl||void 0===f.videoFrameAt){e.next=16;break}return e.delegateYield(g.a.mark((function e(){var n,r,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.videoUrl.startsWith("http")){e.next=3;break}return t+="Sample ".concat(p," has a url to a video, videos must be downloaded before extracting frames."),e.abrupt("return","continue");case 3:return u++,n=f.videoUrl.replace(/^file:\/\//,""),r=n+"__frameat__"+f.videoFrameAt+".jpg",l=o([a,"-y","-ss",mi(f.videoFrameAt),"-i",n,"-frames:v",1,r]),e.next=9,new Promise((function(e,t){c(l,{timeout:5e3},(function(n){if(n)return t(n);e()}))}));case 9:s[p]=Object(d.a)({},Object(io.without)(Object(io.without)(i.samples[p],"videoUrl"),"videoFrameAt"),{imageUrl:"file://".concat(r)});case 10:case"end":return e.stop()}}),e)}))(),"t0",13);case 13:if("continue"!==e.t0){e.next=16;break}return e.abrupt("continue",17);case 16:m(p/i.samples.length*100);case 17:p++,e.next=9;break;case 20:0===u&&(t+="No transforms were performed, do all of your video samples have frames specified? You may need to convert the keyframes to samples."),n(Object(io.setIn)(i,["samples"],s)),E(t),m(100);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]},"This transformation will convert samples that reference a video frame into an image. This is a useful step before creating a model. You can only convert videos that are downloaded on your computer. Note: This can take a little while.",o.a.createElement(jr,{progress:u||0}),v&&o.a.createElement(ui,null,v))},di=function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,o,r,i,l,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileName,a=t.fileURL,o=t.remote,window.remote=o,r="https://files.universaldatatool.com/".concat(n),i=o.require("axios"),l=a.split("file://")[1],c=o.require("fs").readFileSync(l),e.next=8,i.put(r,c).then((function(e){if(200===e.status)return e.data}));case 8:return s=e.sent,e.abrupt("return",s.replace("universaldatatool.com/","universaldatatool.com/get/"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fi=function(e){if(e.startsWith("file://")){var t=e.split("/");return t[t.length-1]}},gi=function(e){return e.imageUrl?"imageUrl":e.videoUrl?"videoUrl":e.audioUrl?"audioUrl":null},bi=function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,o,r,i,l,c,s,u,m,p,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dataset,a=t.onChangeDataset,o=t.setProgress,r=t.remote,i=[],l=100/n.samples.length,c=0;case 4:if(!(c<n.samples.length)){e.next=27;break}if(s=n.samples[c],u=gi(s)){e.next=10;break}return i.push(s),e.abrupt("continue",24);case 10:if((m=s[u]).startsWith("file://")){e.next=14;break}return i.push(s),e.abrupt("continue",24);case 14:return o(l*c),g=fi(m),p=g.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),e.next=19,di({fileName:p,fileURL:m,remote:r}).catch((function(e){return console.warn(e)}));case 19:if(f=e.sent){e.next=23;break}return i.push(s),e.abrupt("continue",24);case 23:i.push(Object(d.a)({},s,Object(I.a)({},u,f)));case 24:c++,e.next=4;break;case 27:o(100),a(Object(io.setIn)(n,["samples"],i));case 29:case"end":return e.stop()}var g}),e)})));return function(t){return e.apply(this,arguments)}}(),hi=function(e){var t=e.open,n=e.onClose,r=e.dataset,i=e.onChangeDataset,l=Object(a.useState)(0),c=Object(h.a)(l,2),s=c[0],u=c[1],m=(Ue()||{}).remote;return o.a.createElement(Fn,{open:t,onClose:n,title:"Convert Local Files to Web URLs",actions:[{text:"Convert Local Files to Web URLs",onClick:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({dataset:r,onChangeDataset:i,setProgress:u,remote:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]},"This transformation will upload your local samples to the cloud Note: This can take a little while.",o.a.createElement(jr,{progress:s}))},vi=n(542),Ei=n.n(vi),yi=n(543),xi=n.n(yi),Oi=Object(U.a)(D.a)({width:240,height:140,display:"inline-flex",flexDirection:"column","&.disabled":{backgroundColor:Se.a[200]},margin:8,"& .icon":{width:36,height:36,color:Se.a[600],"&.disabled":{color:Se.a[400]}}}),ji=Object(U.a)("div")({fontSize:11,fontWeight:"bold",color:Se.a[600],"&.disabled":{color:Se.a[500]}}),wi=Object(a.createContext)(),ki=function(e){var t=e.Icon1,n=e.Icon2,a=e.desktopOnly,r=e.children,i=e.dialog,l=e.disabled,c=Zr(),s=Re();return l=void 0===l?!!a&&!c:l,o.a.createElement(wi.Consumer,null,(function(e){var c=e.onChangeDialog;return o.a.createElement(Oi,{onClick:function(){c(i),s.capture("transform_button_clicked",{transform_button:i})},className:Oa()({disabled:l}),variant:"outlined",disabled:l},o.a.createElement("div",null,t&&n?o.a.createElement(o.a.Fragment,null,o.a.createElement(t,{className:Oa()("icon",{disabled:l})}),o.a.createElement(S.a,{className:Oa()("icon",{disabled:l})}),o.a.createElement(n,{className:Oa()("icon",{disabled:l})})):o.a.createElement(t,{className:Oa()("icon",{disabled:l})}),o.a.createElement("div",null,r),a&&o.a.createElement(ji,{className:Oa()({disabled:l})},"DESKTOP ONLY")))}))},Ci=function(e){var t=e.dataset,n=e.onChangeDataset,r=Object(a.useState)(),i=Object(h.a)(r,2),l=i[0],c=i[1],s=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="convert-keyframes-to-samples"===e.t0?3:4;break;case 3:return e.abrupt("break",5);case 4:return e.abrupt("return",c(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){return c(null)};return o.a.createElement(wi.Provider,{value:{onChangeDialog:s}},o.a.createElement("div",null,o.a.createElement(ki,{disabled:"video_segmentation"!==t.interface.type,dialog:"convert-keyframes-to-samples",Icon1:cn.a,Icon2:si.a},"Convert Video Keyframes to Samples"),o.a.createElement(ki,{desktopOnly:!0,dialog:"convert-local-files-to-web-urls",Icon1:Ei.a,Icon2:xi.a},"Transform Local Files to Web URLs"),o.a.createElement(ki,{desktopOnly:!0,dialog:"download-urls",Icon1:Ge.a},"Download URLs"),o.a.createElement(ki,{desktopOnly:!0,dialog:"convert-video-frames-to-images",Icon1:cn.a,Icon2:Gt.a},"Convert Video Frames to Images"),o.a.createElement(ei,{open:"convert-keyframes-to-samples"===l,onClose:u,dataset:t,onChangeDataset:function(){n.apply(void 0,arguments),u()}}),o.a.createElement(li,{open:"download-urls"===l,onClose:u,dataset:t,desktopOnly:!0,onChangeDataset:n}),o.a.createElement(hi,{dataset:t,onClose:u,onChangeDataset:n,desktopOnly:!0,open:"convert-local-files-to-web-urls"===l}),o.a.createElement(pi,{open:"convert-video-frames-to-images"===l,onClose:u,dataset:t,desktopOnly:!0,onChangeDataset:n})))},Si=Object(U.a)("div")({padding:16,height:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box"}),Ii=Object(U.a)("div")({fontSize:14,color:Se.a[600],display:"flex",justifyContent:"flex-end",alignItems:"center",flexGrow:1}),Ti=Object(U.a)("div")({padding:8,border:"#888 solid 1px",borderTop:"none",borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,boxShadow:"inset 0 3px 3px rgba(0,0,0,0.2)"}),Ni=Object(U.a)("div")({fontSize:11,fontWeight:"bold"}),Di=Object(U.a)("pre")({whiteSpace:"pre-wrap",fontSize:11}),Ai=function(e){var t=e.data,n=t.annotation,a=Object(fa.a)(t,["annotation"]);return o.a.createElement(Ti,null,o.a.createElement(j.a,{spacing:2,container:!0},o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(Ni,null,"samples[",t.index,"]:"),o.a.createElement(Di,null,JSON.stringify(a,null,"  "))),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(Ni,null,"samples[",t.index,"].annotation:"),o.a.createElement(Di,null,JSON.stringify(n,null,"  ")))))},_i=function(e){var t=e.file,n=e.dataset,r=e.openSampleInputEditor,i=e.openSampleLabelEditor,l=e.deleteSample,c=e.onChangeDataset,s=e.onChangeFile,u=e.authConfig,m=e.user,p=Zr(),f=Object(a.useState)(0===(n.samples||[]).length?"import":window.localStorage.lastSampleTab||"grid"),g=Object(h.a)(f,2),b=g[0],v=g[1],E=function(e){v(e),window.localStorage.lastSampleTab=e},y=Object(a.useMemo)((function(){if(!n.samples)return[];var e,t=[{name:"Index",selector:"index",sortable:!0}],a=new Set,c=Object(H.a)(n.samples);try{for(c.s();!(e=c.n()).done;){var s=e.value,u=function(e){a.has(e)||(t.push({name:e,selector:e,cell:function(t){return"object"!==typeof t[e]?t[e]:JSON.stringify(t[e]).slice(0,30)+"..."}}),a.add(e))};for(var m in s)u(m)}}catch(wu){c.e(wu)}finally{c.f()}return t.push({name:"Edit",button:!0,cell:function(e){return o.a.createElement(we.a,{raised:!0,onClick:function(){return r(e.index)}},o.a.createElement($t.a,{style:{width:20,height:20}}))}}),t.push({name:"Label",button:!0,cell:function(e){return o.a.createElement(we.a,{raised:!0,onClick:function(){return i(e.index)}},o.a.createElement(xe.a,{style:{width:20,height:20}}))}}),t.push({name:"Delete",button:!0,cell:function(e){return o.a.createElement(we.a,{raised:!0,primary:!0,onClick:function(){return l(e.index)}},o.a.createElement(va.a,{style:{width:20,height:20}}))}}),t}),[n.samples,l,r,i]),x=Object(a.useMemo)((function(){return n.samples?n.samples.map((function(e,t){return Object(d.a)({},e,{index:t})})):[]}),[n.samples]);return o.a.createElement(Si,null,o.a.createElement(ge.a,{display:"flex"},o.a.createElement(de.a,{value:b,onChange:function(e,t){return E(t)}},o.a.createElement(fe.a,{icon:o.a.createElement(Ua.a,null),label:"Import",value:"import"}),o.a.createElement(fe.a,{icon:o.a.createElement(Aa.a,null),label:"Transform",value:"transform"}),o.a.createElement(fe.a,{icon:o.a.createElement(Na.a,null),label:"Grid",value:"grid"}),o.a.createElement(fe.a,{icon:o.a.createElement(La.a,null),label:"Table",value:"table"})),o.a.createElement(Ii,null,(n.samples||[]).length," Samples",o.a.createElement("br",null),(n.samples||[]).filter((function(e){return e.annotation})).length," Labels")),o.a.createElement(ge.a,{paddingTop:2}),o.a.createElement(ge.a,{flexGrow:1},"import"===b&&o.a.createElement(Xr,{file:t,isDesktop:p,onChangeFile:function(e){return s(e)},onImportPageShouldExit:function(){return E("grid")},onChangeDataset:function(e){return c(e)},dataset:n,authConfig:u,user:m}),"transform"===b&&o.a.createElement(Ci,{isDesktop:p,dataset:n,onChangeDataset:function(e,t){c(e),t&&E("grid")}}),"grid"===b&&o.a.createElement(Ia,{count:(n.samples||[]).length,samples:n.samples||[],completed:(n.samples||[]).map((function(e){return Boolean(e.annotation)})),onClick:function(e){i(e)}}),"table"===b&&o.a.createElement(ba.a,{title:"Samples",expandableRowsComponent:o.a.createElement(Ai,null),expandableRows:!0,dense:!0,columns:y,data:x,pagination:!0,paginationPerPage:10,paginationRowsPerPageOptions:[10,20,25,50,100,200]})))},Li={questions:[{name:"regionTypesAllowed",title:"Region Types Allowed",description:"What types of regions can be drawn on the image.",type:"multiple-dropdown",choices:["bounding-box","polygon","point"]},{name:"multipleRegions",title:"Can multiple regions be created?",type:"boolean"},{name:"multipleRegionLabels",title:"Multiple Region Labels Allowed?",type:"boolean"},{name:"labels",title:"Available Labels",description:"If you're labeling regions on an image, these are the allowed classifications or tags.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"description",title:"Description (optional)"}]}]},Pi=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{multipleRegions:Boolean(t.multipleRegions||void 0===t.multipleRegions),multipleRegionLabels:Boolean(t.multipleRegionLabels),regionTypesAllowed:t.regionTypesAllowed,labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,description:e}:e}))||[]}}),[t]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",defaultAnswers:r,onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:Li})},Ui={questions:[{name:"labels",title:"Available Labels",description:"If you're labeling regions on an image, these are the allowed classifications or tags.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"description",title:"Description (optional)"}]},{name:"description",title:"Sidebar Description",description:"Any instructions or notes in markdown.",type:"text"}]},Ri=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{description:t.description,labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,description:e}:e}))||[]}}),[t]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",defaultAnswers:r,onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:Ui})},Fi={questions:[{name:"multiple",title:"Allow multiple classifications per image?",type:"boolean"},{name:"labels",title:"Labels",description:"Classifications or tags to be labeled.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"description",title:"Description (optional)"}]}]},Bi=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{allowMultiple:!1,labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,description:e}:e}))||[]}}),[t.labels]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",defaultAnswers:r,onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:Fi})},Mi={questions:[{name:"multiple",title:"Allow Multiple Classifications",type:"boolean"},{name:"labels",title:"Labels",description:"Classifications or tags to be labeled.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"displayName",title:"Display Name"},{cellType:"text",name:"description",title:"Description (optional)"}]}]},zi=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{multiple:!1,labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,displayName:e,description:e}:e}))||[]}}),[t.labels]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",defaultAnswers:r,onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:Mi})},Hi={questions:[{name:"transcriptionType",title:"Transcription Type",type:"dropdown",choices:["simple","proper"]},{name:"phraseBank",title:"Phrase Bank",description:"URL of single-column CSV or TXT file with allowed phrases",type:"text"},{name:"onlyUseWordsInPhraseBank",title:"Only Use Words In Phrase Bank",type:"boolean"},{name:"language",title:"Language",type:"dropdown",choices:[{value:"ab",text:"Abkhazian"},{value:"aa",text:"Afar"},{value:"af",text:"Afrikaans"},{value:"ak",text:"Akan"},{value:"sq",text:"Albanian"},{value:"am",text:"Amharic"},{value:"ar",text:"Arabic"},{value:"an",text:"Aragonese"},{value:"hy",text:"Armenian"},{value:"as",text:"Assamese"},{value:"av",text:"Avaric"},{value:"ae",text:"Avestan"},{value:"ay",text:"Aymara"},{value:"az",text:"Azerbaijani"},{value:"bm",text:"Bambara"},{value:"ba",text:"Bashkir"},{value:"eu",text:"Basque"},{value:"be",text:"Belarusian"},{value:"bn",text:"Bengali"},{value:"bh",text:"Bihari languages"},{value:"bi",text:"Bislama"},{value:"bs",text:"Bosnian"},{value:"br",text:"Breton"},{value:"bg",text:"Bulgarian"},{value:"my",text:"Burmese"},{value:"ca",text:"Catalan, Valencian"},{value:"km",text:"Central Khmer"},{value:"ch",text:"Chamorro"},{value:"ce",text:"Chechen"},{value:"ny",text:"Chichewa, Chewa, Nyanja"},{value:"zh",text:"Chinese"},{value:"cu",text:"Church Slavonic, Old Bulgarian, Old Church Slavonic"},{value:"cv",text:"Chuvash"},{value:"kw",text:"Cornish"},{value:"co",text:"Corsican"},{value:"cr",text:"Cree"},{value:"hr",text:"Croatian"},{value:"cs",text:"Czech"},{value:"da",text:"Danish"},{value:"dv",text:"Divehi, Dhivehi, Maldivian"},{value:"nl",text:"Dutch, Flemish"},{value:"dz",text:"Dzongkha"},{value:"en",text:"English"},{value:"eo",text:"Esperanto"},{value:"et",text:"Estonian"},{value:"ee",text:"Ewe"},{value:"fo",text:"Faroese"},{value:"fj",text:"Fijian"},{value:"fi",text:"Finnish"},{value:"fr",text:"French"},{value:"ff",text:"Fulah"},{value:"gd",text:"Gaelic, Scottish Gaelic"},{value:"gl",text:"Galician"},{value:"lg",text:"Ganda"},{value:"ka",text:"Georgian"},{value:"de",text:"German"},{value:"ki",text:"Gikuyu, Kikuyu"},{value:"el",text:"Greek (Modern)"},{value:"kl",text:"Greenlandic, Kalaallisut"},{value:"gn",text:"Guarani"},{value:"gu",text:"Gujarati"},{value:"ht",text:"Haitian, Haitian Creole"},{value:"ha",text:"Hausa"},{value:"he",text:"Hebrew"},{value:"hz",text:"Herero"},{value:"hi",text:"Hindi"},{value:"ho",text:"Hiri Motu"},{value:"hu",text:"Hungarian"},{value:"is",text:"Icelandic"},{value:"io",text:"Ido"},{value:"ig",text:"Igbo"},{value:"id",text:"Indonesian"},{value:"ia",text:"Interlingua (International Auxiliary Language Association)"},{value:"ie",text:"Interlingue"},{value:"iu",text:"Inuktitut"},{value:"ik",text:"Inupiaq"},{value:"ga",text:"Irish"},{value:"it",text:"Italian"},{value:"ja",text:"Japanese"},{value:"jv",text:"Javanese"},{value:"kn",text:"Kannada"},{value:"kr",text:"Kanuri"},{value:"ks",text:"Kashmiri"},{value:"kk",text:"Kazakh"},{value:"rw",text:"Kinyarwanda"},{value:"kv",text:"Komi"},{value:"kg",text:"Kongo"},{value:"ko",text:"Korean"},{value:"kj",text:"Kwanyama, Kuanyama"},{value:"ku",text:"Kurdish"},{value:"ky",text:"Kyrgyz"},{value:"lo",text:"Lao"},{value:"la",text:"Latin"},{value:"lv",text:"Latvian"},{value:"lb",text:"Letzeburgesch, Luxembourgish"},{value:"li",text:"Limburgish, Limburgan, Limburger"},{value:"ln",text:"Lingala"},{value:"lt",text:"Lithuanian"},{value:"lu",text:"Luba-Katanga"},{value:"mk",text:"Macedonian"},{value:"mg",text:"Malagasy"},{value:"ms",text:"Malay"},{value:"ml",text:"Malayalam"},{value:"mt",text:"Maltese"},{value:"gv",text:"Manx"},{value:"mi",text:"Maori"},{value:"mr",text:"Marathi"},{value:"mh",text:"Marshallese"},{value:"ro",text:"Moldovan, Moldavian, Romanian"},{value:"mn",text:"Mongolian"},{value:"na",text:"Nauru"},{value:"nv",text:"Navajo, Navaho"},{value:"nd",text:"Northern Ndebele"},{value:"ng",text:"Ndonga"},{value:"ne",text:"Nepali"},{value:"se",text:"Northern Sami"},{value:"no",text:"Norwegian"},{value:"nb",text:"Norwegian Bokm\xe5l"},{value:"nn",text:"Norwegian Nynorsk"},{value:"ii",text:"Nuosu, Sichuan Yi"},{value:"oc",text:"Occitan (post 1500)"},{value:"oj",text:"Ojibwa"},{value:"or",text:"Oriya"},{value:"om",text:"Oromo"},{value:"os",text:"Ossetian, Ossetic"},{value:"pi",text:"Pali"},{value:"pa",text:"Panjabi, Punjabi"},{value:"ps",text:"Pashto, Pushto"},{value:"fa",text:"Persian"},{value:"pl",text:"Polish"},{value:"pt",text:"Portuguese"},{value:"qu",text:"Quechua"},{value:"rm",text:"Romansh"},{value:"rn",text:"Rundi"},{value:"ru",text:"Russian"},{value:"sm",text:"Samoan"},{value:"sg",text:"Sango"},{value:"sa",text:"Sanskrit"},{value:"sc",text:"Sardinian"},{value:"sr",text:"Serbian"},{value:"sn",text:"Shona"},{value:"sd",text:"Sindhi"},{value:"si",text:"Sinhala, Sinhalese"},{value:"sk",text:"Slovak"},{value:"sl",text:"Slovenian"},{value:"so",text:"Somali"},{value:"st",text:"Sotho, Southern"},{value:"nr",text:"South Ndebele"},{value:"es",text:"Spanish, Castilian"},{value:"su",text:"Sundanese"},{value:"sw",text:"Swahili"},{value:"ss",text:"Swati"},{value:"sv",text:"Swedish"},{value:"tl",text:"Tagalog"},{value:"ty",text:"Tahitian"},{value:"tg",text:"Tajik"},{value:"ta",text:"Tamil"},{value:"tt",text:"Tatar"},{value:"te",text:"Telugu"},{value:"th",text:"Thai"},{value:"bo",text:"Tibetan"},{value:"ti",text:"Tigrinya"},{value:"to",text:"Tonga (Tonga Islands)"},{value:"ts",text:"Tsonga"},{value:"tn",text:"Tswana"},{value:"tr",text:"Turkish"},{value:"tk",text:"Turkmen"},{value:"tw",text:"Twi"},{value:"ug",text:"Uighur, Uyghur"},{value:"uk",text:"Ukrainian"},{value:"ur",text:"Urdu"},{value:"uz",text:"Uzbek"},{value:"ve",text:"Venda"},{value:"vi",text:"Vietnamese"},{value:"vo",text:"Volap_k"},{value:"wa",text:"Walloon"},{value:"cy",text:"Welsh"},{value:"fy",text:"Western Frisian"},{value:"wo",text:"Wolof"},{value:"xh",text:"Xhosa"},{value:"yi",text:"Yiddish"},{value:"yo",text:"Yoruba"},{value:"za",text:"Zhuang, Chuang"},{value:"zu",text:"Zulu"}]},{name:"description",title:"Description",type:"multiline-text"}]},Wi=function(e){var t=e.iface,n=e.onChange;return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",onQuestionChange:function(e,a,o){a.value?n(Object(d.a)({},t,Object(I.a)({},e,a.value))):n(Object(d.a)({},t,Object(I.a)({},e,a)))},form:Hi})},qi={questions:[{name:"labels",title:"Labels",type:"matrixdynamic",hasOther:!0,columns:[{cellType:"text",name:"id",title:"ID"},{cellType:"text",name:"displayName",title:"Display Name"},{cellType:"text",name:"description",title:"Description"}]}]},Vi=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{description:t.description,overlapAllowed:Boolean(t.overlapAllowed||void 0===t.overlapAllowed),labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,displayName:e,description:e}:e}))}}),[t]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:qi,defaultAnswers:r})},Ji=n(581),Gi=n(435),Ki=n(549),Xi=n.n(Ki),Zi=n(548),Yi=n.n(Zi),Qi=Object(U.a)("div")({textAlign:"right"}),$i=Object(U.a)("div")({fontSize:18,color:Se.a[500],fontWeight:"bold",textAlign:"center",padding:16}),el=Object(U.a)("div")({position:"relative",padding:16,margin:16,borderLeft:"4px solid ".concat(u.a[400]),borderRadius:4,paddingRight:64,"& .quitButton":{position:"absolute",right:4,top:4},"& > *":{margin:8}}),tl=Object(U.a)("div")({fontSize:12,fontWeight:"bold",color:Se.a[600],textTransform:"uppercase",margin:16,marginBottom:32}),nl=Object(U.a)(D.a)({position:"relative","& .icon":{marginRight:8,opacity:.7}}),al=function(e){var t=e.iface,n=e.onChange,r=Object(a.useRef)(),i=Object(a.useState)(!1),l=Object(h.a)(i,2),c=l[0],s=l[1],u=(t.surveyjs||{}).questions,m=void 0===u?[]:u;return o.a.createElement("div",null,0===m.length?o.a.createElement($i,null,"No Inputs, Click Add Input Below"):m.map((function(e,a){return o.a.createElement(el,{key:a},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(N.a,{variant:"outlined",label:"Name / Identifier",value:e.name||"",onChange:function(e){n(Object(io.setIn)(t,["surveyjs","questions",a,"name"],e.target.value))}}),o.a.createElement(N.a,{style:{marginLeft:8,flexGrow:1},variant:"outlined",label:"Title / Instruction",value:e.title||"",onChange:function(e){n(Object(io.setIn)(t,["surveyjs","questions",a,"title"],e.target.value))}})),o.a.createElement(j.a,{container:!0},o.a.createElement(j.a,{item:!0,xs:6},e.choices&&o.a.createElement(N.a,{style:{marginTop:8,paddingRight:8,boxSizing:"border-box"},variant:"outlined",fullWidth:!0,label:"Choices (One per Line)",defaultValue:e.choices.join("\n")||"",onChange:function(e){n(Object(io.setIn)(t,["surveyjs","questions",a,"choices"],e.target.value.split("\n")))},multiline:!0,rows:6})),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(tl,null,"Preview"),o.a.createElement(Wn.a,{noActions:!0,variant:"flat",key:e,form:{questions:[e]}}))),o.a.createElement(we.a,{className:"quitButton",onClick:function(){n(Object(io.setIn)(t,["surveyjs","questions"],[].concat(Object(M.a)(m.slice(0,a)),Object(M.a)(m.slice(a+1)))))}},o.a.createElement(Yi.a,null)))})),o.a.createElement(Qi,null,o.a.createElement(nl,{onClick:function(e){return s(!0)},ref:r},o.a.createElement(Xi.a,{className:"icon"}),"Add Input")),o.a.createElement(Ji.a,{anchorEl:r&&r.current,open:c,onClose:function(){return s(!1)}},o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],((t.surveyjs||{}).questions||[]).concat([{name:"input"+m.length,type:"text",title:"New Text Input"}])))}},"Text Input"),o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],(t.surveyjs.questions||[]).concat({name:"input"+m.length,type:"radiogroup",title:"New Exclusive Choice Input",choices:["Yes","Maybe","No"]})))}},"Exclusive Choice"),o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],(t.surveyjs.questions||[]).concat({name:"input"+m.length,type:"checkbox",title:"New Checkbox Input",choices:["A","B","C"]})))}},"Checkboxes"),o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],t.surveyjs.questions.concat({name:"input"+m.length,type:"boolean",title:"New Boolean Input"})))}},"Boolean"),o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],(t.questions||[]).concat({name:"input"+m.length,type:"dropdown",title:"New Dropdown Input",choices:["A","B","C"]})))}},"Dropdown / Autocomplete"),o.a.createElement(Gi.a,{onClick:function(){s(!1),n(Object(io.setIn)(t,["surveyjs","questions"],t.surveyjs.questions.concat([{name:"input"+m.length,type:"multiple-dropdown",title:"New Multiple Dropdown Input",choices:["A","B","C"]}])))}},"Multiple Item Dropdown / Autocomplete")))},ol=Object(U.a)("div")({}),rl=Object(U.a)(wr.a)({marginTop:16,border:"2px solid #000"}),il=Object(U.a)(D.a)({width:"100%",margin:16,marginLeft:0}),ll=function(e){var t=e.iface,n=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ol,null,(t.fields||[]).map((function(e,a){return o.a.createElement(rl,{key:a},o.a.createElement(Sr.a,{expandIcon:o.a.createElement(Cr.a,null)},e.fieldName),o.a.createElement(Ir.a,null,o.a.createElement(ge.a,{display:"flex",flexDirection:"column"},o.a.createElement(N.a,{label:"Field Name",value:e.fieldName,onChange:function(e){n(Object(io.setIn)(["fields",a,"fieldName"],e.target.value,t))}}),o.a.createElement(Mc,{isNested:!0,iface:e.interface,onChange:function(a){n(Object(d.a)({},t,{fields:t.fields.map((function(t){return t.fieldName===e.fieldName?Object(d.a)({},e,{interface:a}):t}))}))}}),o.a.createElement(D.a,{onClick:function(){n(Object(d.a)({},t,{fields:t.fields.filter((function(t){return t.fieldName!==e.fieldName}))}))}},"Remove Field"))))})),o.a.createElement(il,{onClick:function(){n(Object(io.setIn)(t,["fields"],(t.fields||[]).concat({fieldOrder:(t.fields||[]).length,fieldName:"New Field",interface:{type:"empty"}})))}},"Add New Field")))},cl=Object(U.a)("div")({textAlign:"center",paddingTop:30,paddingBottom:50,userSelect:"none"}),sl=Object(U.a)("h3")({fontWeight:"bold",color:Se.a[500]}),ul=Object(U.a)("a")({color:u.a[500]}),ml=function(){return o.a.createElement(cl,null,o.a.createElement(sl,null,"Hey, this isn't currently available, but if you'd like this functionality please let us know by leaving a thumbs up on"," ",o.a.createElement(ul,{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/UniversalDataTool/universal-data-tool/issues/20"},"this")," ","github issue."))},pl={questions:[{name:"regionTypesAllowed",title:"Region Types Allowed",description:"What types of regions can be drawn on the image.",type:"multiple-dropdown",choices:["bounding-box","polygon","point"]},{name:"multipleRegions",title:"Can multiple regions be created?",type:"boolean"},{name:"multipleRegionLabels",title:"Multiple Region Labels Allowed?",type:"boolean"},{name:"labels",title:"Labels",description:"If you're labeling regions on an video frames, these are the allowed classifications or tags.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"description",title:"Description (optional)"}]}]},dl=function(e){var t=e.iface,n=e.onChange,r=Object(a.useMemo)((function(){return{multipleRegions:Boolean(t.multipleRegions||void 0===t.multipleRegions),multipleRegionLabels:Boolean(t.multipleRegionLabels),regionTypesAllowed:t.regionTypesAllowed,labels:(t.labels||[]).map((function(e){return"string"===typeof e?{id:e,description:e}:e}))||[]}}),[t]);return o.a.createElement(Wn.a,{noActions:!0,variant:"flat",defaultAnswers:r,onQuestionChange:function(e,a,o){n(Object(io.setIn)(t,[e],a))},form:pl})};function fl(e){var t=e.description,n=e.imageUrl,a=e.url,o=e.pdfUrl;return t||(n?"![".concat(n,"](").concat(n,")"):o?"[PDF Link](".concat(o,")")+'<object data="'.concat(o.replace("http://","https://"),'" type="application/pdf" width="100%" height="600px"></object>'):a?"Use this [Link](".concat(a,")"):null)}var gl=n(111),bl=n.n(gl),hl=n(212),vl=n.n(hl),El=n(550),yl=n.n(El),xl=n(252),Ol=n.n(xl),jl=Object(E.a)({linkButtonContainer:{marginLeft:8,marginRight:8},linkButton:{textTransform:"none",cursor:"pointer",textDecoration:"underline"}}),wl=function(e){var t=e.onClick,n=e.text,a=jl();return o.a.createElement("span",{className:a.linkButtonContainer},"(",o.a.createElement("span",{onClick:t,className:a.linkButton},n),")")},kl=Object(E.a)((function(e){return{footer:{backgroundColor:"#fff",marginTop:40},footerContent:{alignItems:"center",padding:20,display:"flex",justifyContent:"space-between"},footerBorder:{borderTop:"1px solid #ccc",marginLeft:20,marginRight:20},footerCount:{display:"inline-flex"},allSamplesButton:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",marginRight:10,paddingLeft:8},sampleIcon:{marginRight:8},menuButton:{marginRight:8,color:"#fff"},grow:{flexGrow:1},buttons:{"& > *":{margin:4}},description:{padding:10,"& img":{maxWidth:"calc(100% - 16px)",marginLeft:8,marginRight:8,maxHeight:600}},sectionHeader:{fontWeight:700,fontSize:12,padding:10,paddingTop:16,textTransform:"uppercase",color:Se.a[600]},content:{padding:10}}})),Cl=function(e){var t=e.hideDescription,n=void 0===t?'"true"'===window.localStorage.getItem("hideDescription"):t,r=(e.lastSampleExitText,e.onExit),i=e.requireCompleteToPressNext,l=void 0!==i&&i,c=(e.samples,e.minContentHeight),s=e.currentSampleIndex,m=e.totalSamples,p=e.onChangeSample,d=e.taskOutput,f=void 0===d?[]:d,g=e.description,b=e.children,v=kl(),E=Object(a.useState)(n),x=Object(h.a)(E,2),O=x[0],w=x[1],k=function(e){window.localStorage.setItem("hideDescription",'"'.concat(e?"true":"false",'"')),w(e)},C=Object(a.useState)(!1),S=Object(h.a)(C,2),I=S[0],T=S[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{container:!0},!O&&o.a.createElement(j.a,{item:!0,xs:12,sm:12,md:6},o.a.createElement("div",{className:v.sectionHeader},"Description",o.a.createElement(wl,{onClick:function(){return k(!0)},text:"hide"})),o.a.createElement("div",{className:v.description},o.a.createElement(Ln.a,{escapeHtml:!1,source:g}))),o.a.createElement(j.a,{item:!0,xs:12,sm:12,md:O?12:6},o.a.createElement("div",{className:v.sectionHeader},"Sample ",s+1,"/",m,O&&o.a.createElement(wl,{onClick:function(){return k(!1)},text:"show description"}),m>1&&o.a.createElement(wl,{onClick:function(){return T(!0)},text:"view all"}),r&&o.a.createElement(wl,{onClick:function(){return r()},text:"exit without saving"})),o.a.createElement("div",{style:{minHeight:c},className:v.content},b)),m>1&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("div",{className:v.footer},o.a.createElement("div",{className:v.footerBorder}),o.a.createElement("div",{className:v.footerContent},o.a.createElement(D.a,{onClick:function(){return p((s-1+m)%m)}},o.a.createElement(vl.a,null)," Prev Sample"),o.a.createElement(D.a,{onClick:function(){return T(!0)},className:v.footerCount},s+1," / ",m),o.a.createElement(D.a,{disabled:l&&!f[s],onClick:function(){return p((s+1)%m)}},l&&!f[s]?"Save to Continue":"Next Sample",o.a.createElement(bl.a,null)))))),o.a.createElement(y.a,{open:I,anchor:"left",onClose:function(){return T(!1)}},o.a.createElement(Pt.a,{style:{minWidth:300}},o.a.createElement(Bt.a,null,"Samples"),ya()(0,m).map((function(e){return o.a.createElement(Ut.a,{style:{backgroundColor:e===s?Se.a[200]:void 0},button:!0,onClick:function(){return p(e)}},o.a.createElement(Ft.a,{style:{color:e===s?u.a[500]:void 0}},f[e]?o.a.createElement(Ol.a,null):o.a.createElement(yl.a,null)),o.a.createElement(Rt.a,null,"Sample ",e+1))})))))},Sl=n(177),Il=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),r=n[0],i=n[1],l=e.samples[r].annotation;!e.interface.labels&&e.interface.availableLabels&&(e.interface.labels=e.interface.availableLabels);var c=l?"string"===typeof l?[l]:l:void 0;if(!e.interface.labels)throw new Error("Labels not defined. Try defining some labels in Setup");var s=e.interface.labels.map((function(e){return"string"===typeof e?{id:e,description:e,displayName:e}:e})).map((function(e){return e.displayName?e:Object(d.a)({},e,{displayName:e.id})}));return o.a.createElement(Cl,Object.assign({},e.containerProps,{currentSampleIndex:r,totalSamples:e.samples.length,taskOutput:e.samples,description:fl(e.samples[r])||e.interface.description,onChangeSample:function(e){return i(e)}}),o.a.createElement(Sl.a,{key:(e.sampleIndex||0)+r,type:"label-document",labels:s,multipleLabels:e.interface.multiple,document:e.samples[r].document,initialLabels:c,onFinish:function(t){e.onSaveTaskOutputItem(r,t),e.containerProps.onExit&&e.containerProps.onExit("go-to-next")}}))},Tl=function(e){var t,n=[],a=0,o=Object(H.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;r.label&&n.push({text:r.text,label:r.label,start:a,end:a+r.text.length}),a+=r.text.length}}catch(wu){o.e(wu)}finally{o.f()}return n},Nl=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),r=n[0],i=n[1],l=e.samples[r].annotation?function(e,t){if(t){var n=[];(t=Object(M.a)(t)).sort((function(e,t){return e.start-t.start}));for(var a=0,o=0;o<e.length;o++)(t[a]||{}).start===o?(n.push({text:t[a].text,label:t[a].label}),o=t[a].end,a+=1):0===n.length||n[n.length-1].label?n.push({text:e[o]}):n[n.length-1].text+=e[o];return n}}(e.samples[r].document,e.samples[r].annotation.entities):void 0;if(!e.interface.labels&&!e.interface.availableLabels)throw new Error("Labels not defined. Try adding some labels in setup.");return o.a.createElement(Cl,Object.assign({},e.containerProps,{currentSampleIndex:r,totalSamples:e.samples.length,taskOutput:e.samples.map((function(e){return e.annotation})),description:fl(e.samples[r])||e.interface.description,onChangeSample:function(e){return i(e)}}),o.a.createElement(Sl.a,{key:r,type:"label-sequence",document:e.samples[r].document,labels:e.interface.labels||e.interface.availableLabels,initialSequence:l,onFinish:function(t){e.onSaveTaskOutputItem(r,{entities:Tl(t)}),e.containerProps.onExit&&e.containerProps.onExit("go-to-next")}}))},Dl=n(294);function Al(){var e,t,n=(e=0,t=360,Math.floor(Math.random()*(t-e+1))+e);return"hsl(".concat(n.toString(),",").concat(100..toString(),"%,").concat(50..toString(),"%)")}var _l=function(){return Math.random().toString().split(".")[1]},Ll=function(e){switch(e.regionType){case"bounding-box":return{id:_l(),cls:e.classification,tags:e.labels,color:e.color||Al(),type:"box",x:e.centerX-e.width/2,y:e.centerY-e.height/2,w:e.width,h:e.height};case"point":return{id:_l(),type:"point",tags:e.labels,cls:e.classification,color:e.color||Al(),x:e.x,y:e.y};case"polygon":return{id:_l(),type:"polygon",tags:e.labels,cls:e.classification,color:e.color||Al(),open:!1,points:e.points.map((function(e){return[e.x,e.y]}))};case"line":case"pixel-mask":throw new Error('Unsupported region "'.concat(JSON.stringify(e),'"'));default:return null}},Pl=function(e){switch(e.type){case"point":return{regionType:"point",x:e.x,y:e.y,classification:e.cls,labels:e.tags,color:e.color};case"box":return{regionType:"bounding-box",centerX:e.x+e.w/2,centerY:e.y+e.h/2,width:e.w,height:e.h,classification:e.cls,labels:e.tags,color:e.color};case"polygon":return{regionType:"polygon",classification:e.cls,labels:e.tags,color:e.color,points:e.points.map((function(e){var t=Object(h.a)(e,2);return{x:t[0],y:t[1]}}))};default:throw new Error('Unsupported riaRegion "'.concat(JSON.stringify(e),'"'))}},Ul=function(e){var t=e.title,n=e.taskDatum,a=e.index,o=e.output;n=n||{};var r=o?Array.isArray(o)?o.map(Ll):[Ll(o)]:void 0;if(n.imageUrl)return{src:n.imageUrl,name:t||"Sample ".concat(a),regions:r};if(n.videoUrl&&void 0!==n.videoFrameAt)return{src:n.videoUrl,frameTime:n.videoFrameAt,name:t||"Sample ".concat(a),regions:r};throw new Error('Task Datum not supported "'.concat(JSON.stringify(n),'"'))},Rl=function(e){var t={};for(var n in e)t[n]={regions:e[n].regions.map(Ll)};return t},Fl={"bounding-box":"create-box",polygon:"create-polygon",point:"create-point"},Bl={},Ml=[],zl=function(e){var t=e.sampleIndex,n=e.interface,r=e.samples,i=void 0===r?Ml:r,l=e.containerProps,c=void 0===l?Bl:l,s=e.onSaveTaskOutputItem;n.availableLabels&&!n.labels&&(n.labels=n.availableLabels);var u=Object(a.useState)(0),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Object(a.useState)(!0),g=Object(h.a)(f,2),b=g[0],v=g[1],E=Object(a.useState)("select"),y=Object(h.a)(E,2),x=y[0],O=y[1],j=n.regionTypesAllowed,w=void 0===j?["bounding-box"]:j,k=!Boolean(n.multipleRegionLabels),C="image_pixel_segmentation"===n.type,S=Object(dt.a)((function(e){var t=e.images[p];s(p,T?(t.regions||[]).map(Pl):Ul((t.regions||[])[0]))})),I=Object(a.useMemo)((function(){return C?{regionClsList:["background"].concat(n.labels||[]).map((function(e){return"string"===typeof e?e:e.id}))}:k?{regionClsList:(n.labels||[]).map((function(e){return"string"===typeof e?e:e.id}))}:{regionTagList:(n.labels||[]).map((function(e){return"string"===typeof e?e:e.id}))}}),[k,n.labels,C]),T=n.multipleRegions||void 0===n.multipleRegions,N=Object(dt.a)((function(e,t){S(e),v(e.showTags),O(e.selectedTool),c.onExit&&c.onExit(t)})),D=Object(dt.a)((function(e){p+1>=i.length?N(e,"go-to-next"):(S(e),d(p+1))})),A=Object(dt.a)((function(e){p-1<0?N(e,"go-to-previous"):(S(e),d(p-1))})),_=Object(a.useMemo)((function(){return i.map((function(e,t){return Ul({title:c.datasetName,taskDatum:e,output:i[t].annotation,index:t})}))}),[i,c.datasetName]),L="image_pixel_segmentation"===n.type?void 0:Object(a.useMemo)((function(){return["select"].concat(w.map((function(e){return Fl[e]})).filter(Boolean))}),[w]),P=Object(a.useMemo)((function(){if(n.allowedArea){var e=n.allowedArea;return{x:e.x,y:e.y,w:e.width,h:e.height}}}),[n.allowedArea]);return o.a.createElement("div",{style:{height:c.height||"calc(100% - 70px)",minHeight:600,width:"100%"}},o.a.createElement(Dl.a,Object.assign({key:t,fullImageSegmentationMode:C,selectedImage:i[p].imageUrl,taskDescription:n.description,allowedArea:P,showTags:b},I,{onNextImage:D,onPrevImage:A,enabledTools:L,selectedTool:x,images:_,onExit:N})))},Hl=n(413),Wl=n(412),ql=n(570),Vl=n.n(ql),Jl=[u.a[600],Ke.a[600],B.a[600],lt.a[600],st.a[600],Hl.a[600],Wl.a[600],pt.a[600],u.a[600],ut.a[600],ct.a[600]],Gl="abcdefghijklmnopqrstuvwxyz1234567890".split(""),Kl=function(e){var t=e.id.split("").reduce((function(e,t,n){return e+(Gl.indexOf(t)+1)}),0);return Jl[t%Jl.length]},Xl=Object(U.a)("div")({maxWidth:"100vw",display:"flex",flexDirection:"column"}),Zl=Object(U.a)("div")({position:"relative",display:"flex",flexGrow:1}),Yl=Object(U.a)("img")({display:"inline-block",position:"absolute",left:0,top:0,width:"100%",height:"100%",objectFit:"contain"}),Ql=Object(U.a)("div")({display:"flex",justifyContent:"center",marginTop:4,flexShrink:0}),$l=Object(U.a)("div")({backgroundColor:"#000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center","& > span":{padding:16}}),ec=Object(U.a)(D.a)({color:"#fff",padding:8,paddingLeft:16,paddingRight:16}),tc=Object(U.a)("div")({paddingLeft:50,paddingRight:50,marginTop:8,textAlign:"center",flexShrink:0}),nc=Object(U.a)(D.a)({margin:8,color:"#fff",fontSize:18,paddingRight:16,transition:"transform 50ms ease"}),ac={},oc=[],rc=function(e){var t=e.sampleIndex,n=e.interface,r=e.samples,i=void 0===r?oc:r,l=e.containerProps,c=void 0===l?ac:l,s=e.onSaveTaskOutputItem;if(n.availableLabels&&!n.labels&&(n.labels=n.availableLabels),!n.labels)throw new Error("No labels defined. Add some labels in Setup to continue.");var u=Object(a.useState)(0),m=Object(h.a)(u,2),p=m[0],d=m[1],f=Object(a.useState)(null),g=Object(h.a)(f,2),b=g[0],v=g[1],E=Object(a.useState)(oc),y=Object(h.a)(E,2),x=y[0],O=y[1],j=Object(a.useMemo)((function(){return n.labels.map((function(e){return"string"===typeof e?{id:e,description:e}:e}))}),[n.labels]),w=Object(dt.a)((function(){c.onExit&&c.onExit()})),k=Object(dt.a)((function(){c.onExit&&c.onExit("go-to-next")})),C=Object(dt.a)((function(e){s(p,e||x),p!==i.length-1?d(p+1):c.onExit&&c.onExit("go-to-next")})),S=Object(dt.a)((function(){p>0?d(p-1):c.onExit&&c.onExit("go-to-previous")}));Object(a.useEffect)((function(){var e=setTimeout((function(){v(null)}),100);return function(){return clearTimeout(e)}}),[b]);var I=Object(dt.a)((function(e){var t;v(e),t=(x||[]).includes(e.id)?Vl()(x,e.id):n.allowMultiple?x.concat([e.id]):e.id,O(t),!n.allowMultiple&&t.length>0&&C(t)}));Object(a.useEffect)((function(){var e=i[p].annotation;e||(e=[]),"string"===typeof e&&(e=[e]),O(e)}),[p,t,i]);var T=Object(a.useMemo)((function(){var e,t={" ":C,backspace:S,enter:w,rightarrow:C,leftarrow:S},n={},a=Object(H.a)(j);try{var o=function(){var a=e.value,o=a.id.split("").filter((function(e){return Gl.includes(e)})).find((function(e){return!t[e.toLowerCase()]}));if(!o)return"continue";t[o]=function(){return I(a)},n[a.id]=o};for(a.s();!(e=a.n()).done;)o()}catch(wu){a.e(wu)}finally{a.f()}return[t,n]}),[j,I,w,C,S]),N=Object(h.a)(T,2),D=N[0],A=N[1];return Object(a.useEffect)((function(){var e=function(e){var t=e.key.toLowerCase();D[t]&&D[t]()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[D]),o.a.createElement(Xl,{style:{height:c.height||"calc(100% - 70px)",minHeight:600}},o.a.createElement(Zl,null,o.a.createElement(Yl,{src:i[p].imageUrl})),o.a.createElement(Ql,null,o.a.createElement($l,null,o.a.createElement(ec,{onClick:S},"Prev (backspace)")),i.length>1?o.a.createElement($l,null,o.a.createElement("span",null,"(",p+1,"/",i.length,")")):void 0!==t?o.a.createElement($l,null,o.a.createElement("span",null,"[",t,"]")):null,o.a.createElement($l,null,o.a.createElement(ec,{onClick:k},"Next (space)")),o.a.createElement($l,null,o.a.createElement(ec,{onClick:w},"Done (enter)"))),o.a.createElement(tc,null,j.map((function(e){return o.a.createElement(nc,{key:e.id,onClick:function(){return I(e)},style:{backgroundColor:Kl(e),transform:b===e?"scale(1.1,1.1)":void 0}},o.a.createElement(_.a,{style:{color:"#fff"},checked:x.includes(e.id)}),e.id,A[e.id]?" (".concat(A[e.id],")"):"")}))))},ic={"bounding-box":"create-box",polygon:"create-polygon","full-segmentation":"create-polygon",point:"create-point"},lc={},cc=[],sc=function(e){var t=e.interface,n=e.samples,r=void 0===n?cc:n,i=e.taskOutput,l=void 0===i?lc:i,c=e.containerProps,s=void 0===c?lc:c,u=e.onSaveTaskOutputItem,m=t.regionTypesAllowed,p=void 0===m?["bounding-box"]:m,d=!Boolean(t.multipleRegionLabels),f=Object(a.useMemo)((function(){return d?{regionClsList:(t.labels||[]).map((function(e){return"string"===typeof e?e:e.id}))}:{regionTagList:(t.labels||[]).map((function(e){return"string"===typeof e?e:e.id}))}}),[d,t.labels]),g=Object(dt.a)((function(e){var t={};for(var n in e.keyframes)t[n]={regions:e.keyframes[n].regions.map(Pl)};u(0,{keyframes:t}),s.onExit&&s.onExit()})),b=Object(a.useMemo)((function(){return["select"].concat(p.map((function(e){return ic[e]})).filter(Boolean))}),[p]);if(r.length>1)return"Video segmentation is currently limited to only a single video per selection";if(0===r.length)throw new Error("No sample data provided selected");if(!r[0].videoUrl)throw new Error("Sample must have videoUrl");return o.a.createElement("div",{style:{height:s.height||"calc(100vh - 70px)",width:"100%",minHeight:600}},o.a.createElement(Dl.a,Object.assign({taskDescription:t.description},f,{enabledTools:b,keyframes:Rl(((l||[])[0]||{}).keyframes),videoName:r[0].customId||"",videoTime:0,videoSrc:r[0].videoUrl,onExit:g})))},uc=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),r=n[0],i=n[1],l=e.samples[r];return o.a.createElement(Cl,Object.assign({},e.containerProps,{currentSampleIndex:r,totalSamples:e.samples.length,taskOutput:e.samples.map((function(e){return e.annotation})),description:fl(e.samples[r])||e.interface.description,onChangeSample:function(e){return i(e)}}),o.a.createElement(Sl.a,{key:(e.sampleIndex||0)+r,type:"transcribe",audio:l.audioUrl,phraseBank:e.phraseBank,initialTranscriptionText:l.annotation||"",onFinish:function(t){e.onSaveTaskOutputItem(r,t),e.containerProps.onExit&&e.containerProps.onExit("go-to-next")}}))},mc=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),r=n[0],i=n[1],l=e.samples[r].surveyjs||e.interface.surveyjs;if(!l)throw new Error("No survey/form created. Try adding some inputs in Setup");return o.a.createElement(Cl,Object.assign({},e.containerProps,{currentSampleIndex:r,totalSamples:e.samples.length,taskOutput:e.samples.map((function(e){return e.annotation})),description:fl(e.samples[r])||e.interface.description,onChangeSample:function(e){return i(e)}}),o.a.createElement(Wn.a,{key:(e.sampleIndex||0)+r,variant:"flat",form:l,defaultAnswers:e.samples[r].annotation||void 0,completeText:"Save & Next",onFinish:function(t){e.onSaveTaskOutputItem(r,t),e.containerProps.onExit&&e.containerProps.onExit("go-to-next")}}))},pc=Object(E.a)({root:{padding:50,textAlign:"center"},title:{margin:50},explain:{}}),dc=function(e){var t=e.title,n=e.description,a=e.children,r=pc();return o.a.createElement("div",{className:r.root},o.a.createElement(T.a,{variant:"h4",component:"div",className:r.title},t),o.a.createElement(T.a,{variant:"h6",component:"div",className:r.explain},n||a))},fc=function(){return o.a.createElement(dc,{title:"No Samples to Show"},"Make sure that ",o.a.createElement("code",null,"samples")," is defined and not empty.",o.a.createElement("br",null),o.a.createElement("br",null),"Need help setting up? ")},gc=n(571),bc=n.n(gc),hc=n(345),vc=n.n(hc),Ec=function(e){var t=e.type,n=Object(fa.a)(e,["type"]);switch(t){case"image_label":case"image_segmentation":return o.a.createElement(bc.a,n);case"audio_transcription":return o.a.createElement(tn.a,n);case"data_entry":return o.a.createElement($t.a,n);case"text_entity_recognition":return o.a.createElement(Yt.a,n);case"3d_bounding_box":return o.a.createElement(rn.a,n);default:return o.a.createElement(vc.a,n)}},yc=Object(U.a)("div")({fontSize:18,fontWeight:"bold",color:Se.a[700],borderBottom:"1px solid ".concat(Se.a[300]),paddingBottom:8,marginBottom:8,paddingLeft:8}),xc=Object(U.a)(D.a)({display:"flex",textAlign:"left",justifyContent:"flex-start",marginTop:8}),Oc=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),r=n[0],i=n[1],l=e.interface.fields,c=Object(a.useState)(),s=Object(h.a)(c,2),u=s[0],m=s[1];if(!l)throw new Error("No fields defined. Try adding a field in Setup");var p=e.samples[r];return u?o.a.createElement(jc,{dataset:{interface:u.interface,samples:[Object(d.a)({},p,{annotation:(p.annotation||{})[u.fieldName]})]},onSaveTaskOutputItem:function(t,n){e.onSaveTaskOutputItem(r,Object(d.a)({},p.annotation,Object(I.a)({},u.fieldName,n))),m(null)}}):o.a.createElement(Cl,Object.assign({},e.containerProps,{currentSampleIndex:r,totalSamples:e.samples.length,taskOutput:e.samples.map((function(e){return e.annotation})),description:fl(p)||e.interface.description,onChangeSample:function(e){return i(e)}}),o.a.createElement(yc,null,"Fields"),l.map((function(e,t){return o.a.createElement(xc,{key:e.fieldName,onClick:function(){m(Object(d.a)({},e,{index:t}))},fullWidth:!0,variant:"outlined"},o.a.createElement(Ec,{style:{color:Se.a[500],marginRight:16},type:e.interface.type}),e.fieldName,o.a.createElement(ge.a,{flexGrow:1}),o.a.createElement(_.a,{checked:Boolean((p.annotation||{})[e.fieldName])}),o.a.createElement(bl.a,null))})),o.a.createElement(xc,{onClick:function(){return e.containerProps.onExit("go-to-next")},fullWidth:!0,variant:"outlined"},o.a.createElement(bl.a,{style:{color:Se.a[500],marginRight:16}}),"Next",o.a.createElement(ge.a,{flexGrow:1}),o.a.createElement(ge.a,{height:"42px"}),o.a.createElement(bl.a,null)))},jc=function(e){var t=e.dataset,n=e.onExit,r=e.hideHeader,i=e.hideDescription,l=e.datasetName,c=e.requireCompleteToPressNext,s=e.onSaveTaskOutputItem,u=e.height,m=e.onClickSetup,p=Object(a.useMemo)((function(){return{hideHeader:r,hideDescription:i,datasetName:l,requireCompleteToPressNext:c,onExit:n,height:u}}),[r,i,c,l,u,n]);if(!t||!t.interface.type)return o.a.createElement(dc,{title:"Set up your project to begin labeling",description:o.a.createElement("p",null,'This interface hasn\'t been set up properly, try selecting an interface in the "Setup" tab.',o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(D.a,{color:"primary",variant:"contained",onClick:m},"Setup Project"))});if(!t.samples||0===t.samples.length)return o.a.createElement(fc,null);switch(t.interface.type){case"data_entry":return o.a.createElement(mc,Object.assign({containerProps:p},t,{onSaveTaskOutputItem:s,onExit:n}));case"text_classification":return o.a.createElement(Il,Object.assign({containerProps:p},t,{onSaveTaskOutputItem:s,onExit:n}));case"text_entity_recognition":return o.a.createElement(Nl,Object.assign({containerProps:p},t,{onSaveTaskOutputItem:s,onExit:n}));case"image_segmentation":case"image_pixel_segmentation":return o.a.createElement(zl,Object.assign({containerProps:p},t,{onExit:n,onSaveTaskOutputItem:s}));case"image_classification":return o.a.createElement(rc,Object.assign({containerProps:p},t,{onExit:n,onSaveTaskOutputItem:s}));case"video_segmentation":return o.a.createElement(sc,Object.assign({containerProps:p},t,{onExit:n,onSaveTaskOutputItem:s}));case"composite":return o.a.createElement(Oc,Object.assign({containerProps:p},t,{dataset:t,onSaveTaskOutputItem:s,onExit:n}));case"audio_transcription":return o.a.createElement(uc,Object.assign({containerProps:p},t,{onSaveTaskOutputItem:s,onExit:n}));default:return'"'.concat(t.interface.type,'" not supported')}},wc=n(121),kc=n(169),Cc=n(178),Sc=n(96),Ic=n(583);Sc.e({dsn:"https://bc19fbac222243f08f0abaf6d66f2034@sentry.io/5182632",whitelistUrls:["https://universaldatatool.com","^file:?:"]});var Tc=Ic,Nc=function(e){Object(kc.a)(n,e);var t=Object(Cc.a)(n);function n(e){var a;return Object(Y.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(wc.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this;Tc.withScope((function(a){a.setExtras(t);var o=Tc.captureException(e);n.setState({eventId:o})}))}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(dc,{title:"An error occurred loading the labeling interface",description:this.state.errorString}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error("The following error occurred when loading a labeling interface:",e),{hasError:!0,errorString:e.toString()}}}]),n}(o.a.Component),Dc=function(){},Ac=Object(U.a)("div")({padding:24,"&.emptyState":{textAlign:"center",backgroundColor:u.a[800],minHeight:"70vh",padding:64,"& .bigText":{textAlign:"left",fontSize:48,color:"#fff",fontWeight:"bold",marginBottom:48}}}),_c=Object(U.a)(D.a)({padding:10,width:200,height:150,boxShadow:"0px 3px 5px rgba(0,0,0,0.3)",margin:12,backgroundColor:"#fff","& .bigIcon":{marginTop:16,width:64,height:64},"&:hover":{backgroundColor:"#fff"}}),Lc=Object(U.a)("div")({fontSize:18,textAlign:"center",fontWeight:"bold",color:Se.a[500],paddingTop:30,paddingBottom:50}),Pc=Object(U.a)(D.a)({margin:8,"& .icon":{marginRight:8,color:"#888"},alignItems:"center",justifyContent:"center","&.selected":{backgroundColor:u.a[500],color:"#fff","& .icon":{color:"#fff"}}}),Uc=Object(U.a)("div")({fontWeight:"bold",textTransform:"uppercase",fontSize:12,paddingLeft:8,marginBottom:8,marginTop:16,color:Se.a[700]}),Rc=Object(U.a)("div")({display:"flex",justifyContent:"space-around",mouseEvents:"none",padding:16}),Fc=Object(U.a)("div")({display:"flex",width:"100%",height:600}),Bc=function(e){var t=e.currentlySelected,n=e.onChange;return dn.map((function(e){return o.a.createElement(Pc,{key:e.dataset.interface.type||"empty",className:t===e.dataset.interface.type?"selected":"",variant:"outlined",onClick:function(){t!==e.dataset.interface.type&&n(e.dataset.interface.type)}},o.a.createElement(e.Icon,{className:"icon"}),e.name)}))},Mc=function(e){var t=e.iface,n=void 0===t?{}:t,r=e.onChange,i=(e.onClickEditJSON,e.isNested),l=void 0!==i&&i,c=Object(a.useState)(0),s=Object(h.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(!1),d=Object(h.a)(p,2),f=d[0],g=d[1],b=Object(dt.a)((function(){m(Date.now()),r.apply(void 0,arguments)}));return Object(a.useEffect)((function(){if(!(Date.now()-u>1e3)){g(!0);var e=setTimeout((function(){g(!1)}),1e3);return function(){clearTimeout(e)}}}),[u]),n.type&&"empty"!==n.type?o.a.createElement(Ac,null,o.a.createElement(Uc,null,"Interface Type"),o.a.createElement(Bc,{currentlySelected:n.type,onChange:function(e){b(dn.map((function(e){return e.dataset.interface})).find((function(t){return t.type===e}))||{})}}),o.a.createElement(j.a,{container:!0},o.a.createElement(j.a,{item:!0,hidden:l,xs:12,lg:6},o.a.createElement(Uc,null,"Preview"),o.a.createElement(Rc,null,o.a.createElement(Fc,{style:{opacity:f?.5:1}},o.a.createElement(Nc,{key:u},o.a.createElement(jc,{key:u,height:600,onExit:Dc,onSaveTaskOutputItem:Dc,dataset:{interface:n,samples:[pn[n.type].dataset.samples[0]]}}))))),o.a.createElement(j.a,{item:!0,xs:12,lg:l?12:6},o.a.createElement(Uc,null,"Options"),o.a.createElement(ge.a,{paddingTop:2}),!n.type&&o.a.createElement(Lc,null,"Select a Type"),"image_segmentation"===n.type&&o.a.createElement(Pi,{iface:n,onChange:b}),"image_pixel_segmentation"===n.type&&o.a.createElement(Ri,{iface:n,onChange:b}),"image_classification"===n.type&&o.a.createElement(Bi,{iface:n,onChange:b}),"composite"===n.type&&o.a.createElement(ll,{iface:n,onChange:b}),"data_entry"===n.type&&o.a.createElement(al,{iface:n,onChange:b}),"audio_transcription"===n.type&&o.a.createElement(Wi,{iface:n,onChange:b}),"text_entity_recognition"===n.type&&o.a.createElement(Vi,{iface:n,onChange:b}),"text_classification"===n.type&&o.a.createElement(zi,{iface:n,onChange:b}),"video_segmentation"===n.type&&o.a.createElement(dl,{iface:n,onChange:b}),"3d_bounding_box"===n.type&&o.a.createElement(ml,{iface:n,onChange:b})))):o.a.createElement(Ac,{className:"emptyState"},o.a.createElement("div",{className:"bigText"},"Choose an Interface:"),dn.filter((function(e){return"Empty"!==e.name})).map((function(e){return o.a.createElement(_c,{key:e.name,onClick:function(){return b(e.dataset.interface)}},o.a.createElement("div",null,o.a.createElement("div",null,e.name),o.a.createElement("div",null,o.a.createElement(e.Icon,{className:"bigIcon"}))))})))},zc=Object(U.a)("div")({margin:16,padding:16,border:"1px solid #ccc",borderRadius:4,boxShadow:"0px 2px 2px rgba(0,0,0,0.1)"}),Hc=Object(E.a)({table:{}}),Wc={marginLeft:8,width:16,height:16},qc=function(e){var t=e.open,n=e.onClose,r=e.onChangeHotkey,i=e.hotkeyList,l=e.onClearHotkeys,c=Hc(),s=Object(a.useState)(),u=Object(h.a)(s,2),m=u[0],p=u[1],d=Object(a.useState)({}),f=Object(h.a)(d,2),g=f[0],b=g.modifier,v=g.key,E=f[1];return Object(a.useEffect)((function(){if(m)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)};function e(e){["shift","ctrl","cmd","alt"].includes(e.key.toLowerCase())&&E({modifier:e.key.toLowerCase(),key:v}),1===e.key.length&&E({modifier:b,key:e.key.toLowerCase()})}}),[m,v,b,E]),Object(a.useEffect)((function(){v&&(r(m,b?"".concat(b," + ").concat(v):v),E({}),p(null))}),[b,v,r,m]),o.a.createElement(Fn,{title:"Manage Keyboard Shortcuts",actions:[{text:"Clear Hotkeys",onClick:l}],open:t,onClose:n},o.a.createElement(ur.a,null,o.a.createElement(lr.a,{className:c.table,"aria-label":"simple table"},o.a.createElement(mr.a,null,o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Action"),o.a.createElement(sr.a,{align:"right"},"Keyboard Shortcut"))),o.a.createElement(cr.a,null,i.map((function(e){return o.a.createElement(pr.a,{key:e.description},o.a.createElement(sr.a,null,e.description),o.a.createElement(sr.a,{align:"right"},o.a.createElement(D.a,{onClick:function(){if(m!==e)return p(e),void E({})},style:{minWidth:0}},o.a.createElement("b",null,m===e?b||v?"<".concat(b?b+"+":"").concat(v||"???",">"):"<Press Any Key>":e.binding),o.a.createElement($t.a,{style:Wc}))))}))))))},Vc=Object(U.a)(D.a)({margin:8}),Jc=function(e){var t=e.onClickEditJSON,n=e.onClearLabelData,r=Object($.a)(),i=Re(),l=X(),c=l.fromConfig,s=l.setInConfig,u=V(),m=u.hotkeys,p=u.changeHotkey,d=u.clearHotkeys,f=Object(a.useState)(!1),g=Object(h.a)(f,2),b=g[0],v=g[1];return o.a.createElement(ge.a,{padding:2},o.a.createElement(Vc,{onClick:t,variant:"outlined"},"Edit JSON"),o.a.createElement(Vc,{onClick:function(){window.confirm("Are you sure you want to delete all your label data? Click OK to delete.")&&n()},variant:"outlined"},"Clear All Labels"),o.a.createElement(Vc,{variant:"outlined",onClick:function(){i.has_opted_out_capturing()?i.opt_in_capturing():i.opt_out_capturing(),r()}},i.has_opted_out_capturing()?"Enable":"Disable"," Telemetry"),o.a.createElement(Vc,{variant:"outlined",onClick:function(){var e=window.prompt("Input URL for new collaboration server (empty to use universaldatatool.com):",window.localStorage.getItem("CUSTOM_COLLABORATION_SERVER")||"");null!==e&&(window.localStorage.setItem("CUSTOM_COLLABORATION_SERVER",e),window.location.reload())}},"Custom Collaboration Server"),o.a.createElement(Vc,{variant:"outlined",onClick:function(){s("labelhelp.disabled",!Boolean(c("labelhelp.disabled")))}},c("labelhelp.disabled")?"Enable":"Disable"," Label Help"),!c("labelhelp.disabled")&&o.a.createElement(Vc,{variant:"outlined",disabled:Boolean(c("labelhelp.disabled")),onClick:function(){var e=window.prompt("Label Help API Key:",c("labelhelp.apikey")||"");null!==e&&s("labelhelp.apikey",e)}},"Label Help API Key"),o.a.createElement(Vc,{variant:"outlined",onClick:function(){v(!0)}},"Change/View Hotkeys"),o.a.createElement(qc,{open:b,hotkeyList:m,onClose:function(){return v(!1)},onClearHotkeys:d,onChangeHotkey:function(e,t){return p(e.id,t)}}))},Gc=function(e){var t=e.dataset,n=e.onChange,a=e.onClickEditJSON,r=e.onClearLabelData,i=t.interface;return o.a.createElement("div",null,o.a.createElement(Mc,{iface:i,onChange:n,onClickEditJSON:a,isNotNested:!0}),o.a.createElement(zc,null,o.a.createElement(Uc,null,"Advanced"),o.a.createElement(Jc,{onClearLabelData:r,onClickEditJSON:a})))},Kc=function(e){var t=e.open,n=e.sampleIndex,r=e.sampleInput,i=e.onChange,l=e.onClose,c=Object(a.useState)(),s=Object(h.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(),d=Object(h.a)(p,2),f=d[0],g=d[1];return Object(a.useEffect)((function(){var e=JSON.stringify(r,null,"  ");e!==u&&(m(e),g(null))}),[n,r,u]),o.a.createElement(Fn,{open:t,onClose:l,title:"samples[".concat(n,"]")},o.a.createElement(ma.a,{theme:"github",mode:"javascript",width:"100%",value:u,editorProps:{$blockScrolling:1/0},onChange:function(e){m(e),g(null);try{i(JSON.parse(e))}catch(t){g(t.toString())}}}),o.a.createElement(ge.a,{color:"red"},f))},Xc=Object(E.a)({root:{position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,alignItems:"flex-start",pointerEvents:"none"},msgBox:{display:"flex",backgroundColor:u.a[700],fontSize:12,color:"#fff",padding:4,marginBottom:4,boxShadow:"0px 3px 8px rgba(0,0,0,0.5)","&.warning":{backgroundColor:mt.a[700]},"&.error":{backgroundColor:B.a[700]}}}),Zc=Object(a.createContext)({}),Yc=function(){return{addToast:Object(a.useContext)(Zc).addToast}},Qc=function(e){var t=e.children,n=Object(a.useReducer)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("add"===t.type){var n="info"===t.messageType?2e3:(t.messageType,5e3);return e.concat([{id:Math.random().toString().split(".")[1],message:t.message,type:t.messageType,life:n,fullLife:n}])}return"tick"===t.type?e.map((function(e){return Object(d.a)({},e,{life:e.life-100})})).filter((function(e){return e.life>0})):e}),[]),r=Object(h.a)(n,2),i=r[0],l=r[1],c=Xc();Object(a.useEffect)((function(){if(0===i.length)return function(){};var e=setInterval((function(){l({type:"tick"})}),100);return function(){return clearInterval(e)}}),[i]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Zc.Provider,{value:{toasts:i,addToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";return l({type:"add",message:e,messageType:t})}}},t),o.a.createElement("div",{className:c.root},i.map((function(e){return o.a.createElement(qn.a,{key:e.id,in:e.life<e.fullLife},o.a.createElement(Vn.a,{in:e.life>600},o.a.createElement("div",{className:Oa()(c.msgBox,e.type)},e.message)))}))))},$c=Object(U.a)("div")({}),es=Object(U.a)("div")({display:"inline-flex",flexDirection:"column",margin:8}),ts=Object(U.a)("div")({fontSize:14,fontWeight:"bold",color:Se.a[700]}),ns=Object(U.a)("div")({fontSize:32,marginTop:8}),as=function(e){var t=e.stats;return o.a.createElement($c,null,t.map((function(e){return o.a.createElement(es,{key:e.name},o.a.createElement(ts,null,e.name),o.a.createElement(ns,null,e.value))})))},os=n(361),rs=n.n(os),is=n(576),ls=n.n(is),cs=n(575),ss=n.n(cs),us=n(573),ms=n.n(us),ps=Object(U.a)("div")({fontSize:18,color:Se.a[800],padding:16,"& a":{color:u.a[600]}}),ds=Object(U.a)("div")({color:B.a[600]}),fs=function(){var e=X().setInConfig,t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],i=n[1],l=Object(a.useState)(""),c=Object(h.a)(l,2),s=c[0],u=c[1],m=Object(a.useState)(""),p=Object(h.a)(m,2),d=p[0],f=p[1];return o.a.createElement(ge.a,{paddingTop:8,textAlign:"center"},o.a.createElement(ps,null,"To use Label Help, enter your API key. You can"," ",o.a.createElement("a",{href:"https://labelhelp.universaldatatool.com"},"get an API key here"),"."),d&&o.a.createElement(ds,null,d),o.a.createElement(ge.a,{paddingTop:2,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},o.a.createElement(N.a,{onChange:function(e){return u(e.target.value)},className:"label-help-api-key-text-field",variant:"outlined",label:"API Key"}),o.a.createElement(D.a,{style:{marginTop:16},color:"primary",disabled:r,variant:"outlined",onClick:Object(b.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(null),i(!0),t.prev=2,t.next=5,fetch("https://labelhelp.universaldatatool.com/api/me",{headers:{apikey:s}});case 5:if(200===(n=t.sent).status){t.next=8;break}throw new Error(n.toString());case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(2),f(t.t0.toString()),i(!1),t.abrupt("return");case 15:i(!1),e("labelhelp.apikey",s);case 17:case"end":return t.stop()}}),t,null,[[2,10]])})))},r?o.a.createElement(o.a.Fragment,null,o.a.createElement(_e.a,{size:18,style:{marginRight:16}}),"Checking..."):o.a.createElement(o.a.Fragment,null,o.a.createElement(ms.a,{style:{marginRight:8}}),"Save"))))},gs=n(1105),bs=n(1100),hs=n(1103),vs=function(){var e=ys(),t=e.file,n=e.setFile;return Object(a.useMemo)((function(){return t&&t.content?{dataset:t.content,setDataset:function(e){n(Object(io.setIn)(t,["content"],e))}}:null}),[t,n])||{}},Es=Object(a.createContext)({}),ys=function(){return Object(a.useContext)(Es)},xs=Object(U.a)("div")({fontVariantNumeric:"tabular-nums"}),Os=Object(U.a)("a")({color:u.a[500],textDecoration:"none"}),js=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),ws=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:4,minimumFractionDigits:2}),ks=["setup","running","completed"],Cs=function(){var e=X(),t=e.fromConfig,n=e.setInConfig,r=As(),i=r.labelHelpEnabled,l=r.labelHelpError,c=r.loadMyCredits,s=r.variables,u=r.totalCost,m=r.formulaFunc,p=r.myCredits,f=Object(a.useState)(),v=Object(h.a)(f,2),E=v[0],y=v[1],x=vs(),O=x.dataset,j=x.setDataset,w=Object(a.useState)(O.labelHelp||{}),k=Object(h.a)(w,2),C=k[0],S=k[1],T=C.url||(O.labelHelp||{}).url;if(Object(a.useEffect)((function(){null!==p&&void 0!==p||c(O)}),[p,O,c]),Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://labelhelp.universaldatatool.com/api/job?custom_id=".concat(encodeURIComponent(T),"&api_key=").concat(t("labelhelp.apikey"))).then((function(e){return e.json()}));case 2:n=e.sent,console.log({response:n}),S(Object(d.a)({},O.labelHelp,{},n,{loaded:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}T&&function(){e.apply(this,arguments)}()}),[T,O.labelHelp,t]),!i)return o.a.createElement(xs,null,"Label Help is Disabled.",l&&o.a.createElement("div",{style:{color:B.a[500]}},l));var N=T?1===C.progress?"completed":"running":"setup";return o.a.createElement(xs,null,o.a.createElement(gs.a,{activeStep:ks.indexOf(N)},["Setup","Running","Completed"].map((function(e){return o.a.createElement(bs.a,{key:e},o.a.createElement(hs.a,null,e))}))),E&&o.a.createElement(ge.a,{color:B.a[600]},E),"setup"===N?o.a.createElement(ge.a,null,o.a.createElement(lr.a,null,o.a.createElement(mr.a,null,o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Item"),o.a.createElement(sr.a,null,"Quantity"),o.a.createElement(sr.a,null,"Unit Cost"),o.a.createElement(sr.a,null,"Cost / Sample"),o.a.createElement(sr.a,null,"Total"))),o.a.createElement(cr.a,null,Object.keys(s).map((function(e){return o.a.createElement(pr.a,null,o.a.createElement(sr.a,{style:{textTransform:"capitalize"}},e.replace(/_/g," ")),o.a.createElement(sr.a,null,s[e]),o.a.createElement(sr.a,null,"sample_count"===e?"":ws.format((u-m(Object(d.a)({},s,Object(I.a)({},e,0))))/s.sample_count/(0===s[e]?1:s[e]))),o.a.createElement(sr.a,null,js.format((u-m(Object(d.a)({},s,Object(I.a)({},e,0))))/s.sample_count)),o.a.createElement(sr.a,null))})),o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Total Cost"),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null,js.format(u))),o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Time to Complete"),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null),o.a.createElement(sr.a,null,"1-3 days")))),o.a.createElement(ge.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:2,paddingTop:4},o.a.createElement(ge.a,null,"Credits: ",js.format(p)),o.a.createElement(ge.a,{flexGrow:1}),o.a.createElement(D.a,{onClick:function(){return n("labelhelp.apikey",null)},variant:"outlined"},"API Key"),o.a.createElement(D.a,{color:p<u?"primary":"none",style:{marginLeft:12},variant:"outlined",href:"https://labelhelp.universaldatatool.com#addcredits"},"Add Credits"),o.a.createElement(D.a,{onClick:Object(b.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),e.next=3,fetch("https://labelhelp.universaldatatool.com/api/submit",{method:"POST",body:JSON.stringify({dataset:O,price:u,api_key:t("labelhelp.apikey")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return y(e.toString()),null}));case 3:if(n=e.sent){e.next=7;break}return y("Empty response from server"),e.abrupt("return",null);case 7:j(Object(io.setIn)(O,["labelHelp"],{url:n.custom_id}));case 8:case"end":return e.stop()}}),e)}))),style:{marginLeft:12},variant:"outlined",color:p>=u?"primary":"none"},"Start Label Help"))):"running"===N?o.a.createElement(ge.a,null,C.loaded?o.a.createElement(lr.a,null,o.a.createElement(cr.a,null,o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Status"),o.a.createElement(sr.a,null,C.status)),o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Link"),o.a.createElement(sr.a,null,o.a.createElement(Os,{href:C.url},C.url))),o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Percent Complete"),o.a.createElement(sr.a,null,C.progress.toFixed(1),"%")),C.price&&o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Budget Used"),o.a.createElement(sr.a,null,"$",C.progress*C.price," / $75")))):o.a.createElement(ge.a,{padding:8,textAlign:"center"},o.a.createElement(_e.a,{size:100})),o.a.createElement(ge.a,{display:"flex",marginTop:2,justifyContent:"flex-end"},o.a.createElement(ge.a,{flexGrow:1}))):"completed"===N?o.a.createElement(ge.a,null,o.a.createElement(lr.a,null,o.a.createElement(cr.a,null,o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Percent Complete"),o.a.createElement(sr.a,null,"100%")),C.price&&o.a.createElement(pr.a,null,o.a.createElement(sr.a,null,"Total Cost"),o.a.createElement(sr.a,null,js.format(C.price))))),o.a.createElement(ge.a,{display:"flex",marginTop:2,justifyContent:"flex-end"},o.a.createElement(D.a,{variant:"outlined"},"Restart"))):null)},Ss=Object(a.createContext)({}),Is=function(e){var t=e.children,n=X(),r=n.fromConfig,i=n.setInConfig,l=Object(a.useState)(!1),c=Object(h.a)(l,2),s=c[0],u=c[1],m=Object(a.useState)(!1),p=Object(h.a)(m,2),d=p[0],f=p[1],v=Object(a.useState)(!1),E=Object(h.a)(v,2),y=E[0],x=E[1],O=Object(a.useState)(null),j=Object(h.a)(O,2),w=j[0],k=j[1],C=Object(a.useMemo)((function(){return{pricingConfig:d,myCredits:w,loadPricingConfig:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.next=5,fetch("https://labelhelp.universaldatatool.com/api/price").then((function(e){return e.json()}));case 5:t=e.sent,u(!1),f(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loadMyCredits:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(x(!0),t=r("labelhelp.apikey")){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch("https://labelhelp.universaldatatool.com/api/me",{headers:{apikey:t}});case 9:return n=e.sent,e.next=12,n.json();case 12:n=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(6),console.error(e.t0),x(!1),e.abrupt("return",Promise.reject(e.t0));case 20:n.status>=400&&i("labelhelp.apikey",null),k(n.credit),x(!1);case 23:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(){return e.apply(this,arguments)}}()}}),[d,s,r("labelhelp.apikey"),y,w,r,i]);return o.a.createElement(Ss.Provider,{value:C},t)},Ts=n(574),Ns=function(){return!Zr()&&!!window.location.search.includes("mode=labelonly")},Ds=function(e,t){var n=(e.interface||{}).fields||[];switch(t){case"sample_count":case"num_samples":return(e.samples||[]).length;case"number_of_fields":return Object.keys(e.interface.fields||{}).length;case"text_field_count":if("data_entry"===e.interface.type)return e.interface.surveyjs.questions.filter((function(e){return"text"===e.type})).length;if("composite"===e.interface.type)return n.filter((function(e){return"data_entry"===e.interface.type&&"text"===e.interface.surveyjs.questions[0].type})).length;throw new Error("Couldn't compute text_field_count for interface: "+e.interface.type);case"number_of_classifications":return e.interface.labels.length;default:throw new Error("Don't know how to compute \"".concat(t,'"'))}},As=function(){var e=Ns(),t=vs().dataset,n=Object(a.useContext)(Ss),o=n.pricingConfig,r=n.myCredits,i=n.remoteFile,l=n.loadPricingConfig,c=n.loadMyCredits,s=X().fromConfig,u=Boolean(s("labelhelp.disabled")),m=Boolean(s("labelhelp.apikey"));if(Object(a.useEffect)((function(){u||e||t&&(o||l())}),[o,e,u,l,t]),!t)return{labelHelpEnabled:!1,labelHelpError:"no active dataset"};if(u)return{labelHelpEnabled:!1,labelHelpError:"Disabled in config"};if(e)return{labelHelpEnabled:!1};if(!m&&t.samples.length<100)return{labelHelpEnabled:!1,labelHelpError:"Less than 100 samples"};if(!o)return{labelHelpEnabled:!1,labelHelpError:"No pricing config"};try{var p=o[t.interface.type]||{},d=p.formula,f=p.variables;if(!d)return{labelHelpEnabled:!1,labelHelpError:'No pricing formula for "'.concat(t.interface.type,'"')};for(var g={},b=0,h=Object.keys(f);b<h.length;b++){var v=h[b];g[v]=Ds(t,v)}var E=Object.keys(g),y=Object(Ts.a)(Function,Object(M.a)(E).concat(["return "+d])),x=function(e){return y.apply(void 0,Object(M.a)(E.map((function(t){return e[t]}))))},O=x(g);return{labelHelpEnabled:!0,myCredits:r,loadMyCredits:c,remoteFile:i,formula:d,variableDescriptions:f,variables:g,formulaFunc:x,totalCost:O,labelHelpAPIKey:s("labelhelp.apikey")}}catch(j){return{labelHelpEnabled:!1,labelHelpError:j.toString()}}},_s=Object(U.a)("div")({display:"flex",flexDirection:"column",alignItems:"center"}),Ls=function(){var e=X().fromConfig,t=Boolean(e("labelhelp.apikey"));return o.a.createElement(_s,null,t?o.a.createElement(zc,{key:"dialogcontent",style:{marginTop:48,width:"100%",maxWidth:800}},o.a.createElement(Cs,null)):o.a.createElement(fs,{key:"apikeyentry"}))},Ps=Object(U.a)("div")({fontSize:18,padding:32,textAlign:"center",color:Se.a[700],"& a":{color:u.a[500]}}),Us=function(){return o.a.createElement(Ps,null,"Hey, this isn't available yet, but if you'd like this functionality please let us know by leaving a thumbs up on"," ",o.a.createElement("a",{href:"https://github.com/UniversalDataTool/universal-data-tool/issues/148"},"this github issue"))},Rs=Object(U.a)("div")({padding:16,height:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box"}),Fs=function(e){var t=e.dataset,n=e.onChangeDataset,r=e.singleSampleDataset,i=e.onChangeSingleSampleDataset,l=e.selectedBrush,c=void 0===l?"complete":l,s=e.onClickSetup,u=e.onChangeSampleTimeToComplete,m=e.sampleTimeToComplete,p=Object(a.useState)("label"),f=Object(h.a)(p,2),g=f[0],b=f[1],v=Re(),E=As().labelHelpEnabled,y=Ns(),x=0;return t.samples&&t.samples.length>0&&(x=t.samples.map((function(e){return void 0!==e.annotation&&null!==e.annotation})).filter(Boolean).length/t.samples.length),r?o.a.createElement(Nc,null,o.a.createElement(jc,{datasetName:"Sample ".concat(r.sampleIndex),onSaveTaskOutputItem:function(e,a){var o=r.sampleIndex,l=Object(h.a)(r.samples,1)[0],s=t;s=Object(io.setIn)(s,["samples",o,"annotation"],a),l.brush===c||void 0===l.brush&&"complete"===c||(s=Object(io.setIn)(s,["samples",o,"brush"],c)),i(Object(io.setIn)(r,["samples",0,"annotation"],a)),n(s)},onExit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nothing";r.startTime&&u(Date.now()-r.startTime);var n=r.sampleIndex;switch(e){case"go-to-next":if(n!==t.samples.length-1)return v.capture("next_sample",{interface_type:t.interface.type}),void i(Object(d.a)({},t,{samples:[t.samples[n+1]],sampleIndex:n+1,startTime:Date.now()}));break;case"go-to-previous":if(0!==n)return void i(Object(d.a)({},t,{samples:[t.samples[n-1]],sampleIndex:n-1,startTime:Date.now()}))}i(null)},dataset:r,onClickSetup:s})):o.a.createElement(Rs,null,o.a.createElement(ge.a,{display:"flex"},o.a.createElement(ge.a,null,o.a.createElement(de.a,{value:g,onChange:function(e,t){return b(t)}},o.a.createElement(fe.a,{icon:o.a.createElement(xe.a,null),label:"Label",value:"label"}),!y&&o.a.createElement(fe.a,{icon:o.a.createElement(ss.a,null),label:"Active Learning",value:"activelearning"}),E&&o.a.createElement(fe.a,{icon:o.a.createElement(ls.a,null),label:"Label Help",value:"labelhelp"}))),o.a.createElement(ge.a,{flexGrow:1}),o.a.createElement(as,{stats:[{name:"Percent Complete",value:Math.floor(100*x)+"%"},{name:"Time per Sample",value:rs()(new Date(Date.now()-m)).toString(1,1)},{name:"Estimated Remaining",value:rs()(new Date(Date.now()-m*(1-x)*(t.samples||[]).length)).toString(1,2)}]})),o.a.createElement(ge.a,{flexGrow:1},"label"===g&&o.a.createElement(Ia,{count:(t.samples||[]).length,samples:t.samples||[],completed:(t.samples||[]).map((function(e){return Boolean(e.annotation)})),onClick:function(e){v.capture("open_sample",{interface_type:t.interface.type}),i(Object(d.a)({},t,{samples:[t.samples[e]],sampleIndex:e,startTime:Date.now()}))}}),"activelearning"===g&&o.a.createElement(Us,null),"labelhelp"===g&&o.a.createElement(Ls,null)))},Bs=n(176),Ms=(n(986),n(988),Object(E.a)({headerButton:{color:"#fff"},saveIcon:{marginRight:4},editIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"}})),zs=function(e){var t=e.file,n=(e.datasetName,e.dataset),r=(e.content,e.inSession),i=e.url,l=e.fileName,c=void 0===l?"unnamed":l,s=e.onChangeDataset,u=void 0===s?function(){return null}:s,m=e.onChangeFile,p=(e.onFileDrop,e.initialMode),f=void 0===p?"setup":p,g=e.authConfig,b=e.user,v=(e.recentItems,e.selectedBrush),E=Ns(),y=Object(a.useState)(c),x=Object(h.a)(y,2),O=x[0],j=x[1],w=Ms(),k=Yc().addToast,C=Object(a.useState)(E?"label":f),S=Object(h.a)(C,2),I=S[0],T=S[1],D=Object(a.useState)(),A=Object(h.a)(D,2),_=A[0],L=A[1],P=Object(a.useState)({}),U=Object(h.a)(P,2),R=U[0],F=U[1],B=Object(a.useState)(),z=Object(h.a)(B,2),H=z[0],W=z[1],q=(Ue()||{}).ipcRenderer,J=Re(),G=E?["Label"]:["Setup","Samples","Label"],K=function(){var e=Object(a.useReducer)((function(e,t){var n=e.samplesInWindow.slice(-10).concat([t]);return{timeToCompleteSample:n.reduce((function(e,t){return e+t}),0)/n.length,samplesInWindow:n}}),{timeToCompleteSample:0,samplesInWindow:[]}),t=Object(h.a)(e,2);return[t[0].timeToCompleteSample,t[1]]}(),X=Object(h.a)(K,2),Z=X[0],Y=X[1];Object(a.useEffect)((function(){if(q){var e=function(){return T("settings")},t=function(){return T("samples")},n=function(){return T("label")};return q.on("open-settings-page",e),q.on("open-samples-page",t),q.on("open-label-page",n),function(){q.removeListener("open-settings-page",e),q.removeListener("open-samples-page",t),q.removeListener("open-label-page",n)}}}),[q]),Object(a.useEffect)((function(){"json"===I&&W(JSON.stringify(n,null,"  ")),"label"!==I&&L(null),J.capture("open_editor_tab",{tab:I})}),[I,J,W,n]),Object(a.useEffect)((function(){if(H&&"json"===I)try{u(JSON.parse(H))}catch(e){}}),[H,I,u]);var Q=Object(dt.a)((function(e){return T(e.toLowerCase())})),$=Object(a.useMemo)((function(){return{switch_to_label:function(){return T("label")},switch_to_setup:function(){return T("setup")},switch_to_samples:function(){return T("samples")}}}),[T]),ee=V().keyMap;return o.a.createElement(Bs.HotKeys,{allowChanges:!0,handlers:$,keyMap:ee},o.a.createElement("div",{className:Oa()(w.container,"universaldatatool")},o.a.createElement(On,{title:r?o.a.createElement(N.a,{label:"Share Link",title:"share-link",value:i,variant:"outlined",size:"small"}):o.a.createElement(da,{label:"File Name",onChange:function(e){m(Object(io.setIn)(t,["fileName"],e)),j(e)},value:O||""}),onChangeTab:Q,currentTab:I,tabs:G}),o.a.createElement("div",{style:{height:"100%",overflowY:"scroll"}},"json"===I&&o.a.createElement(ma.a,{theme:"github",mode:"javascript",width:"100%",value:H||"",editorProps:{$blockScrolling:1/0},onChange:function(e){return W(e)}}),"setup"===I&&o.a.createElement(Gc,{onClickEditJSON:function(){return T("json")},dataset:n,onClearLabelData:function(){u(Object(io.setIn)(n,["samples"],n.samples.map((function(e){return Object(io.without)(e,"annotation")}))))},onChange:function(e){e.type!==n.interface.type&&"empty"!==n.interface.type&&n.samples.map((function(e){return e.annotation})).some(Boolean)?k("Changing label types can cause label data issues. You must clear all label data first.","error"):u(Object(d.a)({},n,{interface:e}))}}),"samples"===I&&o.a.createElement(_i,{file:t,dataset:n,openSampleLabelEditor:function(e){L(Object(d.a)({},n,{samples:[n.samples[e]],sampleIndex:e,annotationStartTime:Date.now()})),J.capture("open_sample",{interface_type:n.interface.type}),T("label")},openSampleInputEditor:function(e){F({open:!0,sampleIndex:e})},deleteSample:function(e){var t=Object(M.a)(n.samples);t.splice(e,1),u(Object(d.a)({},n,{samples:t}))},onChangeFile:function(e){m(e),j(e.fileName)},onChangeDataset:u,authConfig:g,user:b}),"label"===I&&o.a.createElement(Fs,{selectedBrush:v,dataset:n,sampleTimeToComplete:Z,onChangeSampleTimeToComplete:Y,onChangeDataset:u,singleSampleDataset:_,onChangeSingleSampleDataset:L,onClickSetup:function(){return T("setup")}})),o.a.createElement(Kc,Object.assign({},R,{sampleInput:void 0!==R.sampleIndex?n.samples[R.sampleIndex]:null,onClose:function(){F({open:!1})},onChange:function(e){u(Object(io.setIn)(n,["samples",R.sampleIndex],e))}}))))},Hs=n(577),Ws=n(299),qs=n.n(Ws),Vs=function(e){var t,n=[],a=Object(H.a)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value,r=o.userName,i=o.op,l=o.path;if(l.startsWith("/interface"))n.push({type:"warning",message:"".concat(r," changed the project settings")});else if(l.startsWith("/taskOutput")){var c=l.match(/\/samples\/([^/]+)/);n.push({type:"info",message:"".concat(r," changed sample ").concat(c[1])})}else n.push({message:"".concat(r," did a ").concat(i," at ").concat(l),type:"info"})}}catch(wu){a.e(wu)}finally{a.f()}return n},Js=lo.a.setIn,Gs=lo.a.getIn,Ks=lo.a.updateIn,Xs=lo.a.without;function Zs(e,t){return e.concat([t])}function Ys(e,t){if(0===t.length)return Xs(e,t[0]);var n=t.slice(0,-1),a=t[t.length-1],o=Gs(e,n);if(Array.isArray(o)){var r=parseInt(a);return Js(e,n,[].concat(Object(M.a)(o.slice(0,r)),Object(M.a)(o.slice(r+1))))}return Js(e,n,Xs(o,a))}var Qs=function(e,t){var n,a=Object(H.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,r=o.op,i=o.path;if(0===(i=i.split("/").filter(Boolean)).length){if("replace"===r){e=o.value;continue}throw new Error("Operation on root object not supported")}switch(r){case"replace":e=Js(e,i,o.value);continue;case"copy":e=Js(e,i,Gs(e,o.from.split("/")));continue;case"add":if(isNaN(parseInt(i.slice(-1)[0])))e=Array.isArray(Gs(e,i))?Ks(e,i,Zs,o.value):Js(e,i,o.value);else e=Js(e,i,o.value);continue;case"move":var l=o.from.split("/");e=Ys(e=Js(e,i,Gs(e,l)),l);continue;case"remove":e=Ys(e,i);continue;default:return e}}}catch(wu){a.e(wu)}finally{a.f()}return e},$s=n(996),eu=function(e){return function(e){var t,n=0;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}($s(e))},tu=new(function(){function e(t){var n=t.serverUrl,a=t.userName;Object(Y.a)(this,e),this.serverUrl="http://localhost:6003",this.getJSON=function(e,t,n){},this.postJSON=function(e,t,n){},this.patchJSON=function(e,t,n){},this.userName="anonymous",this.sessionId=null,this.state=null,this.version=null,this.serverUrl=n,this.getJSON=qs()("json","GET",n),this.postJSON=qs()("json","POST",n),this.patchJSON=qs()("json","PATCH",n),this.userName=a||"anonymous_".concat(Math.random().toString(36).slice(2,6))}return Object(wc.a)(e,[{key:"createSession",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.postJSON("/api/session",{udt:t});case 2:n=e.sent,this.state=t,this.sessionId=n.short_id,this.version=n.version;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestState",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getJSON("/api/session/".concat(encodeURIComponent(this.sessionId)));case 3:return t=e.sent,e.abrupt("return",{state:t.udt_json,version:t.version});case 7:throw e.prev=7,e.t0=e.catch(0),new Error('error getting session "'.concat(this.sessionId,'": ').concat(e.t0.toString()));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateToLatestState",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLatestState();case 2:t=e.sent,n=t.state,a=t.version,this.state=n,this.version=a;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinSession",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sessionId=t,e.next=3,this.updateToLatestState();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyLatestPatches",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,a,o,r,i,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getJSON("/api/session/".concat(encodeURIComponent(this.sessionId),"/diffs?since=").concat(this.version));case 2:if(t=e.sent,n=t.patch,a=t.hashOfLatestState,o=t.latestVersion,r=t.changeLog,0!==n.length&&o!==this.version){e.next=9;break}return e.abrupt("return",null);case 9:if(i=Vs(r),l=Qs(this.state,n),eu(l)===a){e.next=16;break}return console.error("new state with patches applied didn't match latest state"),e.next=15,this.updateToLatestState();case 15:return e.abrupt("return",{patch:n,changeLog:i});case 16:return this.state=l,this.version=o,e.abrupt("return",{patch:n,changeLog:i});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendPatchIfChanged",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,o,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=Hs.createPatch(this.state,t)).length){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,this.patchJSON("/api/session/".concat(encodeURIComponent(this.sessionId)),{patch:n,userName:this.userName});case 5:if(a=e.sent,o=a.hashOfLatestState,r=a.latestVersion,eu(t)===o){e.next=13;break}return console.error("after patch, hashes were not equal! getting latest version from server..."),e.next=12,this.updateToLatestState();case 12:return e.abrupt("return",this);case 13:return this.state=t,this.version=r,e.abrupt("return",this);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({serverUrl:window.localStorage.CUSTOM_COLLABORATION_SERVER||"https://udt-collaboration-server.now.sh"}),nu=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tu.createSession(t.content);case 2:return e.abrupt("return",{fileName:t.fileName,id:t.id,sessionId:tu.sessionId,url:"".concat(window.location.origin,"?s=").concat(tu.sessionId),content:t.content,mode:"server"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),au=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tu.joinSession(t);case 2:return e.abrupt("return",{state:tu.state,version:tu.version});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ou=n(343),ru=function(e){var t,n=function(e){a.add(e)},a=new Set,o=Object(H.a)(e.samples);try{for(o.s();!(t=o.n()).done;){var r=t.value;Object.keys(Object(ou.flatten)(r)).forEach((function(e){return n(e)}))}}catch(wu){o.e(wu)}finally{o.f()}(a=Array.from(a).sort((function(e,t){return e.split(".").length-t.split(".").length}))).some((function(e){return e.includes("output.keyframes")}))&&(a=a.filter((function(e){return e.includes("output.keyframes")}))).push("output.keyframes");var i={rows:["interface"].concat(Object(M.a)(ya()(e.samples.length).map((function(e){return"samples.".concat(e)})))),columns:["."].concat(Object(M.a)(a))};return Jo.a.toCSV(e,i)},iu={saveFile:function(){return null}},lu=Re(),cu=["video_segmentation","image_classification","image_segmentation","text_entity_recognition","text_classification","audio_transcription","composite","data_entry"],su=function(e){var t=e.file,n=(e.setFile,ae()),o=n.isLoggedIn,r=n.authProvider,i=n.authConfig,l=Object(a.useRef)([]),c=Object(a.useCallback)((function(){if(o&&"cognito"===r){var e=bo(l.current,t);return!(P()(t)||!e.content.samples&&!e.fileName||!cu.includes(t.content.interface.authProvider)||"unnamed"===t.fileName)}}),[t,o,r]);Object(a.useEffect)((function(){o&&"cognito"===r&&(P()(i)||(c()&&function(e){function t(e){return n.apply(this,arguments)}function n(){return(n=Object(b.a)(g.a.mark((function e(t){var n,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/",void 0!==so(t)&&(a="https://cors-anywhere.herokuapp.com/"+so(t)),e.next=4,fetch(a,{method:"GET",headers:{"X-Requested-With":"xmlhttprequest"}}).catch((function(e){console.log("Looks like there was a problem: \n",e)}));case 4:return n=e.sent,e.next=7,n.blob();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(function(e){return"undefined"!==e&&"undefined"!==e.fileName}(e)){var a=e.content;e=Object(io.setIn)(e,["content"],Object(io.setIn)(a,["samples"],po(a)));var o=JSON.stringify(e);!function(e){ao.a.put("".concat(e.fileName,"/"),null,{level:"private"}).catch((function(e){return console.log(e)}))}(e),function(e,t){ao.a.put("".concat(e.fileName,"/annotations/annotations.json"),t,{level:"private"}).catch((function(e){return console.log(e)}))}(e,o),function(e){P()(e.content.samples)||e.content.samples.forEach(function(){var n=Object(b.a)(g.a.mark((function n(a){var o,r,i;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,P()(so(a))){n.next=7;break}return n.next=4,t(a);case 4:o=n.sent,n.next=8;break;case 7:P()(a.document)||(o=a.document);case 8:r=P()(a.sampleName)?co(a):a.sampleName,i="".concat(e.fileName,"/data/").concat(r),ao.a.put(i,o,{level:"private"}).catch((function(e){return console.log(e)})),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}())}(e)}}(t),l.current=t))}),[c,i,t,o,r])},uu=function(){var e,t=Object(a.useState)(),n=Object(h.a)(t,2),o=n[0],r=n[1],i=Yc().addToast,l=function(e,t){if(!Zr())return iu;var n=Yc().addToast,o=Ue().remote,r=Object(dt.a)((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.saveAs,i=void 0!==r&&r;function l(){return c.apply(this,arguments)}function c(){return(c=Object(b.a)(g.a.mark((function a(){var r,l,c,s;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.filePath,e.filePath&&!i){a.next=12;break}return a.next=4,o.dialog.showSaveDialog({filters:[{name:".udt.json",extensions:["udt.json"]},{name:".udt.csv",extensions:["udt.csv"]}]});case 4:if(l=a.sent,c=l.cancelled,s=l.filePath,r=!s||s.endsWith(".json")||s.endsWith(".csv")?s:"".concat(s,".udt.json"),!c&&r){a.next=11;break}return n("Could not save"),a.abrupt("return");case 11:t(Object(d.a)({},e,{filePath:r,fileName:r.split("/").slice(-1)[0]}));case 12:return a.next=14,o.require("fs").promises.writeFile(r,r.endsWith(".csv")?ru(e.content):JSON.stringify(e.content,null,"  "));case 14:n("File Saved!");case 15:case"end":return a.stop()}}),a)})))).apply(this,arguments)}e&&l()}));return Object(a.useEffect)((function(){e&&e.filePath&&e.fileName!==e.filePath.split("/").slice(-1)[0]&&t(Object(io.setIn)(e,["filePath"],e.filePath.split("/").slice(0,-1).concat([e.fileName+(e.fileName.endsWith(".json")?"":".dataset.json")]).join("/")))}),[e,t]),{saveFile:r}}(o,r).saveFile,c=function(e,t){var n=Object(z.a)("recentItems",[]),o=Object(h.a)(n,2),r=o[0],i=o[1];return r||(r=[]),Object(a.useEffect)((function(){e&&"unnamed"!==e.fileName&&(r.map((function(e){return e.id})).includes(e.id)?i(r.map((function(t){return t.id===e.id?e:t}))):i([e].concat(r).slice(0,3)))}),[e,i]),{recentItems:r,changeRecentItems:i}}(o),s=c.recentItems,u=c.changeRecentItems;!function(e,t){var n=window.localStorage.userName;Object(a.useEffect)((function(){if(n&&!n.includes("anonymous"))try{tu.userName=JSON.parse(window.localStorage.userName)}catch(e){}}),[n]),Object(a.useEffect)((function(){if(e&&"server"===e.mode&&e.sessionId===tu.sessionId){var n=function(){var o=Object(b.a)(g.a.mark((function o(){return g.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,tu.applyLatestPatches();case 2:if(o.sent&&t(Object(io.setIn)(e,["content"],tu.state)),a){o.next=6;break}return o.abrupt("return");case 6:a=setTimeout(n,500);case 7:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),a=setTimeout(n,500);return function(){clearTimeout(a),a=null}}}),[e,t]),Object(a.useEffect)((function(){e&&"server"===e.mode&&tu.sendPatchIfChanged(e.content)}),[e])}(o,r),su({file:o,setFile:r}),e=o&&o.content,Object(a.useEffect)((function(){e&&e.interface&&(lu.capture("interface_type",{interface_type:e.interface.type}),lu.people.set({last_used_interface_type:e.interface.type}))}),[e]),Object(a.useEffect)((function(){e&&e.samples&&lu.capture("dataset_size",{dataset_size:(e.samples||[]).length})}),[e]),Object(a.useEffect)((function(){if(e&&e.samples){var t=(e.samples||[]).filter((function(e){return e.annotation})).length;lu.capture("sample_completion",{dataset_size:(e.samples||[]).length,samples_completed:t,percent_completed:t/(e.samples||[]).length})}}),[e]);var m=Object(dt.a)((function(e){var t=e.name,n=e.path;function a(e){try{var a;a=t.endsWith("csv")?ar(e):JSON.parse(e),r({fileName:t,filePath:n,mode:n?"filesystem":"local-storage",content:a,id:n})}catch(o){console.log(o.toString()),i("Couldn't read file, see console for details","error")}}if(e.content)a(e.content);else{var o=new FileReader;o.onload=function(e){a(e.target.result)},o.readAsText(e)}})),p=Object(dt.a)(function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=decodeURIComponent(t.match(/[?&]s=([^&]+)/)[1]),a=t.includes("mode=labelonly"),n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,au(n);case 6:if(o=e.sent,i=o.state){e.next=10;break}return e.abrupt("return");case 10:window.history.replaceState({},window.document.title,"/?s=".concat(encodeURIComponent(n)).concat(a?"&mode=labelonly":"")),r({url:t,sessionId:n,mode:"server",id:n,content:i});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(a.useEffect)((function(){o&&"server"!==o.mode&&window.history.replaceState({},window.document.title,"/")}),[o]),Object(a.useEffect)((function(){window.location.search.match(/[?&]s=([a-zA-Z0-9]+)/)&&p(window.location.href)}),[p]);var f=Object(dt.a)(Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(o);case 2:t=e.sent,r(t),window.history.replaceState({},window.document.title,"/?s=".concat(encodeURIComponent(t.sessionId)));case 5:case"end":return e.stop()}}),e)}))));return Object(a.useMemo)((function(){return{file:o,setFile:r,openFile:m,openUrl:p,makeSession:f,saveFile:l,recentItems:s,changeRecentItems:u}}),[o,r,m,l,f,s,u,p])},mu=n(362),pu=n.n(mu),du=n(579),fu=n(578),gu=n.n(fu),bu=Object(U.a)("div")({width:"100vw",minHeight:"100vh",backgroundColor:Se.a[900],padding:32,"& .title":{color:Se.a[200],fontSize:24,fontWeight:"bold"},"& .subtitle":{color:Se.a[300],fontSize:18,marginTop:8},"& .info":{width:"100%",boxSizing:"border-box",padding:32,"& textarea":{width:"calc(100% - 64px)",boxSizing:"border-box",minHeight:300,fontSize:12}}}),hu=Object(U.a)("div")({padding:8}),vu=Object(U.a)(D.a)({color:"#fff",borderColor:"rgba(255,255,255,0.5)",margin:8}),Eu=function(e){Object(kc.a)(n,e);var t=Object(Cc.a)(n);function n(e){var a;return Object(Y.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(wc.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this;Tc.withScope((function(a){a.setExtras(t);var o=Tc.captureException(e);n.setState({eventId:o})}))}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(bu,null,o.a.createElement("div",{className:"title"},"An error has occurred"),o.a.createElement("div",{className:"subtitle"},"All the details are below:"),o.a.createElement("div",{className:"info"},o.a.createElement("textarea",null,this.state.errorDetails)),o.a.createElement(hu,null,o.a.createElement(vu,{variant:"outlined",target:"_blank",href:"https://github.com/Universal/universal-data-tool/issues"},o.a.createElement(gu.a,{style:{color:"#fff",marginRight:8}})," View Issues on Github"),o.a.createElement(vu,{variant:"outlined",onClick:function(){return window.location.reload()}},"Reload (unsaved progress will be lost)"))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorDetails:JSON.stringify(Object(du.a)())+"\n\n"+e.stack}}}]),n}(o.a.Component);function yu(e){var t="It looks like you have been editing something. If you leave before saving, your changes will be lost.";return(e||window.event).returnValue=t,t}var xu=function(){var e=uu(),t=e.file,n=e.setFile,r=e.openFile,i=e.openUrl,l=e.makeSession,c=e.recentItems,s=e.changeRecentItems;!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(a.useEffect)((function(){if(e&&!window.location.origin.includes("localhost"))return window.addEventListener("beforeunload",yu),function(){window.removeEventListener("beforeunload",yu)}}),[e])}(Boolean(t));var u=Kn(),m=Object(h.a)(u,1)[0],p=Object(a.useState)("complete"),f=Object(h.a)(p,2),v=f[0],E=f[1],y=Object(dt.a)((function(e){n({fileName:"unnamed",content:e.dataset,id:Math.random().toString().split(".")[1],mode:"local-storage"})})),x=Object(dt.a)((function(e){return n(e)})),O=Object(dt.a)((function(){return n(null)})),j=Object(dt.a)((function(e){if(t){var n=(t.sessionId||t.fileName)+".udt."+e;"json"===e?pu()(JSON.stringify(t.content),n):"csv"===e&&pu()(ru(t.content),n)}})),w=t&&"server"===t.mode,k=Object(a.useState)(!1),C=Object(h.a)(k,2),S=C[0],I=C[1],T=Object(a.useCallback)(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),N=Object(dt.a)((function(){return n(Object(d.a)({},t,{mode:"local-storage",fileName:t.fileName||"copy_of_".concat(t.id)}))})),D=Object(dt.a)((function(e){n(Object(io.setIn)(t,["content"],e))}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(Es.Provider,{value:{file:t,setFile:n}},o.a.createElement(yn.Provider,{value:{title:t?"local-storage"===t.mode?t.fileName:t.url:"unnamed",recentItems:c,changeRecentItems:s,onClickTemplate:y,onClickHome:O,onOpenFile:r,onOpenRecentItem:x,inSession:w,sessionBoxOpen:S,changeSessionBoxOpen:I,onJoinSession:T,onLeaveSession:N,onCreateSession:l,fileOpen:Boolean(t),onDownload:j,onChangeSelectedBrush:E,selectedBrush:v,isWelcomePage:!t}},t?o.a.createElement(Eu,null,o.a.createElement(zs,Object.assign({file:t,key:t.id},t,{selectedBrush:v,inSession:w,dataset:t.content,onChangeDataset:D,onChangeFile:n,authConfig:!0,recentItems:c}))):o.a.createElement(sa,{onFileDrop:r,onOpenTemplate:y,recentItems:c,onOpenRecentItem:x,onClickOpenSession:function(){return I(!0)}}))),o.a.createElement(Gn,{errors:m}))},Ou=function(){var e,t=uu(),n=t.file,r=t.setFile,i=t.openFile,l=t.openUrl,c=t.makeSession,s=t.saveFile,u=t.recentItems,m=Object(a.useState)("complete"),p=Object(h.a)(m,2),f=p[0],v=p[1],E=Kn(),y=Object(h.a)(E,1)[0],x=Ue(),O=x.remote,j=x.ipcRenderer,w=Object(dt.a)((function(e){r({fileName:"unnamed",content:e.dataset,id:Math.random().toString().split(".")[1],mode:"filesystem"})})),k=Object(dt.a)((function(e){return r(e)})),C=Object(dt.a)((function(){return r(null)}));Object(a.useEffect)((function(){var e=function(){return r(null)},t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.templateName;w(dn.find((function(e){return e.name===n}))||dn[0])},a=function(){return s({saveAs:!0})},o=function(){var e=Object(b.a)(g.a.mark((function e(){var t,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O.dialog.showSaveDialog({filters:[{name:".udt.csv",extensions:["udt.csv"]}]});case 4:if(t=e.sent,a=t.cancelled,o=t.filePath,!a){e.next=9;break}return e.abrupt("return");case 9:return o=!o||o.endsWith(".csv")?o:"".concat(o,".udt.csv"),e.next=12,O.require("fs").promises.writeFile(o,ru(n.content));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e,t){return i(t)};return j.on("open-welcome-page",e),j.on("new-file",t),j.on("open-file",l),j.on("save-file",s),j.on("save-file-as",a),j.on("export-to-csv",o),function(){j.removeListener("open-welcome-page",e),j.removeListener("new-file",t),j.removeListener("open-file",l),j.removeListener("save-file",s),j.removeListener("save-file-as",a),j.removeListener("export-to-csv",o)}}),[n,r,j,i,w,O,s]);var S=n&&"server"===n.mode,I=Object(a.useState)(!1),T=Object(h.a)(I,2),N=T[0],D=T[1],A=Object(dt.a)(function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(dt.a)((function(){return r(Object(d.a)({},n,{mode:"local-storage",fileName:n.fileName||"copy_of_".concat(n.id)}))})),L=((null===n||void 0===n||null===(e=n.content)||void 0===e?void 0:e.samples)||[]).some((function(e){return[e.imageUrl,e.videoUrl,e.pdfUrl].filter(Boolean).map((function(e){return e.includes("file://")})).some(Boolean)}))?"Some URLs (links) in this file are connected to files on your computer. Use the Samples > Transform > Transform Files to Web URLs to upload these files, then collaboration will be available.":null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(yn.Provider,{value:{recentItems:u,onClickTemplate:w,onClickHome:C,title:n?"server"!==n.mode?n.fileName:n.url:"unnamed",fileOpen:Boolean(n),onOpenRecentItem:k,isDesktop:!0,onOpenFile:i,selectedBrush:f,onChangeSelectedBrush:v,inSession:S,sessionBoxOpen:N,changeSessionBoxOpen:D,collaborateError:L,onJoinSession:A,onLeaveSession:_,onCreateSession:c,isWelcomePage:!n}},n?o.a.createElement(zs,Object.assign({key:n.id},n,{inSession:S,selectedBrush:f,dataset:n.content,onChangeFileName:function(e){r(Object(io.setIn)(n,["fileName"],e))},onChangeDataset:function(e){r(Object(io.setIn)(n,["content"],e))}})):o.a.createElement(sa,{showDownloadLink:!1,onFileDrop:i,onOpenTemplate:w,recentItems:u,onOpenRecentItem:k})),o.a.createElement(Gn,{errors:y}))},ju=(n(1e3),function(){var e=Ue();return o.a.createElement(p,null,o.a.createElement(Z,null,o.a.createElement(te,null,o.a.createElement(Is,null,o.a.createElement(Qc,null,o.a.createElement(J,null,Boolean(e)?o.a.createElement(Ou,null):o.a.createElement(xu,null)))))))});i.a.render(o.a.createElement(ju,null),document.getElementById("root"))},273:function(e){e.exports=JSON.parse('{"name":"universal-data-tool","version":"0.10.21","license":"MIT","main":"desktop/main.js","homepage":"https://universaldatatool.com","scripts":{"start":"cross-env PORT=6001 react-scripts start","build":"npm run build:web","build:all":"npm run build:babel && npm run build:vanilla && npm run build:desktop","build:lib":"npm run build:babel && npm run build:vanilla","build:babel":"cross-env NODE_ENV=production babel ./src --out-dir=./lib && cp ./package.json ./lib/package.json && node ./lib/lib/fix-deps.js","build:vanilla":"parcel build -d ./lib -o vanilla.js ./src/vanilla/index.js","build:vanilla:dev":"parcel ./src/vanilla/index.js","build:web":"react-scripts build","build:desktop":"cross-env REACT_APP_DESKTOP=true PUBLIC_URL=./ react-scripts build && electron-builder build && cp ./desktop/entitlements.mac.plist ./build/entitlements.mac.plist","start:desktop":"cross-env BROWSER=none USE_DEV_SERVER=yes concurrently \'npm run start\' \'electron ./desktop\'","start:desktop:build":"electron ./desktop","postinstall:desktop":"electron-builder install-app-deps","release:lib":"npm run build && cd lib && npm publish","release:desktop":"npm run build:desktop && cross-env EP_RELEASE=true electron-builder --linux --publish always","release:all":"npm run release:desktop && npm run release:lib","test":"ava **/*.test.js","storybook":"start-storybook -p 6002 -s public","build-storybook":"build-storybook -s public","gh-pages":"npm run build:web && npm run build:vanilla && cp lib/vanilla.js build/vanilla.js && cp ./CNAME ./build/CNAME && gh-pages -d build","prettier":"prettier --write \\"src/**/*.js\\"","test:prettier":"prettier --check \\"src/**/*.js\\"","test:lint":"npx eslint src","test:integration:dev":"./node_modules/cypress/bin/cypress open","test:integration":"./node_modules/cypress/bin/cypress run --env failOnSnapshotDiff=false"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@babel/cli":"^7.5.0","@babel/core":"^7.5.4","@babel/plugin-proposal-optional-chaining":"^7.10.1","@material-ui/core":"^4.9.5","@material-ui/icons":"^4.9.1","@storybook/addon-actions":"^5.3.19","@storybook/addon-links":"^5.3.19","@storybook/addons":"^5.3.19","@storybook/react":"^5.3.19","@testing-library/react-hooks":"^3.2.1","ava":"^3.7.0","chroma-js":"^2.0.4","concurrently":"^5.2.0","cross-env":"^7.0.0","cypress":"^4.4.0","cypress-file-upload":"^4.0.6","cypress-image-snapshot":"^3.1.1","electron":"^8.0.0","electron-builder":"^22.3.2","electron-builder-notarize":"^1.1.2","gh-pages":"^2.1.1","material-survey":"^1.0.32","parcel":"^1.12.4","prettier":"2.0.2","react":"^16.8.6","react-dom":"^16.8.6","react-markdown":"^4.1.0","react-nlp-annotate":"^0.1.22","spelling":"^2.0.1"},"dependencies":{"@material-ui/styles":"^4.9.0","@semantic-release/git":"^9.0.0","@sentry/browser":"^5.15.4","any-shell-escape":"^0.1.1","aws-amplify":"^3.0.6","axios":"^0.19.2","bent":"^7.1.0","brace":"^0.11.1","detect-browser":"^5.0.0","download-file":"^0.1.5","duration":"^0.2.2","fast-json-patch":"^3.0.0-1","ffmpeg-static":"^4.2.4","form-data":"^3.0.0","in-browser-download":"^2.0.0","jac-format":"^1.1.3","js-md5":"^0.7.3","moment":"^2.24.0","nan":"^2.14.1","posthog-js":"^1.0.4","react-ace":"^7.0.4","react-data-table-component":"^6.2.2","react-dropzone":"^10.1.8","react-github-btn":"^1.2.0","react-hotkeys":"^2.0.0","react-icons":"^3.9.0","react-image-annotate":"^1.2.1","react-scripts":"^3.4.1","react-select":"^3.0.8","rfc6902":"^3.0.4","seamless-immutable":"^7.1.4","seed-random":"^2.2.0","seedrandom":"^3.0.5","styled-components":"^5.0.0","udt-format":"0.0.1","use-event-callback":"^0.1.0","wavesurfer.js":"^3.3.3","ytdl-core":"^2.0.1"},"build":{"appId":"com.universaldatatool","productName":"Universal Data Tool","afterSign":"electron-builder-notarize","mac":{"category":"public.app-category.developer-tools","hardenedRuntime":true},"dmg":{"icon":false},"linux":{"target":["AppImage"],"category":"Development"},"extends":null,"files":["**/*","build/"],"publish":{"provider":"github","releaseType":"release"}},"ava":{"nodeArguments":["--experimental-modules"]}}')},614:function(e,t,n){e.exports=n(1001)},619:function(e,t,n){}},[[614,1,2]]]);
//# sourceMappingURL=main.b4ae1757.chunk.js.map