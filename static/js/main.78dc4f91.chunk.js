(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{304:function(e,t,n){e.exports=n(539)},309:function(e,t,n){},539:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),c=n(574),l=n(243),s=n.n(l),u=n(244),m=n.n(u),p=n(194),d=(n(309),Object(c.a)({container:{fontFamily:'"Inter", sans-serif'}})),f=s()({typography:{fontFamily:'"Inter", "Roboto", sans-serif'},overrides:{MuiButton:{root:{textTransform:"none"}}}}),g=function(e){var t=e.children,n=d();return r.a.createElement(m.a,{theme:f},r.a.createElement(p.a,{theme:f},r.a.createElement("div",{className:n.container},t)))},b=n(63),O=n(19),h=n(575),E=n(576),v=n(544),y=n(174),k=n.n(y),j=n(246),x=n.n(j),w=n(78),S=n(592),C=n(142),N=n.n(C),D=n(247),I=n.n(D),P=n(578),T=n(579),B=n(195),F=n(580),L=n(581),A=n(87),M=n(136);var _=function(e){return r.a.createElement(M.a,e,r.a.createElement("path",{d:"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z"}))},H=n(137),R=n.n(H),U=n(138),J=n.n(U),q=n(92),W=n.n(q),z=n(139),G=n.n(z),V=n(245),Y=n.n(V),X=[{name:"Computer Vision",Icon:R.a,oha:{interface:{type:"image_segmentation",availableLabels:["valid","invalid"],regionTypesAllowed:["bounding-box","polygon","full-segmentation","point","pixel-mask"]},taskData:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}},{name:"Data Entry",Icon:W.a,oha:{interface:{type:"data_entry",description:"# Markdown description here",surveyjs:{questions:[{type:"text",name:"document_title",title:"Title of Document"}]}},taskData:[{pdfUrl:"https://arxiv.org/pdf/1906.01969.pdf"},{pdfUrl:"https://arxiv.org/pdf/1908.07069.pdf"}]}},{name:"Natural Language",Icon:J.a,oha:{interface:{type:"text_entity_recognition",overlapAllowed:!1,labels:[{id:"food",displayName:"Food",description:"Edible item."},{id:"hat",displayName:"Hat",description:"Something worn on the head."}]},taskData:[{document:"This strainer makes a great hat, I'll wear it while I serve spaghetti!"}]}},{name:"Audio Transcription",Icon:G.a,oha:{interface:{type:"audio_transcription",description:"# Markdown description here"},taskData:[{audioUrl:"https://html5tutorial.info/media/vincent.mp3"}]}},{name:"Composite",Icon:Y.a,oha:{description:"# Markdown description here",interface:{type:"composite",fields:[{fieldName:"textInfo",interface:{type:"data_entry",surveyjs:{questions:[{type:"text",name:"group_letter",title:"Letter of Group"}]}}},{fieldName:"segmentation",interface:{type:"image_segmentation",availableLabels:["group text"],regionTypesAllowed:["bounding-box"]}}]},taskData:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}}],$=n(153),K=Object(c.a)({headerButton:{color:"#fff"},grow:{flexGrow:1},list:{width:300}}),Q=Object(a.createContext)({recentItems:[]}),Z=function(e){var t=e.additionalButtons,n=void 0===t?[]:t,o=e.title,i=void 0===o?"Universal Data Tool - Welcome!":o,c=K(),l=Object(a.useState)(!1),s=Object(O.a)(l,2),u=s[0],m=s[1],p=Object(a.useContext)(Q),d=p.recentItems,f=p.onClickTemplate,g=p.onClickHome,b=p.onOpenFile,y=p.onOpenRecentItem;d||(d=[]);var j=Object(a.useCallback)(function(e){b(e[0])},[]),C=Object($.a)({onDrop:j}),D=C.getRootProps,M=C.getInputProps;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(v.a,{onClick:function(){return m(!0)},className:c.headerButton},r.a.createElement(k.a,null)),r.a.createElement(w.a,{className:c.title,variant:"h6",noWrap:!0},i),r.a.createElement("div",{className:c.grow}),n,r.a.createElement(v.a,{href:"https://github.com/openhumanannotation/universal-data-tool",className:c.headerButton},r.a.createElement(_,null)))),r.a.createElement(S.a,{open:u,onClose:function(){return m(!1)}},r.a.createElement(P.a,{className:c.list},r.a.createElement(T.a,{onClick:g,button:!0},r.a.createElement(F.a,null,r.a.createElement(x.a,null)),r.a.createElement(B.a,null,"Home")),r.a.createElement(T.a,Object.assign({},D(),{button:!0}),r.a.createElement(F.a,null,r.a.createElement(I.a,null)),r.a.createElement(B.a,null,"Open File"),r.a.createElement("input",M())),r.a.createElement(L.a,null,"Recent Files"),0===d.length?r.a.createElement(T.a,null,r.a.createElement(B.a,{style:{textAlign:"center",color:A.a[500]}},"No Recent Items")):d.map(function(e){return r.a.createElement(T.a,{key:e.fileName,button:!0,onClick:function(){y(e)}},r.a.createElement(F.a,null,r.a.createElement(N.a,null)),r.a.createElement(B.a,null,e.fileName))}),r.a.createElement(L.a,null,"Create From Template"),X.map(function(e){return r.a.createElement(T.a,{key:e.name,button:!0,onClick:function(){return f(e)}},r.a.createElement(F.a,null,r.a.createElement(e.Icon,null)),r.a.createElement(B.a,null,e.name))}),r.a.createElement(L.a,null,"Explore More"),r.a.createElement(T.a,{button:!0,onClick:function(){window.location.href="https://github.com/OpenHumanAnnotation/universal-data-tool/releases"}},r.a.createElement(F.a,null,r.a.createElement(_,null)),r.a.createElement(B.a,null,"Github")))))},ee=n(586),te=n(196),ne=n(143),ae=n.n(ne),re=n(582),oe=n(583),ie=n(584),ce=n(585),le=Object(c.a)({bigButton:{padding:10,width:150,height:120,border:"1px solid #ccc",margin:10},bigIcon:{width:48,height:48}}),se=function(e){var t=e.open,n=e.onClose,a=e.onSelect,o=le();return r.a.createElement(re.a,{open:t,onClose:n},r.a.createElement(oe.a,null,"Create from Template"),r.a.createElement(ie.a,null,X.map(function(e){return r.a.createElement(te.a,{onClick:function(){return a(e)},className:o.bigButton},r.a.createElement("div",null,r.a.createElement("div",null,e.name),r.a.createElement("div",null,r.a.createElement(e.Icon,{className:o.bigIcon}))))})),r.a.createElement(ce.a,null,r.a.createElement(te.a,{onClick:function(){return n()}},"Close")))},ue=Object(c.a)({title:{},contentTitle:{paddingTop:50,paddingLeft:20,paddingRight:20,textAlign:"center"},contentSubtitle:{textAlign:"center",wordWrap:"normal",paddingLeft:40,paddingRight:40,padding:30},bigButton:{width:240,fontSize:24,margin:20,border:"1px dashed ".concat(A.a[500])},bigButtonContent:{display:"flex",lineHeight:1.5,height:160,paddingTop:20,paddingBottom:20,flexDirection:"column",alignItems:"center",justifyContent:"center"},bigIcon:{margin:20,width:64,height:64},grow:{flexGrow:1},content:{display:"flex",justifyContent:"center",flexWrap:"wrap"},headerButton:{color:"#fff"}}),me=function(e){var t=e.onFileDrop,n=e.onOpenTemplate,o=ue(),i=Object(a.useState)(!1),c=Object(O.a)(i,2),l=c[0],s=c[1],u=Object(a.useMemo)(function(){return function(e){t(e[0])}},[t]),m=Object($.a)({onDrop:u}),p=m.getRootProps,d=m.getInputProps,f=m.isDragActive;return r.a.createElement("div",null,r.a.createElement(se,{open:l,onSelect:function(e){return n(e)},onClose:function(){return s(!1)}}),r.a.createElement(Z,{additionalButtons:[r.a.createElement(te.a,{href:"https://github.com/OpenHumanAnnotation/universal-data-tool/releases",className:o.headerButton},"Download Universal Data Tool")]}),r.a.createElement(ee.a,{container:!0},r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(w.a,{className:o.contentTitle,variant:"h3",noWrap:!0},"Universal Data Tool")),r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(w.a,{className:o.contentSubtitle,variant:"h5"},"Annotate data for Computer Vision, Natural Language Processing, Data Entry and More.")),r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement("div",{className:o.content},r.a.createElement(te.a,Object.assign({},p(),{className:o.bigButton}),r.a.createElement("div",{className:o.bigButtonContent},r.a.createElement("div",null,f?"Drop File Here":"Open File"),r.a.createElement(N.a,{className:o.bigIcon}),r.a.createElement("input",d()))),r.a.createElement(te.a,{onClick:function(){s(!0)},className:o.bigButton},r.a.createElement("div",{className:o.bigButtonContent},r.a.createElement("div",null,"Create from Template"),r.a.createElement(ae.a,{className:o.bigIcon})))))))},pe=(n(161),n(248)),de=n.n(pe),fe=n(62),ge=n.n(fe),be='\n{\n  "interface": {\n    "type": "data_entry",\n    "description": "# Markdown description here",\n    "surveyjs": {\n      "questions": [\n        {\n          "type": "text",\n          "name": "question1",\n          "title": "Some question title here"\n        }\n      ]\n    }\n  },\n  "taskData": []\n}\n'.trim();function Oe(e){var t=e.description,n=e.imageUrl,a=e.url,r=e.pdfUrl;return t||(n?"![".concat(n,"](").concat(n,")"):r?"[PDF Link](".concat(r,")")+'<object data="'.concat(r.replace("http://","https://"),'" type="application/pdf" width="100%" height="600px"></object>'):a?"Use this [Link](".concat(a,")"):null)}var he=n(144),Ee=n.n(he),ve=n(107),ye=n.n(ve),ke=n(250),je=n.n(ke),xe=n(130),we=n.n(xe),Se=n(213),Ce=Object(c.a)({linkButtonContainer:{marginLeft:8,marginRight:8},linkButton:{textTransform:"none",cursor:"pointer",textDecoration:"underline"}}),Ne=function(e){var t=e.onClick,n=e.text,a=Ce();return r.a.createElement("span",{className:a.linkButtonContainer},"(",r.a.createElement("span",{onClick:t,className:a.linkButton},n),")")},De=n(249),Ie=n.n(De),Pe=Object(c.a)(function(e){return{footer:{backgroundColor:"#fff",marginTop:40},footerContent:{alignItems:"center",padding:20,display:"flex",justifyContent:"space-between"},footerBorder:{borderTop:"1px solid #ccc",marginLeft:20,marginRight:20},footerCount:{display:"inline-flex"},allSamplesButton:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",marginRight:10,paddingLeft:8},sampleIcon:{marginRight:8},menuButton:{marginRight:8,color:"#fff"},grow:{flexGrow:1},buttons:{"& > *":{margin:4}},description:{padding:10,"& img":{maxWidth:"calc(100% - 16px)",marginLeft:8,marginRight:8,maxHeight:600}},sectionHeader:{fontWeight:700,fontSize:12,padding:10,paddingTop:16,textTransform:"uppercase",color:A.a[600]},content:{padding:10}}}),Te=function(e){var t=e.hideDescription,n=void 0!==t&&t,o=(e.lastSampleExitText,e.onExit),i=e.requireCompleteToPressNext,c=void 0!==i&&i,l=(e.taskData,e.minContentHeight),s=e.currentSampleIndex,u=e.totalSamples,m=e.onChangeSample,p=e.taskOutput,d=void 0===p?[]:p,f=e.description,g=e.children,b=Pe(),h=Object(a.useState)(n),E=Object(O.a)(h,2),v=E[0],y=E[1],k=Object(a.useState)(!1),j=Object(O.a)(k,2),x=j[0],w=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{container:!0},!v&&r.a.createElement(ee.a,{item:!0,xs:12,sm:12,md:6},r.a.createElement("div",{className:b.sectionHeader},"Description",r.a.createElement(Ne,{onClick:function(){return y(!0)},text:"hide"})),r.a.createElement("div",{className:b.description},r.a.createElement(Ee.a,{escapeHtml:!1,source:f}))),r.a.createElement(ee.a,{item:!0,xs:12,sm:12,md:v?12:6},r.a.createElement("div",{className:b.sectionHeader},"Sample ",s+1,"/",u,v&&r.a.createElement(Ne,{onClick:function(){return y(!1)},text:"show description"}),u>1&&r.a.createElement(Ne,{onClick:function(){return w(!0)},text:"view all"}),o&&r.a.createElement(Ne,{onClick:function(){return o()},text:"exit without saving"})),r.a.createElement("div",{style:{minHeight:l},className:b.content},g)),u>1&&r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement("div",{className:b.footer},r.a.createElement("div",{className:b.footerBorder}),r.a.createElement("div",{className:b.footerContent},r.a.createElement(te.a,{onClick:function(){return m((s-1+u)%u)}},r.a.createElement(ye.a,null)," Prev Sample"),r.a.createElement(te.a,{onClick:function(){return w(!0)},className:b.footerCount},s+1," / ",u),r.a.createElement(te.a,{disabled:c&&!d[s],onClick:function(){return m((s+1)%u)}},c&&!d[s]?"Save to Continue":"Next Sample",r.a.createElement(ge.a,null)))))),r.a.createElement(S.a,{open:x,anchor:"left",onClose:function(){return w(!1)}},r.a.createElement(P.a,{style:{minWidth:300}},r.a.createElement(L.a,null,"Samples"),Ie()(0,u).map(function(e){return r.a.createElement(T.a,{style:{backgroundColor:e===s?A.a[200]:void 0},button:!0,onClick:function(){return m(e)}},r.a.createElement(F.a,{style:{color:e===s?Se.a[500]:void 0}},d[e]?r.a.createElement(we.a,null):r.a.createElement(je.a,null)),r.a.createElement(B.a,null,"Sample ",e+1))}))))},Be=n(97),Fe=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.taskOutput&&e.taskOutput[o]?[e.taskOutput[o].label]||!1:void 0;return r.a.createElement(Te,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Oe(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Be.a,{key:o,type:"label-document",labels:e.interface.labels,multipleLabels:e.interface.multiple,document:e.taskData[o].document,initialLabels:c,onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},Le=n(279),Ae=function(e){var t=[],n=0,a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;l.label&&t.push({text:l.text,label:l.label,start:n,end:n+l.text.length}),n+=l.text.length}}catch(s){r=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return t},Me=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.taskOutput&&e.taskOutput[o]?function(e,t){if(t){var n=[];(t=Object(Le.a)(t)).sort(function(e,t){return e.start-t.start});for(var a=0,r=0;r<e.length;r++)(t[a]||{}).start===r?(n.push({text:t[a].text,label:t[a].label}),r=t[a].end,a+=1):0===n.length||n[n.length-1].label?n.push({text:e[r]}):n[n.length-1].text+=e[r];return n}}(e.taskData[o].document,e.taskOutput[o].entities):void 0;return r.a.createElement(Te,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Oe(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Be.a,{key:o,type:"label-sequence",document:e.taskData[o].document,labels:e.interface.labels,initialSequence:c,onFinish:function(t){e.onSaveTaskOutputItem(o,{entities:Ae(t)})}}))},_e=n(276),He=(n(131),Object(c.a)({}));function Re(){var e,t,n=(e=0,t=360,Math.floor(Math.random()*(t-e+1))+e);return"hsl(".concat(n,",").concat(100,"%,").concat(50,"%)")}var Ue=function(){return Math.random().toString().split(".")[1]},Je=function(e){switch(e.regionType){case"bounding-box":return{id:Ue(),cls:e.classification,color:e.color||Re(),type:"box",x:e.centerX-e.width/2,y:e.centerY-e.height/2,w:e.width,h:e.height};case"point":return{id:Ue(),type:"point",cls:e.classification,color:e.color||Re(),x:e.x,y:e.y};case"polygon":return{id:Ue(),type:"polygon",cls:e.classification,color:e.color||Re(),open:!1,points:e.points.map(function(e){return[e.x,e.y]})};case"line":case"pixel-mask":throw new Error('Unsupported region "'.concat(JSON.stringify(e),'"'))}},qe=function(e){switch(e.type){case"point":return{regionType:"point",x:e.x,y:e.y,classification:e.cls,color:e.color};case"box":return{regionType:"bounding-box",centerX:e.x+e.w/2,centerY:e.y+e.h/2,width:e.w,height:e.h,classification:e.cls,color:e.color};case"polygon":return{regionType:"polygon",classification:e.cls,color:e.color,points:e.points.map(function(e){var t=Object(O.a)(e,2);return{x:t[0],y:t[1]}})}}throw new Error('Unsupported riaRegion "'.concat(JSON.stringify(e),'"'))},We={"bounding-box":"create-box",polygon:"create-polygon","full-segmentation":"create-polygon",point:"create-point"},ze=function(e){var t=e.interface,n=e.taskData,o=void 0===n?[]:n,i=e.taskOutput,c=void 0===i?[]:i,l=e.containerProps,s=(l=void 0===l?{}:l).onExit,u=e.onSaveTaskOutputItem,m=(He(),Object(a.useState)(0)),p=Object(O.a)(m,2),d=p[0],f=(p[1],t.regionTypesAllowed),g=void 0===f?["bounding-box"]:f,b=Boolean(t.multipleRegionLabels)?{regionClsList:t.availableLabels}:{regionTagList:t.availableLabels};return r.a.createElement(_e.a,Object.assign({selectedImage:o[d].src,taskDescription:t.description},b,{enabledTools:["select"].concat(g.map(function(e){return We[e]}).filter(Boolean)),images:o.map(function(e,t){return function(e){var t=e.taskDatum,n=e.index,a=e.output;if((t||{}).imageUrl)return{src:t.imageUrl,name:"Sample ".concat(n+1),regions:a?Array.isArray(a)?a.map(Je):[Je(a)]:void 0};throw new Error('Task Datum not supported "'.concat(JSON.stringify(t),'"'))}({taskDatum:e,output:c[t],index:t})}),onExit:function(e){for(var n=(e.images||[]).map(function(e){return e.regions}).map(function(e){return(e||[]).map(qe)}),a=0;a<n.length;a++)t.multipleRegions?u(a,n[a]):u(a,n[a][0]);s&&s()}}))},Ge=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1];return r.a.createElement(Te,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Oe(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Be.a,{key:o,type:"transcribe",audio:e.taskData[o].audioUrl,phraseBank:e.phraseBank,initialTranscriptionText:(e.taskOutput||[])[o]||"",onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},Ve=n(148),Ye=n.n(Ve),Xe=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1];return console.log({props:e}),r.a.createElement(Te,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Oe(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Ye.a,{key:o,variant:"flat",form:e.taskData[o].surveyjs||e.interface.surveyjs,defaultAnswers:e.taskOutput&&e.taskOutput[o]?e.taskOutput[o]:void 0,completeText:"Save",onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},$e=Object(c.a)({root:{padding:50,textAlign:"center"},title:{margin:50},explain:{}}),Ke=function(e){var t=e.title,n=e.description,a=e.children,o=$e();return r.a.createElement("div",{className:o.root},r.a.createElement(w.a,{variant:"h3",component:"div",className:o.title},t),r.a.createElement(w.a,{variant:"h5",component:"div",className:o.explain},n||a))},Qe=function(){return r.a.createElement(Ke,{title:"No Samples to Show"},"Make sure that ",r.a.createElement("code",null,"taskData")," is defined and not empty.",r.a.createElement("br",null),r.a.createElement("br",null),"Need help setting up? ",r.a.createElement("a",{href:"#"},"Check out this tutorial."))},Ze=n(269),et=n(280),tt=n(178),nt=n.n(tt),at=function(e){var t=e.type,n=Object(et.a)(e,["type"]);switch(t){case"image_label":case"image_segmentation":return r.a.createElement(R.a,n);case"audio_transcription":return r.a.createElement(G.a,n);case"data_entry":return r.a.createElement(W.a,n);case"text_entity_recognition":return r.a.createElement(J.a,n);default:return r.a.createElement(nt.a,n)}},rt=n(237),ot=n(591);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lt=Object(Ze.a)("div")({fontSize:18,fontWeight:"bold",color:A.a[700],borderBottom:"1px solid ".concat(A.a[300]),paddingBottom:8,marginBottom:8,paddingLeft:8}),st=Object(Ze.a)(te.a)({display:"flex",textAlign:"left",justifyContent:"flex-start",marginTop:8}),ut=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.interface.fields,l=Object(a.useState)(),s=Object(O.a)(l,2),u=s[0],m=s[1];return u?r.a.createElement(mt,{onExit:function(){return m(null)},oha:{interface:u.interface,taskOutput:[e.taskOutput?(e.taskOutput[o]||{})[u.fieldName]:null],taskData:[e.taskData[o]]},onSaveTaskOutputItem:function(t,n){e.onSaveTaskOutputItem(o,ct({},e.taskOutput?e.taskOutput[o]:{},Object(b.a)({},u.fieldName,n))),m(null)}}):r.a.createElement(Te,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Oe(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(lt,null,"Fields"),c.map(function(t,n){return r.a.createElement(st,{key:t.fieldName,onClick:function(){m(ct({},t,{index:n}))},fullWidth:!0,variant:"outlined"},r.a.createElement(at,{style:{color:A.a[500],marginRight:16},type:t.interface.type}),t.fieldName,r.a.createElement(ot.a,{flexGrow:1}),r.a.createElement(rt.a,{checked:Boolean((e.taskOutput&&e.taskOutput[o]||{})[t.fieldName])}),r.a.createElement(ge.a,null))}))},mt=function(e){var t=e.oha,n=e.onExit,o=e.hideHeader,i=e.hideDescription,c=e.datasetName,l=e.requireCompleteToPressNext,s=e.onSaveTaskOutputItem,u=Object(a.useMemo)(function(){return{hideHeader:o,hideDescription:i,datasetName:c,requireCompleteToPressNext:l,onExit:n}},[o,i,l,c,n]);if(!t)return r.a.createElement(Ke,{title:"Null OHA",description:"Your OHA file isn't defined for some reason."});if(!t.taskData||0===t.taskData.length)return r.a.createElement(Qe,null);switch(t.interface.type){case"data_entry":return r.a.createElement(Xe,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"text_classification":return r.a.createElement(Fe,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"text_entity_recognition":return r.a.createElement(Me,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"image_segmentation":return r.a.createElement(ze,Object.assign({containerProps:u},t,{onExit:n,onSaveTaskOutputItem:s}));case"composite":return r.a.createElement(ut,Object.assign({containerProps:u},t,{oha:t,onSaveTaskOutputItem:s}));case"audio_transcription":return r.a.createElement(Ge,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));default:return'"'.concat(t.interface.type,'" not supported')}},pt=n(236),dt=Object(c.a)({textField:{color:"#fff"}}),ft=function(e){var t=e.value,n=e.onChange,o=dt(),i=Object(a.useState)({editing:!1}),c=Object(O.a)(i,2),l=c[0],s=l.editing,u=l.newValue,m=c[1];return Object(a.useEffect)(function(){var e=function(e){"Enter"===e.key&&(n(u),m({editing:!1}))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[s,u]),Object(a.useEffect)(function(){if(s){var e=setTimeout(function(){n(u),m({editing:!1})},t===u?1e4:2e3);return function(){e&&clearTimeout(e)}}return function(){}},[s,u]),s?r.a.createElement(pt.a,{autoFocus:!0,className:o.textField,InputProps:{inputProps:{style:{color:"#fff"}}},onChange:function(e){m({editing:!0,newValue:e.target.value})},value:u}):r.a.createElement("span",{onClick:function(){n&&m({editing:!0,newValue:t})}},t)};n(536),n(538);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var bt=Object(c.a)({headerButton:{color:"#fff"},saveIcon:{marginRight:4},editIcon:{marginLeft:4}}),Ot=function(e){e.datasetName;var t=e.oha,n=e.content,o=e.fileName,i=void 0===o?"unnamed":o,c=e.onChangeFileName,l=e.onChangeContent,s=void 0===l?function(){return null}:l,u=e.onChangeOHA,m=void 0===u?function(){return null}:u,p=(e.onFileDrop,e.initialMode),d=void 0===p?"json":p,f=bt(),g=Object(a.useState)(d),h=Object(O.a)(g,2),E=h[0],v=h[1],y=Object(a.useState)(n||be),k=Object(O.a)(y,2),j=k[0],x=k[1];return Object(a.useEffect)(function(){s(j);try{m(JSON.parse(j))}catch(e){}},[j]),r.a.createElement("div",null,r.a.createElement(Z,{title:r.a.createElement(r.a.Fragment,null,("json"===E?"JSON Editor":"Sample Editor")+" - ",r.a.createElement(ft,{onChange:c,value:i})),additionalButtons:["json"===E?r.a.createElement(te.a,{onClick:function(){return v("sample")},className:f.headerButton},"Switch to Sample Editor",r.a.createElement(ge.a,null)):r.a.createElement(te.a,{onClick:function(){return v("json")},className:f.headerButton},"Switch to JSON Editor",r.a.createElement(W.a,{className:f.editIcon}))]}),r.a.createElement("div",null,"json"===E?r.a.createElement(de.a,{theme:"github",mode:"javascript",width:"100%",value:j,editorProps:{$blockScrolling:1/0},onChange:function(e){return x(e)}}):r.a.createElement(mt,{onSaveTaskOutputItem:function(e,n){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);a.taskOutput||(a.taskOutput=a.taskData.map(function(e){return null})),a.taskOutput[e]=n,x(JSON.stringify(a,null,"  "))},oha:t})))},ht=n(90),Et=n(588),vt=n(284),yt=Object(c.a)({root:{position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,alignItems:"center",pointerEvents:"none"},errorBox:{display:"flex",backgroundColor:ht.a[700],color:"#fff",padding:4,marginBottom:4}}),kt=function(e){var t=e.errors,n=yt();return r.a.createElement("div",{className:n.root},t.map(function(e){return r.a.createElement(Et.a,{key:e.id,in:e.life<5e3},r.a.createElement(vt.a,{in:e.life>500},r.a.createElement("div",{className:n.errorBox},e.message)))}))};function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var xt=function(){var e=Object(a.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){if(0===n.length)return function(){};var e=setInterval(function(){r(n.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{life:e.life-100})}).filter(function(e){return e.life>0}))},100);return function(){return clearInterval(e)}},[n]),[n,function(e){r(n.concat([{id:Math.random().toString().split(".")[1],message:e,life:5e3}]))}]};function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ct=Object(c.a)({empty:{textAlign:"center",padding:100,color:"#666",fontSize:28}}),Nt=function(){var e=Ct(),t=Object(a.useState)("welcome"),n=Object(O.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1],m=Object(a.useState)(),p=Object(O.a)(m,2),d=p[0],f=p[1],g=xt(),b=Object(O.a)(g,2),h=b[0],E=b[1],v=function(e,t){var n=Object(a.useState)(function(){try{return JSON.parse(window.localStorage.getItem(e))}catch(n){return t}}),r=Object(O.a)(n,2),o=r[0],i=r[1];return[o,function(t){window.localStorage.setItem(e,JSON.stringify(t)),i(t)}]}("recentItems",[]),y=Object(O.a)(v,2),k=y[0],j=y[1];k||(k=[]);var x=Object(a.useMemo)(function(){return function(e){u({fileName:"unnamed",content:JSON.stringify(e.oha,null,"  "),id:Math.random().toString().split(".")[1]}),f(e.oha),i("edit")}},[]),w=Object(a.useMemo)(function(){return function(e){u(e);try{f(JSON.parse(e.content))}catch(t){E("Couldn't parse content into JSON")}i("edit")}}),S=Object(a.useMemo)(function(){return function(){i("welcome")}},[]),C=Object(a.useMemo)(function(){return function(e){var t=e.name,n=new FileReader;n.onload=function(n){var a=n.target.result;try{var r=JSON.parse(a);u({fileName:t,content:a,id:Math.random().toString().split(".")[1]}),f(r),i("edit")}catch(n){console.log(n.toString()),E('Could not read file "'.concat(e.name,'"'))}},n.readAsText(e)}},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.Provider,{value:{recentItems:k,onClickTemplate:x,onClickHome:S,onOpenFile:C,onOpenRecentItem:w}},"welcome"===o?r.a.createElement(me,{onFileDrop:C,onOpenTemplate:x}):"edit"===o&&s?r.a.createElement(Ot,Object.assign({key:s.id},s,{oha:d,onChangeFileName:function(e){u(St({},s,{fileName:e}))},onChangeContent:function(e){var t=St({},s,{content:e});u(t),k.map(function(e){return e.id}).includes(t.id)?j(k.map(function(e){return e.id===t.id?t:e})):j([t].concat(k).slice(0,3))},onChangeOHA:f})):r.a.createElement("div",{className:e.empty},'Unknown Page "',o,'"')),r.a.createElement(kt,{errors:h}))};var Dt=function(){return r.a.createElement(g,null,r.a.createElement(Nt,null))};i.a.render(r.a.createElement(Dt,null),document.getElementById("root"))}},[[304,1,2]]]);
//# sourceMappingURL=main.78dc4f91.chunk.js.map