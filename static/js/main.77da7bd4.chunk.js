(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{332:function(e,t,n){e.exports=n(573)},337:function(e,t,n){},573:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),i=n.n(o),c=n(608),l=n(261),s=n.n(l),u=n(262),p=n.n(u),m=n(609),f=(n(337),Object(c.a)({container:{fontFamily:'"Inter", sans-serif'}})),d=s()({typography:{fontFamily:'"Inter", "Roboto", sans-serif'},overrides:{MuiButton:{root:{textTransform:"none"}}}}),g=function(e){var t=e.children,n=f();return r.a.createElement(p.a,{theme:d},r.a.createElement(m.a,{theme:d},r.a.createElement("div",{className:n.container},t)))},b=n(29),O=n(12),h=n(610),v=n(611),E=n(579),y=n(189),j=n.n(y),k=(n(357),n(148)),w=n.n(k),x=n(263),S=n.n(x),C=n(149),D=n.n(C),P=n(264),N=n.n(P),I=n(85),T=n(629),L=n(150),B=n.n(L),A=n(265),R=n.n(A),F=n(614),J=n(615),M=n(213),U=n(616),H=n(617),_=n(94),W=n(147);var q=function(e){return r.a.createElement(W.a,e,r.a.createElement("path",{d:"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z"}))},z=n(151),G=n.n(z),V=n(266),Y=n.n(V),X=n(152),$=n.n(X),K=n(80),Q=n.n(K),Z=n(153),ee=n.n(Z),te=n(267),ne=n.n(te),ae=[{name:"Empty",Icon:Y.a,oha:{interface:{},taskData:[]}},{name:"Computer Vision",Icon:G.a,oha:{interface:{type:"image_segmentation",availableLabels:["valid","invalid"],regionTypesAllowed:["bounding-box","polygon","point"]},taskData:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}},{name:"Data Entry",Icon:Q.a,oha:{interface:{type:"data_entry",description:"# Markdown description here",surveyjs:{questions:[{type:"text",name:"document_title",title:"Title of Document"}]}},taskData:[{pdfUrl:"https://arxiv.org/pdf/1906.01969.pdf"},{pdfUrl:"https://arxiv.org/pdf/1908.07069.pdf"}]}},{name:"Natural Language",Icon:$.a,oha:{interface:{type:"text_entity_recognition",overlapAllowed:!1,labels:[{id:"food",displayName:"Food",description:"Edible item."},{id:"hat",displayName:"Hat",description:"Something worn on the head."}]},taskData:[{document:"This strainer makes a great hat, I'll wear it while I serve spaghetti!"}]}},{name:"Audio Transcription",Icon:ee.a,oha:{interface:{type:"audio_transcription",description:"# Markdown description here"},taskData:[{audioUrl:"https://html5tutorial.info/media/vincent.mp3"}]}},{name:"Composite",Icon:ne.a,oha:{description:"# Markdown description here",interface:{type:"composite",fields:[{fieldName:"textInfo",interface:{type:"data_entry",surveyjs:{questions:[{type:"text",name:"group_letter",title:"Letter of Group"}]}}},{fieldName:"segmentation",interface:{type:"image_segmentation",availableLabels:["group text"],regionTypesAllowed:["bounding-box"]}}]},taskData:[{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg"},{imageUrl:"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg"}]}}],re=n(166),oe=n(628),ie=n(612);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var se=Object(c.a)(function(e){return{headerButton:{color:"#fff"},grow:{flexGrow:1},list:{width:300},tab:{color:"#fff",height:"100%","& .icon":{}},fullHeightTab:le({},e.mixins.toolbar)}}),ue=Object(a.createContext)({recentItems:[]}),pe=function(e){switch(e){case"Settings":return r.a.createElement(w.a,{className:"icon"});case"Label":return r.a.createElement(D.a,{className:"icon"});case"Samples":return r.a.createElement(S.a,{className:"icon"})}},me=function(e){var t=e.additionalButtons,n=void 0===t?[]:t,o=e.title,i=void 0===o?"Universal Data Tool - Welcome!":o,c=e.currentTab,l=e.onChangeTab,s=e.tabs,u=void 0===s?[]:s,p=se(),m=Object(a.useState)(!1),f=Object(O.a)(m,2),d=f[0],g=f[1],b=Object(a.useContext)(ue),y=b.recentItems,k=b.onClickTemplate,w=b.onClickHome,x=b.onOpenFile,S=b.onOpenRecentItem,C=b.isDesktop;y||(y=[]);var D=Object(a.useCallback)(function(e){x(e[0])},[]),P=Object(re.a)({onDrop:D}),L=P.getRootProps,A=P.getInputProps;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"static"},r.a.createElement(v.a,null,!C&&r.a.createElement(E.a,{onClick:function(){return g(!0)},className:p.headerButton},r.a.createElement(j.a,null)),r.a.createElement(I.a,{className:p.title,variant:"h6",noWrap:!0},i),r.a.createElement("div",{className:p.grow}),n,u.length>0&&r.a.createElement(oe.a,{onChange:function(e,t){return l(t.toLowerCase())},value:c},u.map(function(e){return r.a.createElement(ie.a,{key:e,classes:{root:p.fullHeightTab},className:p.tab,icon:pe(e),label:e,value:e.toLowerCase()})})),r.a.createElement(E.a,{href:"https://github.com/openhumanannotation/universal-data-tool",className:p.headerButton},r.a.createElement(q,null)))),r.a.createElement(T.a,{open:d,onClose:function(){return g(!1)}},r.a.createElement(F.a,{className:p.list},r.a.createElement(J.a,{onClick:w,button:!0},r.a.createElement(U.a,null,r.a.createElement(N.a,null)),r.a.createElement(M.a,null,"Home")),r.a.createElement(J.a,Object.assign({},L(),{button:!0}),r.a.createElement(U.a,null,r.a.createElement(R.a,null)),r.a.createElement(M.a,null,"Open File"),r.a.createElement("input",A())),r.a.createElement(H.a,null,"Recent Files"),0===y.length?r.a.createElement(J.a,null,r.a.createElement(M.a,{style:{textAlign:"center",color:_.a[500]}},"No Recent Items")):y.map(function(e){return r.a.createElement(J.a,{key:e.fileName,button:!0,onClick:function(){S(e)}},r.a.createElement(U.a,null,r.a.createElement(B.a,null)),r.a.createElement(M.a,null,e.fileName))}),r.a.createElement(H.a,null,"Create From Template"),ae.map(function(e){return r.a.createElement(J.a,{key:e.name,button:!0,onClick:function(){return k(e)}},r.a.createElement(U.a,null,r.a.createElement(e.Icon,null)),r.a.createElement(M.a,null,e.name))}),r.a.createElement(H.a,null,"Explore More"),r.a.createElement(J.a,{button:!0,onClick:function(){window.location.href="https://github.com/OpenHumanAnnotation/universal-data-tool/releases"}},r.a.createElement(U.a,null,r.a.createElement(q,null)),r.a.createElement(M.a,null,"Github")))))},fe=n(622),de=n(215),ge=(n(214),n(156)),be=n.n(ge),Oe=n(618),he=n(619),ve=n(620),Ee=n(621),ye=Object(c.a)({bigButton:{padding:10,width:150,height:120,border:"1px solid #ccc",margin:10},bigIcon:{width:48,height:48}}),je=function(e){var t=e.open,n=e.onClose,a=e.onSelect,o=ye();return r.a.createElement(Oe.a,{open:t,onClose:n},r.a.createElement(he.a,null,"Create from Template"),r.a.createElement(ve.a,null,ae.map(function(e){return r.a.createElement(de.a,{onClick:function(){return a(e)},className:o.bigButton},r.a.createElement("div",null,r.a.createElement("div",null,e.name),r.a.createElement("div",null,r.a.createElement(e.Icon,{className:o.bigIcon}))))})),r.a.createElement(Ee.a,null,r.a.createElement(de.a,{onClick:function(){return n()}},"Close")))},ke=Object(c.a)({title:{},contentTitle:{paddingTop:50,paddingLeft:20,paddingRight:20,textAlign:"center"},contentSubtitle:{textAlign:"center",wordWrap:"normal",paddingLeft:40,paddingRight:40,padding:30},bigButton:{width:240,fontSize:24,margin:20,border:"1px dashed ".concat(_.a[500])},bigButtonContent:{display:"flex",lineHeight:1.5,height:160,paddingTop:20,paddingBottom:20,flexDirection:"column",alignItems:"center",justifyContent:"center"},bigIcon:{margin:20,width:64,height:64},grow:{flexGrow:1},content:{display:"flex",justifyContent:"center",flexWrap:"wrap"},headerButton:{color:"#fff"}}),we=function(e){var t=e.onFileDrop,n=e.onOpenTemplate,o=e.showDownloadLink,i=void 0===o||o,c=ke(),l=Object(a.useState)(!1),s=Object(O.a)(l,2),u=s[0],p=s[1],m=Object(a.useMemo)(function(){return function(e){t(e[0])}},[t]),f=Object(re.a)({onDrop:m}),d=f.getRootProps,g=f.getInputProps,b=f.isDragActive;return r.a.createElement("div",null,r.a.createElement(je,{open:u,onSelect:function(e){return n(e)},onClose:function(){return p(!1)}}),r.a.createElement(me,{additionalButtons:[i&&r.a.createElement(de.a,{href:"https://github.com/OpenHumanAnnotation/universal-data-tool/releases",className:c.headerButton},"Download Universal Data Tool")].filter(Boolean)}),r.a.createElement(fe.a,{container:!0},r.a.createElement(fe.a,{item:!0,xs:12},r.a.createElement(I.a,{className:c.contentTitle,variant:"h3",noWrap:!0},"Universal Data Tool")),r.a.createElement(fe.a,{item:!0,xs:12},r.a.createElement(I.a,{className:c.contentSubtitle,variant:"h5"},"Annotate data for Computer Vision, Natural Language Processing, Data Entry and More.")),r.a.createElement(fe.a,{item:!0,xs:12},r.a.createElement("div",{className:c.content},r.a.createElement(de.a,Object.assign({},d(),{className:c.bigButton}),r.a.createElement("div",{className:c.bigButtonContent},r.a.createElement("div",null,b?"Drop File Here":"Open File"),r.a.createElement(B.a,{className:c.bigIcon}),r.a.createElement("input",g()))),r.a.createElement(de.a,{onClick:function(){p(!0)},className:c.bigButton},r.a.createElement("div",{className:c.bigButtonContent},r.a.createElement("div",null,"Create from Template"),r.a.createElement(be.a,{className:c.bigIcon})))))))},xe=n(106),Se=(n(176),n(157)),Ce=n.n(Se),De=n(72),Pe=n.n(De),Ne=(n(363),'\n{\n  "interface": {\n    "type": "data_entry",\n    "description": "# Markdown description here",\n    "surveyjs": {\n      "questions": [\n        {\n          "type": "text",\n          "name": "question1",\n          "title": "Some question title here"\n        }\n      ]\n    }\n  },\n  "taskData": []\n}\n'.trim());function Ie(e){var t=e.description,n=e.imageUrl,a=e.url,r=e.pdfUrl;return t||(n?"![".concat(n,"](").concat(n,")"):r?"[PDF Link](".concat(r,")")+'<object data="'.concat(r.replace("http://","https://"),'" type="application/pdf" width="100%" height="600px"></object>'):a?"Use this [Link](".concat(a,")"):null)}var Te=n(100),Le=n.n(Te),Be=(n(443),n(116)),Ae=n.n(Be),Re=(n(444),n(268)),Fe=n.n(Re),Je=n(140),Me=n.n(Je),Ue=n(232),He=Object(c.a)({linkButtonContainer:{marginLeft:8,marginRight:8},linkButton:{textTransform:"none",cursor:"pointer",textDecoration:"underline"}}),_e=function(e){var t=e.onClick,n=e.text,a=He();return r.a.createElement("span",{className:a.linkButtonContainer},"(",r.a.createElement("span",{onClick:t,className:a.linkButton},n),")")},We=n(158),qe=n.n(We),ze=Object(c.a)(function(e){return{footer:{backgroundColor:"#fff",marginTop:40},footerContent:{alignItems:"center",padding:20,display:"flex",justifyContent:"space-between"},footerBorder:{borderTop:"1px solid #ccc",marginLeft:20,marginRight:20},footerCount:{display:"inline-flex"},allSamplesButton:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",marginRight:10,paddingLeft:8},sampleIcon:{marginRight:8},menuButton:{marginRight:8,color:"#fff"},grow:{flexGrow:1},buttons:{"& > *":{margin:4}},description:{padding:10,"& img":{maxWidth:"calc(100% - 16px)",marginLeft:8,marginRight:8,maxHeight:600}},sectionHeader:{fontWeight:700,fontSize:12,padding:10,paddingTop:16,textTransform:"uppercase",color:_.a[600]},content:{padding:10}}}),Ge=function(e){var t=e.hideDescription,n=void 0!==t&&t,o=(e.lastSampleExitText,e.onExit),i=e.requireCompleteToPressNext,c=void 0!==i&&i,l=(e.taskData,e.minContentHeight),s=e.currentSampleIndex,u=e.totalSamples,p=e.onChangeSample,m=e.taskOutput,f=void 0===m?[]:m,d=e.description,g=e.children,b=ze(),h=Object(a.useState)(n),v=Object(O.a)(h,2),E=v[0],y=v[1],j=Object(a.useState)(!1),k=Object(O.a)(j,2),w=k[0],x=k[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{container:!0},!E&&r.a.createElement(fe.a,{item:!0,xs:12,sm:12,md:6},r.a.createElement("div",{className:b.sectionHeader},"Description",r.a.createElement(_e,{onClick:function(){return y(!0)},text:"hide"})),r.a.createElement("div",{className:b.description},r.a.createElement(Le.a,{escapeHtml:!1,source:d}))),r.a.createElement(fe.a,{item:!0,xs:12,sm:12,md:E?12:6},r.a.createElement("div",{className:b.sectionHeader},"Sample ",s+1,"/",u,E&&r.a.createElement(_e,{onClick:function(){return y(!1)},text:"show description"}),u>1&&r.a.createElement(_e,{onClick:function(){return x(!0)},text:"view all"}),o&&r.a.createElement(_e,{onClick:function(){return o()},text:"exit without saving"})),r.a.createElement("div",{style:{minHeight:l},className:b.content},g)),u>1&&r.a.createElement(fe.a,{item:!0,xs:12},r.a.createElement("div",{className:b.footer},r.a.createElement("div",{className:b.footerBorder}),r.a.createElement("div",{className:b.footerContent},r.a.createElement(de.a,{onClick:function(){return p((s-1+u)%u)}},r.a.createElement(Ae.a,null)," Prev Sample"),r.a.createElement(de.a,{onClick:function(){return x(!0)},className:b.footerCount},s+1," / ",u),r.a.createElement(de.a,{disabled:c&&!f[s],onClick:function(){return p((s+1)%u)}},c&&!f[s]?"Save to Continue":"Next Sample",r.a.createElement(Pe.a,null)))))),r.a.createElement(T.a,{open:w,anchor:"left",onClose:function(){return x(!1)}},r.a.createElement(F.a,{style:{minWidth:300}},r.a.createElement(H.a,null,"Samples"),qe()(0,u).map(function(e){return r.a.createElement(J.a,{style:{backgroundColor:e===s?_.a[200]:void 0},button:!0,onClick:function(){return p(e)}},r.a.createElement(U.a,{style:{color:e===s?Ue.a[500]:void 0}},f[e]?r.a.createElement(Me.a,null):r.a.createElement(Fe.a,null)),r.a.createElement(M.a,null,"Sample ",e+1))}))))},Ve=n(102),Ye=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.taskOutput&&e.taskOutput[o]?[e.taskOutput[o].label]||!1:void 0;return r.a.createElement(Ge,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Ie(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Ve.a,{key:o,type:"label-document",labels:e.interface.labels,multipleLabels:e.interface.multiple,document:e.taskData[o].document,initialLabels:c,onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},Xe=function(e){var t=[],n=0,a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;l.label&&t.push({text:l.text,label:l.label,start:n,end:n+l.text.length}),n+=l.text.length}}catch(s){r=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return t},$e=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.taskOutput&&e.taskOutput[o]?function(e,t){if(t){var n=[];(t=Object(xe.a)(t)).sort(function(e,t){return e.start-t.start});for(var a=0,r=0;r<e.length;r++)(t[a]||{}).start===r?(n.push({text:t[a].text,label:t[a].label}),r=t[a].end,a+=1):0===n.length||n[n.length-1].label?n.push({text:e[r]}):n[n.length-1].text+=e[r];return n}}(e.taskData[o].document,e.taskOutput[o].entities):void 0;return r.a.createElement(Ge,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Ie(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Ve.a,{key:o,type:"label-sequence",document:e.taskData[o].document,labels:e.interface.labels,initialSequence:c,onFinish:function(t){e.onSaveTaskOutputItem(o,{entities:Xe(t)})}}))},Ke=n(305),Qe=(n(141),Object(c.a)({}));function Ze(){var e,t,n=(e=0,t=360,Math.floor(Math.random()*(t-e+1))+e);return"hsl(".concat(n,",").concat(100,"%,").concat(50,"%)")}var et=function(){return Math.random().toString().split(".")[1]},tt=function(e){switch(e.regionType){case"bounding-box":return{id:et(),cls:e.classification,color:e.color||Ze(),type:"box",x:e.centerX-e.width/2,y:e.centerY-e.height/2,w:e.width,h:e.height};case"point":return{id:et(),type:"point",cls:e.classification,color:e.color||Ze(),x:e.x,y:e.y};case"polygon":return{id:et(),type:"polygon",cls:e.classification,color:e.color||Ze(),open:!1,points:e.points.map(function(e){return[e.x,e.y]})};case"line":case"pixel-mask":throw new Error('Unsupported region "'.concat(JSON.stringify(e),'"'))}},nt=function(e){switch(e.type){case"point":return{regionType:"point",x:e.x,y:e.y,classification:e.cls,color:e.color};case"box":return{regionType:"bounding-box",centerX:e.x+e.w/2,centerY:e.y+e.h/2,width:e.w,height:e.h,classification:e.cls,color:e.color};case"polygon":return{regionType:"polygon",classification:e.cls,color:e.color,points:e.points.map(function(e){var t=Object(O.a)(e,2);return{x:t[0],y:t[1]}})}}throw new Error('Unsupported riaRegion "'.concat(JSON.stringify(e),'"'))},at={"bounding-box":"create-box",polygon:"create-polygon","full-segmentation":"create-polygon",point:"create-point"},rt=function(e){var t=e.interface,n=e.taskData,o=void 0===n?[]:n,i=e.taskOutput,c=void 0===i?[]:i,l=e.containerProps,s=(l=void 0===l?{}:l).onExit,u=l.datasetName,p=e.onSaveTaskOutputItem,m=(Qe(),Object(a.useState)(0)),f=Object(O.a)(m,2),d=f[0],g=(f[1],t.regionTypesAllowed),b=void 0===g?["bounding-box"]:g,h=Boolean(t.multipleRegionLabels)?{regionClsList:t.availableLabels}:{regionTagList:t.availableLabels};return r.a.createElement(Ke.a,Object.assign({selectedImage:o[d].src,taskDescription:t.description},h,{enabledTools:["select"].concat(b.map(function(e){return at[e]}).filter(Boolean)),images:o.map(function(e,t){return function(e){var t=e.title,n=e.taskDatum,a=e.index,r=e.output;if((n||{}).imageUrl)return{src:n.imageUrl,name:t||"Sample ".concat(a),regions:r?Array.isArray(r)?r.map(tt):[tt(r)]:void 0};throw new Error('Task Datum not supported "'.concat(JSON.stringify(n),'"'))}({title:u,taskDatum:e,output:c[t],index:t})}),onExit:function(e){for(var n=(e.images||[]).map(function(e){return e.regions}).map(function(e){return(e||[]).map(nt)}),a=0;a<n.length;a++)t.multipleRegions?p(a,n[a]):p(a,n[a][0]);s&&s()}}))},ot=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1];return r.a.createElement(Ge,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Ie(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(Ve.a,{key:o,type:"transcribe",audio:e.taskData[o].audioUrl,phraseBank:e.phraseBank,initialTranscriptionText:(e.taskOutput||[])[o]||"",onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},it=n(101),ct=n.n(it),lt=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1];return console.log({props:e}),r.a.createElement(Ge,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Ie(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(ct.a,{key:o,variant:"flat",form:e.taskData[o].surveyjs||e.interface.surveyjs,defaultAnswers:e.taskOutput&&e.taskOutput[o]?e.taskOutput[o]:void 0,completeText:"Save",onFinish:function(t){e.onSaveTaskOutputItem(o,t)}}))},st=Object(c.a)({root:{padding:50,textAlign:"center"},title:{margin:50},explain:{}}),ut=function(e){var t=e.title,n=e.description,a=e.children,o=st();return r.a.createElement("div",{className:o.root},r.a.createElement(I.a,{variant:"h3",component:"div",className:o.title},t),r.a.createElement(I.a,{variant:"h5",component:"div",className:o.explain},n||a))},pt=function(){return r.a.createElement(ut,{title:"No Samples to Show"},"Make sure that ",r.a.createElement("code",null,"taskData")," is defined and not empty.",r.a.createElement("br",null),r.a.createElement("br",null),"Need help setting up? ",r.a.createElement("a",{href:"#"},"Check out this tutorial."))},mt=n(287),ft=n(167),dt=n(193),gt=n.n(dt),bt=function(e){var t=e.type,n=Object(ft.a)(e,["type"]);switch(t){case"image_label":case"image_segmentation":return r.a.createElement(G.a,n);case"audio_transcription":return r.a.createElement(ee.a,n);case"data_entry":return r.a.createElement(Q.a,n);case"text_entity_recognition":return r.a.createElement($.a,n);default:return r.a.createElement(gt.a,n)}},Ot=n(255),ht=n(627);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yt=Object(mt.a)("div")({fontSize:18,fontWeight:"bold",color:_.a[700],borderBottom:"1px solid ".concat(_.a[300]),paddingBottom:8,marginBottom:8,paddingLeft:8}),jt=Object(mt.a)(de.a)({display:"flex",textAlign:"left",justifyContent:"flex-start",marginTop:8}),kt=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),o=n[0],i=n[1],c=e.interface.fields,l=Object(a.useState)(),s=Object(O.a)(l,2),u=s[0],p=s[1];return u?r.a.createElement(wt,{onExit:function(){return p(null)},oha:{interface:u.interface,taskOutput:[e.taskOutput?(e.taskOutput[o]||{})[u.fieldName]:null],taskData:[e.taskData[o]]},onSaveTaskOutputItem:function(t,n){e.onSaveTaskOutputItem(o,Et({},e.taskOutput?e.taskOutput[o]:{},Object(b.a)({},u.fieldName,n))),p(null)}}):r.a.createElement(Ge,Object.assign({},e.containerProps,{currentSampleIndex:o,totalSamples:e.taskData.length,taskOutput:e.taskOutput,description:Ie(e.taskData[o])||e.interface.description,onChangeSample:function(e){return i(e)}}),r.a.createElement(yt,null,"Fields"),c.map(function(t,n){return r.a.createElement(jt,{key:t.fieldName,onClick:function(){p(Et({},t,{index:n}))},fullWidth:!0,variant:"outlined"},r.a.createElement(bt,{style:{color:_.a[500],marginRight:16},type:t.interface.type}),t.fieldName,r.a.createElement(ht.a,{flexGrow:1}),r.a.createElement(Ot.a,{checked:Boolean((e.taskOutput&&e.taskOutput[o]||{})[t.fieldName])}),r.a.createElement(Pe.a,null))}))},wt=function(e){var t=e.oha,n=e.onExit,o=e.hideHeader,i=e.hideDescription,c=e.datasetName,l=e.requireCompleteToPressNext,s=e.onSaveTaskOutputItem,u=Object(a.useMemo)(function(){return{hideHeader:o,hideDescription:i,datasetName:c,requireCompleteToPressNext:l,onExit:n}},[o,i,l,c,n]);if(!t)return r.a.createElement(ut,{title:"Null OHA",description:"Your OHA file isn't defined for some reason."});if(!t.taskData||0===t.taskData.length)return r.a.createElement(pt,null);switch(t.interface.type){case"data_entry":return r.a.createElement(lt,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"text_classification":return r.a.createElement(Ye,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"text_entity_recognition":return r.a.createElement($e,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));case"image_segmentation":return r.a.createElement(rt,Object.assign({containerProps:u},t,{onExit:n,onSaveTaskOutputItem:s}));case"composite":return r.a.createElement(kt,Object.assign({containerProps:u},t,{oha:t,onSaveTaskOutputItem:s}));case"audio_transcription":return r.a.createElement(ot,Object.assign({containerProps:u},t,{onSaveTaskOutputItem:s}));default:return'"'.concat(t.interface.type,'" not supported')}},xt=n(254),St=Object(c.a)({textField:{color:"#fff"}}),Ct=function(e){var t=e.value,n=e.onChange,o=St(),i=Object(a.useState)({editing:!1}),c=Object(O.a)(i,2),l=c[0],s=l.editing,u=l.newValue,p=c[1];return Object(a.useEffect)(function(){var e=function(e){"Enter"===e.key&&(n(u),p({editing:!1}))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[s,u]),Object(a.useEffect)(function(){if(s){var e=setTimeout(function(){n(u),p({editing:!1})},t===u?1e4:2e3);return function(){e&&clearTimeout(e)}}return function(){}},[s,u]),s?r.a.createElement(xt.a,{autoFocus:!0,className:o.textField,InputProps:{inputProps:{style:{color:"#fff"}}},onChange:function(e){p({editing:!0,newValue:e.target.value})},value:u}):r.a.createElement("span",{onClick:function(){n&&p({editing:!0,newValue:t})}},t)},Dt=n(293),Pt=n.n(Dt),Nt=n(76),It=n.n(Nt),Tt=Object(mt.a)("div")({flexWrap:"wrap"}),Lt=Object(mt.a)("div")({margin:4,padding:4,backgroundColor:_.a[300],display:"inline-flex",fontSize:11,textAlign:"center",justifyContent:"center",minWidth:"3em",borderRadius:3,cursor:"pointer","&.completed":{backgroundColor:Ue.a[500],color:"#fff"}}),Bt=function(e){var t=e.count,n=e.completed,a=void 0===n?[]:n,o=e.onClick;return r.a.createElement(Tt,null,qe()(t).map(function(e){return r.a.createElement(Lt,{onClick:function(){return o(e)},className:a[e]?"completed":"",key:e},e)}))},At=n(297),Rt=n.n(At),Ft=n(298),Jt=n.n(Ft),Mt=n(299),Ut=n.n(Mt),Ht=n(77),_t=n.n(Ht),Wt=n(162),qt=n(300),zt=n.n(qt),Gt=n(301),Vt=n.n(Gt),Yt=n(302),Xt=n.n(Yt),$t=n(119),Kt=n.n($t),Qt=n(303),Zt=n.n(Qt),en=n(97),tn=Object(mt.a)(he.a)({backgroundColor:_.a[100],borderBottom:"1px solid ".concat(_.a[300]),paddingBottom:12,boxShadow:"0px 2px 3px rgba(0,0,0,0.05)"}),nn=Object(mt.a)(ve.a)({paddingTop:16}),an=Object(mt.a)(Ee.a)({backgroundColor:_.a[100],borderTop:"1px solid ".concat(_.a[300])}),rn=function(e){var t=e.open,n=void 0!==t&&t,o=e.title,i=e.children,c=e.markdownContent,l=e.onClose,s=e.red,u=e.noActionBar,p=void 0!==u&&u,m=e.actions,f=void 0===m?[]:m,d=Object(a.useState)(!1),g=Object(O.a)(d,2),b=g[0],h=g[1];return r.a.createElement(Oe.a,{open:n,onClose:l,fullScreen:b},r.a.createElement(tn,null,r.a.createElement(ht.a,{display:"flex",alignItems:"center"},r.a.createElement("span",{style:{color:s?en.a[700]:void 0}},o),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(E.a,{onClick:function(){return h(!b)}},b?r.a.createElement(Zt.a,null):r.a.createElement(Kt.a,null)),r.a.createElement(E.a,{onClick:l},r.a.createElement(Xt.a,null)))),r.a.createElement(nn,null,r.a.createElement(ht.a,{maxWidth:"90vw",minWidth:400,lineHeight:1.5},c?r.a.createElement(Le.a,{source:c}):i)),!p&&r.a.createElement(an,null,r.a.createElement(de.a,{onClick:function(){return l()}},r.a.createElement("span",{style:{color:_.a[700],fontWeight:500}},"Close")),f.map(function(e,t){return r.a.createElement(de.a,{key:t,onClick:e.onClick},r.a.createElement("span",{style:{color:s?en.a[700]:Ue.a[700],fontWeight:500}},e.text))})))},on=Object(mt.a)("textarea")({width:"100%",minHeight:300}),cn=function(e){var t=e.open,n=e.onClose,o=e.onAddSamples,i=Object(a.useState)(""),c=Object(O.a)(i,2),l=c[0],s=c[1];return r.a.createElement(rn,{title:"Paste Urls",open:t,onClose:n,actions:[{text:"Add Samples",onClick:function(){o(l.split("\n").map(function(e){return e.trim()}).filter(Boolean).map(function(e){switch(e.split(".").slice(-1)[0].toLowerCase()){case"png":case"jpg":case"gif":case"jpeg":case"bmp":return{imageUrl:e};case"pdf":return{pdfUrl:e};default:return console.error("extension not recognized"),null}}))}}]},r.a.createElement(on,{onChange:function(e,t){return s(e.target.value)},placeholder:"Paste URLs here\nOne URL per line"}))},ln=function(){return!!window.require&&Boolean(window.require("electron"))},sn=function(){return window.require?window.require("electron"):null},un=n(39),pn=n.n(un);function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dn=Object(mt.a)(de.a)({width:240,height:140,display:"inline-flex",flexDirection:"column","&.disabled":{backgroundColor:_.a[200]},margin:8,"& .icon":{width:48,height:48,color:_.a[600],"&.disabled":{color:_.a[400]}}}),gn=Object(mt.a)("div")({fontSize:11,fontWeight:"bold",color:_.a[600],"&.disabled":{color:_.a[500]}}),bn=Object(a.createContext)(),On=function(e){var t=e.Icon,n=e.desktopOnly,a=e.isDesktop,o=e.children,i=e.dialog,c=!!n&&!a;return r.a.createElement(bn.Consumer,null,function(e){var a=e.onChangeDialog;return r.a.createElement(dn,{onClick:function(){return a(i)},className:pn()({disabled:c}),variant:"outlined",disabled:c},r.a.createElement("div",null,r.a.createElement(t,{className:pn()("icon",{disabled:c})}),r.a.createElement("div",null,o),n&&r.a.createElement(gn,{className:pn()({disabled:c})},"DESKTOP ONLY")))})},hn=function(e){var t=e.split(".").slice(-1)[0].toLowerCase();return["png","jpg","jpeg"].includes(t)?{imageUrl:"file://".concat(e)}:["pdf"].includes(t)?{pdfUrl:"file://".concat(e)}:null},vn=function(e){var t=e.oha,n=e.onChangeOHA,o=e.isDesktop,i=Object(a.useState)(),c=Object(O.a)(i,2),l=c[0],s=c[1],u=sn(),p=function(){var e=Object(Wt.a)(_t.a.mark(function e(a){var r,o,i,c,l,p,m;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="upload-directory"===e.t0?3:22;break;case 3:if(u){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,u.remote.dialog.showOpenDialog({title:"Select Directory to Import Files",properties:["openDirectory"]});case 7:if(r=e.sent,o=r.canceled,i=r.filePaths,!o){e.next=12;break}return e.abrupt("return");case 12:return c=i[0],l=u.remote.require("fs"),p=u.remote.require("path"),e.next=17,l.promises.readdir(c);case 17:e.t1=function(e){return e.includes(".")},e.t2=function(e){return p.join(c,e)},m=e.sent.filter(e.t1).map(e.t2),console.log({importedFilePaths:m,oha:fn({},t,{taskData:(t.taskData||[]).concat(m.map(hn).filter(Boolean))})}),n(fn({},t,{taskData:(t.taskData||[]).concat(m.map(hn).filter(Boolean))}),!0);case 22:return e.abrupt("return",s(a));case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(){return s(null)};return r.a.createElement(bn.Provider,{value:{onChangeDialog:p}},r.a.createElement("div",null,r.a.createElement(On,{isDesktop:o,dialog:"paste-image-urls",Icon:zt.a},"Paste URLs"),r.a.createElement(On,{desktopOnly:!0,isDesktop:o,dialog:"upload-directory",Icon:Vt.a},"Files from Directory"),r.a.createElement(cn,{open:"paste-image-urls"===l,onClose:m,onAddSamples:function(e){n(fn({},t,{taskData:(t.taskData||[]).concat(e)}),!0),m()}})))};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var yn=Object(mt.a)("div")({padding:16}),jn=Object(mt.a)("div")({padding:8,border:"#888 solid 1px",borderTop:"none",borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,boxShadow:"inset 0 3px 3px rgba(0,0,0,0.2)"}),kn=Object(mt.a)("div")({fontSize:11,fontWeight:"bold"}),wn=Object(mt.a)("pre")({whiteSpace:"pre-wrap",fontSize:11}),xn=function(e){var t=e.data,n=t._output,a=Object(ft.a)(t,["_output"]);return r.a.createElement(jn,null,r.a.createElement(fe.a,{spacing:2,container:!0},r.a.createElement(fe.a,{item:!0,xs:6},r.a.createElement(kn,null,"taskData[",t.index,"]:"),r.a.createElement(wn,null,JSON.stringify(a,null,"  "))),r.a.createElement(fe.a,{item:!0,xs:6},r.a.createElement(kn,null,"taskOutput[",t.index,"]:"),r.a.createElement(wn,null,JSON.stringify(n,null,"  ")))))},Sn=function(e){var t=e.oha,n=e.openSampleInputEditor,o=e.openSampleLabelEditor,i=e.deleteSample,c=e.onChangeOHA,l=ln(),s=Object(a.useState)(window.localStorage.lastSampleTab||"grid"),u=Object(O.a)(s,2),p=u[0],m=u[1],f=function(e){m(e),window.localStorage.lastSampleTab=e},d=Object(a.useMemo)(function(){if(!t.taskData)return[];var e=[{name:"Index",selector:"index",sortable:!0}],a=new Set,c=!0,l=!1,s=void 0;try{for(var u,p=t.taskData[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var m=u.value;for(var f in m)a.has(f)||(e.push({name:f,selector:f}),a.add(f))}}catch(d){l=!0,s=d}finally{try{c||null==p.return||p.return()}finally{if(l)throw s}}return e.push({name:"Edit",button:!0,cell:function(e){return r.a.createElement(E.a,{raised:!0,primary:!0,onClick:function(){return n(e.index)}},r.a.createElement(Q.a,{style:{width:20,height:20}}))}}),e.push({name:"Label",button:!0,cell:function(e){return r.a.createElement(E.a,{raised:!0,primary:!0,onClick:function(){return o(e.index)}},r.a.createElement(D.a,{style:{width:20,height:20}}))}}),e.push({name:"Delete",button:!0,cell:function(e){return r.a.createElement(E.a,{raised:!0,primary:!0,onClick:function(){return i(e.index)}},r.a.createElement(It.a,{style:{width:20,height:20}}))}}),e},[t.taskData,t.taskOutput]),g=Object(a.useMemo)(function(){return t.taskData?t.taskData.map(function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{_output:t.taskOutput&&t.taskOutput[n]?t.taskOutput[n]:{},index:n})}):[]},[t.taskData,t.taskOutput]);return r.a.createElement(yn,null,r.a.createElement(oe.a,{value:p,onChange:function(e,t){return f(t)}},r.a.createElement(ie.a,{icon:r.a.createElement(Ut.a,null),label:"Import",value:"import"}),r.a.createElement(ie.a,{icon:r.a.createElement(Rt.a,null),label:"Grid",value:"grid"}),r.a.createElement(ie.a,{icon:r.a.createElement(Jt.a,null),label:"Table",value:"table"})),r.a.createElement(ht.a,{paddingTop:2}),"import"===p&&r.a.createElement(vn,{isDesktop:l,onChangeOHA:function(e,t){c(e),t&&f("grid")},oha:t}),"grid"===p&&r.a.createElement(Bt,{count:(t.taskData||[]).length,completed:(t.taskOutput||[]).map(Boolean),onClick:function(e){o(e)}}),"table"===p&&r.a.createElement(Pt.a,{title:"Samples",expandableRowsComponent:r.a.createElement(xn,null),expandableRows:!0,dense:!0,columns:d,data:g}))};function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Dn={questions:[{name:"regionTypesAllowed",title:"Region Types Allowed",description:"What types of regions can be drawn on the image.",type:"multiple-dropdown",choices:["bounding-box","polygon","point"]},{name:"multipleRegions",title:"Can multiple regions be created?",type:"boolean"},{name:"multipleRegionLabels",title:"Multiple Region Labels Allowed?",type:"boolean"},{name:"availableLabels",title:"Available Labels",description:"If you're labeling regions on an image, these are the allowed classifications or tags.",type:"matrixdynamic",columns:[{cellType:"text",name:"id",title:"id"},{cellType:"text",name:"description",title:"Description (optional)"}]}]},Pn=function(e){var t=e.iface,n=e.onChange,o=Object(a.useMemo)(function(){return{multipleRegions:Boolean(t.multipleRegions),multipleRegionLabels:Boolean(t.multipleRegionLabels),regionTypesAllowed:t.regionTypesAllowed,availableLabels:(t.availableLabels||[]).map(function(e){return"string"===typeof e?{id:e,description:e}:e})||[]}},[]);return r.a.createElement(ct.a,{noActions:!0,variant:"flat",defaultAnswers:o,onQuestionChange:function(e,a,r){n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,Object(b.a)({},e,a)))},form:Dn})},Nn=Object(mt.a)("div")({margin:16,padding:16,border:"1px solid #ccc",borderRadius:4,boxShadow:"0px 2px 2px rgba(0,0,0,0.1)"});function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Tn=Object(mt.a)("div")({fontSize:18,textAlign:"center",fontWeight:"bold",color:_.a[500],paddingTop:30,paddingBottom:50}),Ln=Object(mt.a)(de.a)({margin:8,"& .icon":{marginRight:8,color:"#888"},alignItems:"center",justifyContent:"center","&.selected":{backgroundColor:Ue.a[500],color:"#fff","& .icon":{color:"#fff"}}}),Bn=Object(mt.a)("div")({fontWeight:"bold",textTransform:"uppercase",fontSize:12,paddingLeft:8,marginBottom:8,marginTop:16,color:_.a[700]}),An=function(e){var t=e.currentlySelected,n=e.onChange;return ae.map(function(e){return r.a.createElement(Ln,{key:e.oha.interface.type,className:t===e.oha.interface.type?"selected":"",variant:"outlined",onClick:function(){return n(e.oha.interface.type)}},r.a.createElement(e.Icon,{className:"icon"}),e.name)})},Rn=function(e){var t=e.iface,n=void 0===t?{}:t,a=e.onChange;e.onClickEditJSON;return r.a.createElement(Nn,null,r.a.createElement(Bn,null,"Type"),r.a.createElement(An,{currentlySelected:n.type,onChange:function(e){a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{type:e}))}}),r.a.createElement(Bn,null,"Options"),r.a.createElement(ht.a,{paddingTop:2}),!n.type&&r.a.createElement(Tn,null,"Select a Type"),"image_segmentation"===n.type&&r.a.createElement(Pn,{iface:n,onChange:a}),"composite"===n.type&&r.a.createElement(Tn,null,"GUI Configuration Not Available"),"data_entry"===n.type&&r.a.createElement(Tn,null,"GUI Configuration Not Available"),"audio_transcription"===n.type&&r.a.createElement(Tn,null,"GUI Configuration Not Available"),"text_classification"===n.type&&r.a.createElement(Tn,null,"GUI Configuration Not Available"))},Fn=Object(mt.a)(de.a)({margin:8}),Jn=function(e){var t=e.oha,n=e.onChange,a=e.onClickEditJSON,o=e.onClickDownloadJSON,i=t.interface,c=ln();return r.a.createElement("div",null,r.a.createElement(Rn,{iface:i,onChange:n,onClickEditJSON:a}),r.a.createElement(Nn,null,r.a.createElement(Bn,null,"Advanced"),r.a.createElement(ht.a,{padding:2},r.a.createElement(Fn,{onClick:a,variant:"outlined"},"Edit JSON"),!c&&r.a.createElement(Fn,{onClick:o,variant:"outlined"},"Download JSON"))))},Mn=function(e){var t=e.open,n=e.sampleIndex,o=e.sampleInput,i=e.onChange,c=e.onClose,l=Object(a.useState)(),s=Object(O.a)(l,2),u=s[0],p=s[1],m=Object(a.useState)(),f=Object(O.a)(m,2),d=f[0],g=f[1];return Object(a.useEffect)(function(){var e=JSON.stringify(o,null,"  ");e!==u&&(p(e),g(null))},[n]),r.a.createElement(rn,{open:t,onClose:c,title:"taskData[".concat(n,"]")},r.a.createElement(Ce.a,{theme:"github",mode:"javascript",width:"100%",value:u,editorProps:{$blockScrolling:1/0},onChange:function(e){p(e),g(null);try{i(JSON.parse(e))}catch(t){g(t.toString())}}}),r.a.createElement(ht.a,{color:"red"},d))},Un=n(304),Hn=n.n(Un);n(570),n(572);function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qn=Object(c.a)({headerButton:{color:"#fff"},saveIcon:{marginRight:4},editIcon:{marginLeft:4}}),zn=function(e){e.datasetName;var t=e.oha,n=e.content,o=e.fileName,i=void 0===o?"unnamed":o,c=e.onChangeFileName,l=e.onChangeContent,s=void 0===l?function(){return null}:l,u=e.onChangeOHA,p=void 0===u?function(){return null}:u,m=(e.onFileDrop,e.initialMode),f=void 0===m?"settings":m,d=(qn(),Object(a.useState)(f)),g=Object(O.a)(d,2),b=g[0],h=g[1],v=Object(a.useState)(),E=Object(O.a)(v,2),y=E[0],j=E[1],k=Object(a.useState)({}),w=Object(O.a)(k,2),x=w[0],S=w[1],C=Object(a.useState)(JSON.stringify(n||t||Ne,null,"  ")),D=Object(O.a)(C,2),P=D[0],N=D[1],I=sn()||{},T=(I.remote,I.ipcRenderer);return Object(a.useEffect)(function(){if(T){var e=function(){return h("settings")},t=function(){return h("samples")},n=function(){return h("label")};return T.on("open-settings-page",e),T.on("open-samples-page",t),T.on("open-label-page",n),function(){T.removeListener("open-settings-page",e),T.removeListener("open-samples-page",t),T.removeListener("open-label-page",n)}}},[]),Object(a.useEffect)(function(){s(P);try{p(JSON.parse(P))}catch(e){}},[P]),r.a.createElement("div",null,r.a.createElement(me,{title:r.a.createElement(Ct,{onChange:c,value:i}),onChangeTab:function(e){return h(e.toLowerCase())},currentTab:b,tabs:["Settings","Samples","Label"]}),r.a.createElement("div",null,"json"===b&&r.a.createElement(Ce.a,{theme:"github",mode:"javascript",width:"100%",value:P||"",editorProps:{$blockScrolling:1/0},onChange:function(e){return N(e)}}),"settings"===b&&r.a.createElement(Jn,{onClickEditJSON:function(){return h("json")},onClickDownloadJSON:function(){Hn()(P,i.includes(".")?i:i+".udt.json")},oha:t,onChange:function(e){N(JSON.stringify(Wn({},t,{interface:e}),null,"  "))}}),"samples"===b&&r.a.createElement(Sn,{oha:t,openSampleLabelEditor:function(e){j(Wn({},t,{taskData:[t.taskData[e]],taskOutput:[(t.taskOutput||[])[e]],sampleIndex:e})),h("label")},openSampleInputEditor:function(e){S({open:!0,sampleIndex:e})},deleteSample:function(e){var n=Object(xe.a)(t.taskData),a=t.taskOutput?Object(xe.a)(t.taskOutput):void 0;n.splice(e,1),a&&a.splice(e,1),N(JSON.stringify(Wn({},t,{taskData:n,taskOutput:a}),null,"  "))},onChangeOHA:function(e){N(JSON.stringify(e,null,"  "))}}),"label"===b&&y?r.a.createElement(wt,{datasetName:"Sample ".concat(y.sampleIndex),onSaveTaskOutputItem:function(e,n){var a=Wn({},t);a.taskOutput||(a.taskOutput=a.taskData.map(function(e){return null})),a.taskOutput[y.sampleIndex]=n,N(JSON.stringify(a,null,"  ")),j(null)},oha:y}):"label"===b&&r.a.createElement(Nn,null,r.a.createElement(Bt,{count:(t.taskData||[]).length,completed:(t.taskOutput||[]).map(Boolean),onClick:function(e){j(Wn({},t,{taskData:[t.taskData[e]],taskOutput:[(t.taskOutput||[])[e]],sampleIndex:e}))}}))),r.a.createElement(Mn,Object.assign({},x,{sampleInput:void 0!==x.sampleIndex?t.taskData[x.sampleIndex]:null,onClose:function(){S({open:!1})},onChange:function(e){var n=Wn({},t,{taskData:Object(xe.a)(t.taskData)});n.taskData[x.sampleIndex]=e,N(JSON.stringify(n,null,"  "))}})))},Gn=n(624),Vn=n(312),Yn=Object(c.a)({root:{position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,alignItems:"center",pointerEvents:"none"},errorBox:{display:"flex",backgroundColor:en.a[700],color:"#fff",padding:4,marginBottom:4}}),Xn=function(e){var t=e.errors,n=Yn();return r.a.createElement("div",{className:n.root},t.map(function(e){return r.a.createElement(Gn.a,{key:e.id,in:e.life<5e3},r.a.createElement(Vn.a,{in:e.life>500},r.a.createElement("div",{className:n.errorBox},e.message)))}))};function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Kn=function(){var e=Object(a.useState)([]),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){if(0===n.length)return function(){};var e=setInterval(function(){r(n.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{life:e.life-100})}).filter(function(e){return e.life>0}))},100);return function(){return clearInterval(e)}},[n]),[n,function(e){r(n.concat([{id:Math.random().toString().split(".")[1],message:e,life:5e3}]))}]},Qn=function(e,t){var n=Object(a.useState)(function(){try{return JSON.parse(window.localStorage.getItem(e))}catch(n){return t}}),r=Object(O.a)(n,2),o=r[0],i=r[1];return[o,function(t){window.localStorage.setItem(e,JSON.stringify(t)),i(t)}]};function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ta=Object(c.a)({empty:{textAlign:"center",padding:100,color:"#666",fontSize:28}}),na=function(){var e=ta(),t=Object(a.useState)("welcome"),n=Object(O.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1],p=Object(a.useState)(),m=Object(O.a)(p,2),f=m[0],d=m[1],g=Kn(),b=Object(O.a)(g,2),h=b[0],v=b[1],E=Qn("recentItems",[]),y=Object(O.a)(E,2),j=y[0],k=y[1];j||(j=[]);var w=Object(a.useMemo)(function(){return function(e){u({fileName:"unnamed",content:e.oha,id:Math.random().toString().split(".")[1]}),d(e.oha),i("edit")}},[]),x=Object(a.useMemo)(function(){return function(e){u(e);try{d(JSON.parse(e.content))}catch(t){v("Couldn't parse content into JSON")}i("edit")}}),S=Object(a.useMemo)(function(){return function(){i("welcome")}},[]),C=Object(a.useMemo)(function(){return function(e){var t=e.name,n=new FileReader;n.onload=function(n){var a=n.target.result;try{var r=JSON.parse(a);u({fileName:t,content:r,id:Math.random().toString().split(".")[1]}),d(r),i("edit")}catch(n){console.log(n.toString()),v('Could not read file "'.concat(e.name,'"'))}},n.readAsText(e)}},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.Provider,{value:{recentItems:j,onClickTemplate:w,onClickHome:S,onOpenFile:C,onOpenRecentItem:x}},"welcome"===o?r.a.createElement(we,{onFileDrop:C,onOpenTemplate:w}):"edit"===o&&s?r.a.createElement(zn,Object.assign({key:s.id},s,{oha:f,onChangeFileName:function(e){u(ea({},s,{fileName:e}))},onChangeContent:function(e){var t=ea({},s,{content:e});u(t),j.map(function(e){return e.id}).includes(t.id)?k(j.map(function(e){return e.id===t.id?t:e})):k([t].concat(j).slice(0,3))},onChangeOHA:d})):r.a.createElement("div",{className:e.empty},'Unknown Page "',o,'"')),r.a.createElement(Xn,{errors:h}))},aa=n(233);function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var oa=Object(c.a)({root:{position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,alignItems:"center",pointerEvents:"none"},msgBox:{display:"flex",backgroundColor:aa.a[700],color:"#fff",padding:4,marginBottom:4}}),ia=Object(a.createContext)(),ca=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(O.a)(n,2),i=o[0],c=o[1];return Object(a.useEffect)(function(){if(0===i.length)return function(){};var e=setInterval(function(){c(i.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{life:e.life-100})}).filter(function(e){return e.life>0}))},100);return function(){return clearInterval(e)}},[i]),r.a.createElement(ia.Provider,{value:{toasts:i,addToast:function(e){c(i.concat([{id:Math.random().toString().split(".")[1],message:e,life:2e3}]))}}},t)},la=function(){var e=oa(),t=Object(a.useContext)(ia).toasts;return r.a.createElement("div",{className:e.root},t.map(function(t){return r.a.createElement(Gn.a,{key:t.id,in:t.life<5e3},r.a.createElement(Vn.a,{in:t.life>500},r.a.createElement("div",{className:e.msgBox},t.message)))}))};function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pa=Object(c.a)({empty:{textAlign:"center",padding:100,color:"#666",fontSize:28}}),ma=function(){var e=pa(),t=Object(a.useState)("welcome"),n=Object(O.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1],p=Object(a.useState)(),m=Object(O.a)(p,2),f=m[0],d=m[1],g=Kn(),b=Object(O.a)(g,2),h=b[0],v=b[1],E=Qn("recentItems",[]),y=Object(O.a)(E,2),j=y[0],k=y[1],w={addToast:Object(a.useContext)(ia).addToast}.addToast;j||(j=[]);var x=sn(),S=x.remote,C=x.ipcRenderer,D=Object(a.useMemo)(function(){return function(e){u({fileName:"unnamed",content:e.oha,id:Math.random().toString().split(".")[1]}),d(e.oha),i("edit")}},[]);Object(a.useEffect)(function(){var e=function(){return i("welcome")},t=function(e,t){t.templateName?D(ae.find(function(e){return e.name===t.templateName})):(u({fileName:"unnamed",content:{},id:Math.random().toString().split(".")[1]}),d({}),i("edit"))},n=function(e,t){try{var n=JSON.parse(t.content);u(ua({},t,{content:n})),d(n),i("edit")}catch(e){v(e.toString())}},a=function(){var e=Object(Wt.a)(_t.a.mark(function e(t,n){var a,r,o,i;return _t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.filePath,s.filePath){e.next=12;break}return e.next=4,S.dialog.showSaveDialog();case 4:if(r=e.sent,o=r.cancelled,i=r.filePath,a=i,!o&&a){e.next=11;break}return v("Could not save"),e.abrupt("return");case 11:u(ua({},s,{filePath:a}));case 12:return e.next=14,S.require("fs").promises.writeFile(a,JSON.stringify(f,null,"  "));case 14:w("File Saved!");case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return C.on("open-welcome-page",e),C.on("open-settings-page",function(){return i("edit")}),C.on("open-samples-page",function(){return i("edit")}),C.on("open-label-page",function(){return i("edit")}),C.on("new-file",t),C.on("open-file",n),C.on("save-file",a),function(){C.removeListener("open-welcome-page",e),C.removeListener("open-settings-page",e),C.removeListener("open-samples-page",e),C.removeListener("open-label-page",e),C.removeListener("new-file",t),C.removeListener("open-file",n),C.removeListener("save-file",a)}},[s]);var P=Object(a.useMemo)(function(){return function(e){u(e);try{d(JSON.parse(e.content))}catch(t){v("Couldn't parse content into JSON")}i("edit")}}),N=Object(a.useMemo)(function(){return function(){return i("welcome")}},[]),I=Object(a.useMemo)(function(){return function(e){var t=e.name,n=e.path,a=new FileReader;a.onload=function(a){var r=a.target.result;try{var o=JSON.parse(r);u({fileName:t,filePath:n,content:o,id:n}),d(o),i("edit")}catch(a){console.log(a.toString()),v('Could not read file "'.concat(e.name,'"'))}},a.readAsText(e)}},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.Provider,{value:{recentItems:j,onClickTemplate:D,onClickHome:N,onOpenRecentItem:P,isDesktop:!0}},"welcome"===o?r.a.createElement(we,{showDownloadLink:!1,onFileDrop:I,onOpenTemplate:D}):"edit"===o&&s?r.a.createElement(zn,Object.assign({key:s.id},s,{oha:f,onChangeFileName:function(e){u(ua({},s,{fileName:e}))},onChangeContent:function(e){var t=ua({},s,{content:e});u(t),j.map(function(e){return e.id}).includes(t.id)?k(j.map(function(e){return e.id===t.id?t:e})):k([t].concat(j).slice(0,3))},onChangeOHA:d})):r.a.createElement("div",{className:e.empty},'Unknown Page "',o,'"')),r.a.createElement(Xn,{errors:h}),r.a.createElement(la,null))},fa=function(){var e=sn();return r.a.createElement(g,null,r.a.createElement(ca,null,Boolean(e)?r.a.createElement(ma,null):r.a.createElement(na,null)))};i.a.render(r.a.createElement(fa,null),document.getElementById("root"))}},[[332,1,2]]]);
//# sourceMappingURL=main.77da7bd4.chunk.js.map